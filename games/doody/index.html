<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A-Frame Web VR</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <style>
        body { margin: 0; }
        #info {
            position: absolute; 
            top: 10px; 
            left: 50%; 
            transform: translateX(-50%); 
            color: white; 
            font-size: 20px; 
            text-align: center; 
        }
    </style>
</head>
<body>
    <div id="info"></div>
    <a-scene>
        <a-sky id="sky" color="#000"></a-sky>
        <a-plane id="floor" rotation="-90 0 0" width="1000" height="1000" color="#AAA"></a-plane>
        <a-entity id="buildings"></a-entity>
        <a-entity id="labels"></a-entity>
    </a-scene>

    <script>
        const colors = ['#FF5733', '#33FF57', '#3357FF', '#F3FF33', '#FF33FF', '#33FFF3', '#FFFF33', '#FF3333', '#3333FF', '#33FFF3'];
        const getRandomColor = () => colors[Math.floor(Math.random() * colors.length)];
        const getRandomString = () => Math.random().toString(36).substring(7);

        function updateSkyAndFloor() {
            const sky = document.getElementById('sky');
            const floor = document.getElementById('floor');
            sky.setAttribute('color', getRandomColor());
            floor.setAttribute('color', getRandomColor());
        }

        function createBuildings() {
            const buildingContainer = document.getElementById('buildings');
            buildingContainer.innerHTML = ''; // Clear previous buildings
            
            for (let i = 0; i < 10; i++) {
                const width = Math.random() * 3 + 1; // Width between 1 and 4
                const height = Math.random() * 5 + 1; // Height between 1 and 6
                const depth = Math.random() * 3 + 1; // Depth between 1 and 4
                const xPos = Math.random() * 20 - 10;
                const zPos = Math.random() * 20 - 10;
                
                const building = document.createElement('a-box');
                building.setAttribute('width', width);
                building.setAttribute('height', height);
                building.setAttribute('depth', depth);
                building.setAttribute('position', `${xPos} ${height / 2} ${zPos}`);
                building.setAttribute('color', getRandomColor());
                
                // Create windows on the building
                const windowCount = Math.floor(Math.random() * 4) + 1; // Random number of windows
                for (let j = 0; j < windowCount; j++) {
                    const windowWidth = 0.2;
                    const windowHeight = Math.random() * 1 + 0.5; // Random window height between 0.5 and 1.5
                    const windowX = Math.random() * (width - windowWidth) - (width / 2);
                    const windowY = Math.random() * (height - windowHeight) + (windowHeight / 2);

                    const windowColor = Math.random() < 0.5 ? "black" : "yellow"; // Randomly choose black or yellow
                    const window = document.createElement('a-box');
                    window.setAttribute('width', windowWidth);
                    window.setAttribute('height', windowHeight);
                    window.setAttribute('depth', 0.01); // Thin rectangle for the window
                    window.setAttribute('position', `${windowX} ${windowY} ${depth / 2 + 0.01}`); // Position on the face of the building
                    window.setAttribute('color', windowColor);
                    
                    building.appendChild(window);
                }
                
                buildingContainer.appendChild(building);
            }
        }

        function createLabels(currentString) {
            const labelContainer = document.getElementById('labels');
            labelContainer.innerHTML = ''; // Clear previous labels
            
            for (let i = 0; i < 10; i++) {
                const sphere = document.createElement('a-sphere');
                sphere.setAttribute('radius', 0.1);
                sphere.setAttribute('color', getRandomColor());
                const xPos = Math.random() * 20 - 10;
                const zPos = Math.random() * 20 - 10;
                sphere.setAttribute('position', `${xPos} 0.2 ${zPos}`);

                const label = document.createElement('a-text');
                label.setAttribute('value', currentString);
                label.setAttribute('align', 'center');
                label.setAttribute('color', 'white');
                label.setAttribute('position', '0 0.15 0');
                sphere.appendChild(label);
                
                labelContainer.appendChild(sphere);
            }
        }

        function updateRandomString() {
            const randomString = getRandomString();
            document.getElementById('info').innerText = randomString;
            createLabels(randomString);
        }

        // Initial setup
        updateSkyAndFloor();
        createBuildings();
        updateRandomString();

        // Set intervals for updates
        setInterval(updateSkyAndFloor, 10000); // Update sky and floor every 10 seconds
        setInterval(createBuildings, 10000); // Update buildings every 10 seconds
        setInterval(updateRandomString, 10000); // Update random string every 10 seconds
    </script>
</body>
</html>
