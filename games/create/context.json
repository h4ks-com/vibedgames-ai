{
  "messages": [
    {
      "role": "user",
      "content": "a mario clone in 2d\nMake sure everything is in a single HTML file with embedded CSS and JS in a single code block to be used as a web app."
    },
    {
      "role": "assistant",
      "content": "```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Mario Clone 2D</title>\n    <style>\n        body {\n            margin: 0;\n            padding: 0;\n            background-color: #87CEEB;\n            font-family: Arial, sans-serif;\n            overflow: hidden;\n        }\n        canvas {\n            display: block;\n            margin: 0 auto;\n            background-color: #87CEEB;\n        }\n        #score {\n            position: absolute;\n            top: 10px;\n            left: 10px;\n            color: white;\n            font-size: 24px;\n            font-weight: bold;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"score\">Score: 0</div>\n    <canvas id=\"gameCanvas\" width=\"800\" height=\"600\"></canvas>\n    <script>\n        const canvas = document.getElementById('gameCanvas');\n        const ctx = canvas.getContext('2d');\n        const scoreElement = document.getElementById('score');\n\n        let player = {\n            x: 100,\n            y: 500,\n            width: 48,\n            height: 48,\n            dx: 0,\n            dy: 0,\n            onGround: false,\n            jumpPower: 15,\n            gravity: 0.8,\n            speed: 5\n        };\n\n        let platforms = [\n            { x: 0, y: 548, width: 800, height: 52 }, // ground\n            { x: 150, y: 400, width: 100, height: 20 },\n            { x: 350, y: 350, width: 100, height: 20 },\n            { x: 550, y: 300, width: 100, height: 20 },\n            { x: 700, y: 200, width: 100, height: 20 }\n        ];\n\n        let coins = [\n            { x: 180, y: 360, collected: false },\n            { x: 380, y: 310, collected: false },\n            { x: 580, y: 260, collected: false },\n            { x: 730, y: 160, collected: false }\n        ];\n\n        let enemies = [\n            { x: 250, y: 500, width: 48, height: 48, dx: -1, type: 'goomba' },\n            { x: 450, y: 300, width: 48, height: 48, dx: -1, type: 'goomba' }\n        ];\n\n        let score = 0;\n        let keys = {};\n\n        document.addEventListener('keydown', (e) => {\n            keys[e.code] = true;\n        });\n\n        document.addEventListener('keyup', (e) => {\n            keys[e.code] = false;\n        });\n\n        function update() {\n            // Player input\n            if (keys['ArrowLeft']) player.dx = -player.speed;\n            else if (keys['ArrowRight']) player.dx = player.speed;\n            else player.dx = 0;\n\n            if (keys['Space'] && player.onGround) {\n                player.dy = -player.jumpPower;\n                player.onGround = false;\n            }\n\n            // Update player position\n            player.x += player.dx;\n            player.y += player.dy;\n            player.dy += player.gravity;\n\n            // Check collisions with platforms\n            player.onGround = false;\n            platforms.forEach(platform => {\n                if (player.x < platform.x + platform.width &&\n                    player.x + player.width > platform.x &&\n                    player.y < platform.y + platform.height &&\n                    player.y + player.height > platform.y) {\n                    if (player.dy > 0 && player.y < platform.y) {\n                        player.y = platform.y - player.height;\n                        player.dy = 0;\n                        player.onGround = true;\n                    }\n                }\n            });\n\n            // Boundary checks\n            if (player.x < 0) player.x = 0;\n            if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;\n\n            // Collect coins\n            coins.forEach(coin => {\n                if (!coin.collected &&\n                    player.x < coin.x + 20 &&\n                    player.x + player.width > coin.x &&\n                    player.y < coin.y + 20 &&\n                    player.y + player.height > coin.y) {\n                    coin.collected = true;\n                    score += 10;\n                    scoreElement.textContent = 'Score: ' + score;\n                }\n            });\n\n            // Update enemies\n            enemies.forEach(enemy => {\n                enemy.x += enemy.dx;\n                if (enemy.x < 100 || enemy.x > 700) enemy.dx *= -1;\n            });\n\n            // Check collisions with enemies\n            enemies.forEach(enemy => {\n                if (player.x < enemy.x + enemy.width &&\n                    player.x + player.width > enemy.x &&\n                    player.y < enemy.y + enemy.height &&\n                    player.y + player.height > enemy.y) {\n                    // Simple collision: restart\n                    player.x = 100;\n                    player.y = 500;\n                    player.dy = 0;\n                    score = 0;\n                    scoreElement.textContent = 'Score: 0';\n                    coins.forEach(c => c.collected = false);\n                }\n            });\n        }\n\n        function draw() {\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n            // Draw player\n            ctx.fillStyle = 'red';\n            ctx.fillRect(player.x, player.y, player.width, player.height);\n\n            // Draw platforms\n            ctx.fillStyle = '#8B4513';\n            platforms.forEach(platform => {\n                ctx.fillRect(platform.x, platform.y, platform.width, platform.height);\n            });\n\n            // Draw coins\n            ctx.fillStyle = 'gold';\n            coins.forEach(coin => {\n                if (!coin.collected) {\n                    ctx.fillRect(coin.x, coin.y, 20, 20);\n                }\n            });\n\n            // Draw enemies\n            ctx.fillStyle = 'brown';\n            enemies.forEach(enemy => {\n                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);\n            });\n        }\n\n        function gameLoop() {\n            update();\n            draw();\n            requestAnimationFrame(gameLoop);\n        }\n\n        gameLoop();\n    </script>\n</body>\n</html>\n```"
    }
  ]
}