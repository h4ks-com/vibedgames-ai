<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Drawing App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }
        #canvas {
            border: 1px solid black;
            cursor: crosshair;
        }
        .color-control {
            display: flex;
            margin: 10px;
        }
        .color {
            width: 30px;
            height: 30px;
            margin-right: 5px;
            border: 1px solid #ccc;
            cursor: pointer;
        }
        .button-container {
            display: flex;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        .output-item {
            margin: 5px;
            padding: 10px;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>

    <h1>Canvas Drawing App</h1>
    <canvas id="canvas" width="400" height="400"></canvas>
    
    <div class="color-control">
        <label>Color:</label>
        <div class="color" style="background-color: red;" data-color="red"></div>
        <div class="color" style="background-color: green;" data-color="green"></div>
        <div class="color" style="background-color: blue;" data-color="blue"></div>
        <div class="color" style="background-color: yellow;" data-color="yellow"></div>
        <div class="color" style="background-color: purple;" data-color="purple"></div>
        <div class="color" style="background-color: orange;" data-color="orange"></div>
        <div class="color" style="background-color: black;" data-color="black"></div>
        <div class="color" style="background-color: white; border: 1px solid black;" data-color="white"></div>
    </div>
    
    <label for="brush-width">Brush Width: </label>
    <input type="range" id="brush-width" min="1" max="20" value="5">
    
    <button id="sendBtn">Send</button>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const colors = document.querySelectorAll('.color');
        let selectedColor = 'black';
        let isDrawing = false;
        let brushWidth = 5;

        colors.forEach(color => {
            color.addEventListener('click', () => {
                selectedColor = color.getAttribute('data-color');
            });
        });

        document.getElementById('brush-width').addEventListener('input', (e) => {
            brushWidth = e.target.value;
        });

        canvas.addEventListener('mousedown', (e) => {
            isDrawing = true;
            draw(e);
        });

        canvas.addEventListener('mouseup', () => {
            isDrawing = false;
            ctx.beginPath();
        });

        canvas.addEventListener('mousemove', draw);

        function draw(e) {
            if (!isDrawing) return;
            ctx.lineWidth = brushWidth;
            ctx.lineCap = 'round';
            ctx.strokeStyle = selectedColor;

            ctx.lineTo(e.clientX - canvas.offsetLeft, e.clientY - canvas.offsetTop);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(e.clientX - canvas.offsetLeft, e.clientY - canvas.offsetTop);
        }

        document.getElementById('sendBtn').addEventListener('click', () => {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            let outputHTML = '<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Your Drawing</title>';
            outputHTML += '<style>body { display: flex; flex-wrap: wrap; padding: 20px; } .output-item { margin: 5px; }</style>';
            outputHTML += '</head><body>';

            for (let i = 0; i < data.length; i += 4) {
                const r = data[i];
                const g = data[i + 1];
                const b = data[i + 2];
                const alpha = data[i + 3];

                if (alpha > 0) {
                    const colorHex = `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;
                    let elementType = '';

                    if (r === 255 && g === 0 && b === 0) elementType = 'button';
                    else if (r === 0 && g === 255 && b === 0) elementType = 'input';
                    else if (r === 0 && g === 0 && b === 255) elementType = 'textarea';
                    else if (r === 255 && g === 255 && b === 0) elementType = 'select';
                    else if (r === 128 && g === 0 && b === 128) elementType = 'div';
                    else if (r === 255 && g === 165 && b === 0) {
                        elementType = 'label';
                    } else {
                        elementType = 'div';
                    }
                    
                    outputHTML += `<${elementType} style="background-color:${colorHex}; width: 20px; height: 20px;" class="output-item"></${elementType}>`;
                }
            }

            outputHTML += '</body></html>';
            const newWindow = window.open();
            newWindow.document.write(outputHTML);
            newWindow.document.close();
        });
    </script>
</body>
</html>
