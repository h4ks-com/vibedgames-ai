:root { 
  --bg: #0a0f1a;
  --bg2: #0b1220;
  --panel: rgba(8,12,28,.92);
  --text: #e9f0ff;
  --muted: #a8b8e7;
  --accent-fizz: #3ee37a; /* lime/green for Fizz */
  --accent-buzz: #4fb3ff;   /* cyan/blue for Buzz */
  --accent-fizzbuzz: #a94dff;/* purple for FizzBuzz */
  --accent-number: #cbd7ff;  /* soft blue for numbers */
  --border: rgba(40,60,120,.4);
  --glow: 0 0 12px rgba(0, 180, 255,.8);
  --radius: 14px;
  --shadow: 0 8px 20px rgba(0,0,0,.25);
  --panel-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 6px 20px rgba(0,0,0,.25);
  --font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto;
}
* { box-sizing: border-box; }

html, body, #fbv-app { height: 100%; }

body { margin: 0; font-family: var(--font-family); color: var(--text);
  background: #070b14;
  background-image: radial-gradient(circle at 20% -10%, rgba(60,120,200,.25), transparent 40%), radial-gradient(circle at 80% 0%, rgba(140,40,180,.25), transparent 40%), linear-gradient(#0a0f1a, #0a0f1a 60%, #0b1020);
  background-size: cover; background-attachment: fixed;
}
.skip-link { position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
.skip-link:focus { left:0; top:0; width:auto; height:auto; padding:8px 12px; background:#111; color:#fff; z-index:999; border-radius:6px; }

.fbv-app { display:flex; flex-direction:column; height:100%; overflow:hidden; }

.fbv-header { display:flex; justify-content:space-between; align-items:center; padding:14px 16px; border-bottom:1px solid rgba(255,255,255,.08);
  background: linear-gradient(135deg, rgba(20,40,90,.9), rgba(12,20,50,.9)); position:sticky; top:0; z-index:5; backdrop-filter: saturate(1.2) blur(4px); }
.fbv-header .brand { display:flex; align-items:center; gap:10px; }
.fbv-header .title { font-size: clamp(1.05rem, 1rem + 0.75vw, 1.4rem); font-weight: 800; color:#e8f3ff; letter-spacing:.5px; text-shadow: 0 1px 0 rgba(0,0,0,.3); }
.brand svg { filter: drop-shadow(0 0 6px rgba(120,240,255,.9)); }

.controls { display:flex; align-items:center; flex-wrap:wrap; gap:8px; }

.control-group { display:flex; align-items:center; gap:6px; padding:6px 8px; border-radius:8px; background: rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08); color:#dbe7ff; font-size: .85rem; }
.control-group select, .control-group input { background:#0e1b35; color:var(--text); border:1px solid #2b4a8b; padding:4px 8px; border-radius:6px; }

.panel { background: rgba(8,12,28,.95); border:1px solid rgba(40,60,120,.4); border-radius: var(--radius); padding:12px; box-shadow: var(--shadow), inset 0 1px 0 rgba(255,255,255,.04); }

.fbv-main { display:grid; grid-template-columns: minmax(260px,340px) 1fr minmax(260px,360px); gap:12px; padding:12px; min-height:0; }
.timeline { display:flex; flex-wrap:nowrap; overflow:auto; padding:6px 0 6px 0; border-bottom:1px solid rgba(255,255,255,.08); gap:8px; align-items:center; }
.node { min-width:40px; height:40px; border-radius:10px; display:flex; align-items:center; justify-content:center; background:#111; color:#fff; border:1px solid #334; position:relative; margin-right:6px; transition: transform .25s ease, background .25s ease, box-shadow .25s ease; font-family: ui-monospace, SFMono-Regular; font-size: .95rem; }
.node.answered { opacity:.6; filter: saturate(.9); }
.node.current { transform: scale(1.25); z-index:2; background: linear-gradient(135deg, #0b1c3a, #1a2e66); box-shadow: 0 0 12px rgba(0,180,255,.9); }

/* Label color states for educational milestones (Fizz/Buzz/FizzBuzz/Number) */
.node[data-label="Fizz"] { background: linear-gradient(135deg, #0d6a42, #1f9a63); border-color:#1f6b32; box-shadow: 0 0 12px rgba(52,255,176,.7); color:#e7fff0; }
.node[data-label="Buzz"] { background: linear-gradient(135deg, #0e3b8a, #1b6bd7); border-color:#2b4a8b; box-shadow: 0 0 12px rgba(70,140,255,.6); color:#eaffff; }
.node[data-label="FizzBuzz"] { background: linear-gradient(135deg, #4b1a9a, #a93aff); border-color:#7a4bd6; box-shadow: 0 0 12px rgba(210,100,255,.7); color:#fff; }
.node[data-label="Number"] { background: linear-gradient(135deg, #2a2f40, #3a456b); border-color:#5a6bbd; box-shadow: 0 0 12px rgba(120,160,255,.6); color:#eaf2ff; }

.stage-inner { padding:12px; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; position:relative; min-height:480px; }
.stage-header { font-family: ui-monospace; font-size:1rem; color:#9bd38a; margin-bottom:6px; text-shadow:0 1px 0 rgba(0,0,0,.4); }
#stage { width:100%; height:auto; max-width:900px; border-radius:12px; box-shadow: 0 8px 40px rgba(0,0,0,.5); background: #001a30; display:block; }

.glimpse-panel { margin-top:8px; min-height:40px; border-left:2px solid #2a2a2a; padding-left:8px; font-size:.95rem; color:#d9e0ff; background: rgba(255,255,255,.02); border-radius:6px; padding:8px; }

.fbv-right { display:flex; flex-direction:column; gap:12px; }
.status-panel { display:flex; flex-direction:column; gap:6px; border-radius:8px; padding:6px; }
.status-row { display:flex; justify-content:space-between; padding:6px 0; border-bottom:1px dashed rgba(255,255,255,.08); }

.btn-row { display:flex; flex-wrap:wrap; gap:8px; }
.lbl-btn { padding:12px 14px; border-radius:8px; border:1px solid #365caa; background: linear-gradient(#182344, #0f1a2f); color:#e7f0ff; cursor:pointer; min-width:110px; box-shadow: inset 0 1px 0 rgba(255,255,255,.04); }
.lbl-btn:hover { filter: brightness(1.05); transform: translateY(-1px); }

.epoch-badge { font-family: ui-monospace; font-size:.95rem; padding:6px 10px; border-radius:6px; background:#1a2a4a; color:#e7f0ff; }

.fbv-footer { display:flex; justify-content:space-between; align-items:center; padding:12px; border-top:1px solid rgba(255,255,255,.08); gap:12px; }

@media (max-width: 1100px) {
  .fbv-main { grid-template-columns: 1fr; }
  .timeline { order: 2; }
  .fbv-right { order: 3; }
}
@media (max-width: 640px) {
  .fbv-header { padding: 10px; }
  .control-group { font-size: .8rem; }
  .node { min-width: 34px; height: 34px; border-radius: 8px; font-size: .85rem; }
  #stage { max-width: 100%; height: auto; }
}

/* Accessibility: High contrast mode toggle via class on body */
body.high-contrast { background: #000; color: #fff; }
body.high-contrast .panel { background: #222; border: 1px solid #fff; }
body.high-contrast .node { border:1px solid #fff; background:#333; color:#fff; text-shadow: none; }
body.high-contrast .fbv-header { background: #000; border-bottom-color:#fff; }
body.high-contrast .control-group { background: #000; border-color:#fff; color:#fff; }
body.high-contrast .lbl-btn { background: #111; border-color:#fff; color:#fff; }
body.high-contrast .epoch-badge { background:#333; color:#fff; } 
body.high-contrast #stage { background:#111; }

/* Subtle neon glow for aesthetic depth on non-critical elements */
.glow { filter: drop-shadow(0 0 10px rgba(0,180,255,.6)); }

/* Reduced motion preference support */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}
