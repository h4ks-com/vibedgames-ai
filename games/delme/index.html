<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Adventure Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #cceeff;
        }
        canvas {
            display: block;
            background: #e0f7fa;
        }
    </style>
    <script>
        // Inline version of zzfx for sound effects
        function zzfx(...p) {
            const e = document.createElement('audio');
            const r = Math.random, n = 44100, c = Math.abs, s = p[0], a = p[1] || 0.1, f = p[2] || 220, l = p[3], z = p[4] || 0, h = p[5], q = p[6], t = p[7] || 1, o = p[8] || 0, x = p[9], y = p[10], b = p[11], w = p[12] || 0, d = p[13], m = p[14], v = p[15] || 0, re = e.setAttribute
            (['type', 'audio/mpeg', 'crossorigin', 'anonymous']);
            (l ? (re.bind(e)('src', 'data:audio/mpeg;base64,' + b64(s + r() * 20, r())) + e.play()) : (d || w) && (re.bind(e)('src', 'data:audio/mpeg;base64,' + b64(c(b) * 8)) + e.play()));
            function b64(b, a) { return b.toString(a || 64) }
            return e;
        }

        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        document.body.appendChild(canvas);
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Game Variables
        const player = { x: canvas.width / 2, y: canvas.height / 2, size: 30, collectedItems: 0 };
        const items = [];
        const playerSpeed = 5;

        // Generate Random Items
        function generateItems(count) {
            for (let i = 0; i < count; i++) {
                items.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: 20
                });
            }
        }

        generateItems(5); // Create 5 items

        // Sound effects
        function playSound() {
            zzfx(1, 0.1, 1100, 0, 0.04, 0, 0.06, 1, 0, 0.3, 0, 0, 0.25, 0, 0, 0.2);
        }

        function collectSound() {
            zzfx(1, 0.1, 800, 0, 0.1, 0, 0.1, 1, 0, 0.2, 0, 0.5, 0, 0, 0, 0.3);
        }

        // Player movement
        window.addEventListener('keydown', (event) => {
            if (event.key === 'ArrowUp') player.y -= playerSpeed; 
            if (event.key === 'ArrowDown') player.y += playerSpeed; 
            if (event.key === 'ArrowLeft') player.x -= playerSpeed; 
            if (event.key === 'ArrowRight') player.x += playerSpeed; 
            playSound();
        });

        // Check collision with items
        function checkCollision() {
            items.forEach((item, index) => {
                if (
                    player.x < item.x + item.size &&
                    player.x + player.size > item.x &&
                    player.y < item.y + item.size &&
                    player.y + player.size > item.y
                ) {
                    items.splice(index, 1); // Remove item
                    player.collectedItems++; // Increase collected items
                    collectSound(); // Play collect sound
                }
            });
        }

        // Draw function
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // Draw player
            ctx.fillStyle = 'blue';
            ctx.fillRect(player.x, player.y, player.size, player.size);
            
            // Draw items
            ctx.fillStyle = 'gold';
            items.forEach(item => {
                ctx.fillRect(item.x, item.y, item.size, item.size);
            });

            // Draw collected items count
            ctx.fillStyle = 'black';
            ctx.font = '20px Arial';
            ctx.fillText(`Collected Items: ${player.collectedItems}`, 10, 20);
        }

        // Game loop
        function gameLoop() {
            checkCollision();
            draw();
            requestAnimationFrame(gameLoop);
        }

        gameLoop(); // Start the game loop
    </script>
</body>
</html>
