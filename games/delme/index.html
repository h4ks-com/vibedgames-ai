<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Adventure Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #cceeff;
        }
        canvas {
            display: block;
            background: #e0f7fa;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/gh/littlejs/little.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/sojamo/zzfx/dist/zzfx.min.js"></script>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Game Variables
    const player = { x: canvas.width / 2, y: canvas.height / 2, size: 30, collectedItems: 0 };
    const items = [];
    const playerSpeed = 5;

    // Generate Random Items
    function generateItems(count) {
        for (let i = 0; i < count; i++) {
            items.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: 20
            });
        }
    }

    generateItems(5); // Create 5 items

    // Sound effects
    function playSound() {
        zzfx(...[1, 0.1, 1100, , 0.04, , 0.06, 1, , 0.3, , , 0.25, , , , 0.2]);
    }

    function collectSound() {
        zzfx(...[1, 0.1, 800, , 0.1, , 0.1, 1, , 0.2, , , 0.5, , , , 0.3]);
    }

    // Player movement
    window.addEventListener('keydown', (event) => {
        if (event.key === 'ArrowUp') player.y -= playerSpeed; 
        if (event.key === 'ArrowDown') player.y += playerSpeed; 
        if (event.key === 'ArrowLeft') player.x -= playerSpeed; 
        if (event.key === 'ArrowRight') player.x += playerSpeed; 
        playSound();
    });

    // Check collision with items
    function checkCollision() {
        items.forEach((item, index) => {
            if (
                player.x < item.x + item.size &&
                player.x + player.size > item.x &&
                player.y < item.y + item.size &&
                player.y + player.size > item.y
            ) {
                items.splice(index, 1); // Remove item
                player.collectedItems++; // Increase collected items
                collectSound(); // Play collect sound
            }
        });
    }

    // Draw function
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        // Draw player
        ctx.fillStyle = 'blue';
        ctx.fillRect(player.x, player.y, player.size, player.size);
        
        // Draw items
        ctx.fillStyle = 'gold';
        items.forEach(item => {
            ctx.fillRect(item.x, item.y, item.size, item.size);
        });

        // Draw collected items count
        ctx.fillStyle = 'black';
        ctx.font = '20px Arial';
        ctx.fillText(`Collected Items: ${player.collectedItems}`, 10, 20);
    }

    // Game loop
    function gameLoop() {
        checkCollision();
        draw();
        requestAnimationFrame(gameLoop);
    }

    gameLoop(); // Start the game loop
</script>
</body>
</html>
