<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Control with Gravity</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-image: url('https://picsum.photos/200/300');
            background-size: cover;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        #emoji {
            font-size: 50px;
            position: absolute;
            top: 0;
            left: 0;
            transition: top 0.1s, left 0.1s;
        }

        .platform {
            position: absolute;
            background-color: #654321;
            height: 10px;
        }
    </style>
</head>

<body>
    <div id="emoji">ðŸ˜€</div>
    <div class="platform" style="width: 100px; left: 50px; top: 200px;"></div>
    <div class="platform" style="width: 150px; left: 200px; top: 300px;"></div>
    <div class="platform" style="width: 100px; left: 100px; top: 400px;"></div>

    <script>
        const emoji = document.getElementById('emoji');
        const platforms = document.querySelectorAll('.platform');
        let position = { top: 0, left: 0 };
        let velocityY = 0;
        const gravity = 0.5;
        let isJumping = false;

        document.addEventListener('keydown', (event) => {
            switch (event.key) {
                case 'y': // up left
                    position.top -= 10;
                    position.left -= 10;
                    break;
                case 'u': // up right
                    position.top -= 10;
                    position.left += 10;
                    break;
                case 'g': // left
                    position.left -= 10;
                    break;
                case 'h': // pass
                    break;
                case 'j': // right
                    position.left += 10;
                    break;
                case 'b': // down left
                    position.top += 10;
                    position.left -= 10;
                    break;
                case 'n': // down right
                    position.top += 10;
                    position.left += 10;
                    break;
                case ' ': // spacebar to jump
                    if (!isJumping) {
                        velocityY = -10; // jump velocity
                        isJumping = true;
                    }
                    break;
            }
            updatePosition();
        });

        function updatePosition() {
            // Apply gravity
            velocityY += gravity;
            position.top += velocityY;

            // Check for collision with platforms
            let onGround = false;
            platforms.forEach(platform => {
                const rect = platform.getBoundingClientRect();
                if (position.left + 25 > rect.left && position.left < rect.right &&
                    position.top + 50 > rect.top && position.top + 50 < rect.bottom) {
                    position.top = rect.top - 50; // place emoji on top of the platform
                    velocityY = 0; // reset velocity
                    onGround = true;
                    isJumping = false; // reset jumping state
                }
            });

            // If not on ground, check for floor
            if (!onGround && position.top + 50 < window.innerHeight) {
                emoji.style.top = position.top + 'px';
                emoji.style.left = position.left + 'px';
            } else if (position.top + 50 >= window.innerHeight) {
                position.top = window.innerHeight - 50; // stop at the bottom
                velocityY = 0; // reset velocity
                isJumping = false; // reset jumping state
            }

            emoji.style.top = position.top + 'px';
            emoji.style.left = position.left + 'px';
        }

        // Game loop to continuously update position
        function gameLoop() {
            updatePosition();
            requestAnimationFrame(gameLoop);
        }

        gameLoop(); // Start the game loop
    </script>
</body>

</html>
