<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Frame Random Circles</title>
    <meta name="description" content="Random Circles in A-Frame">
    <script src="https://aframe.io/releases/v3.0.0/aframe.min.js"></script>
    <style>
      body { margin: 0; }
      canvas { outline: none; }
    </style>
  </head>
  <body>
    <a-scene>
      <a-entity id="rig" movement-controls="constrainToNavMesh: false" kinematic-body position="0 1.6 4">
        <a-entity id="camera" camera look-controls wasd-controls></a-entity>
        <a-entity id="cursor" cursor="fuse: true; fuseTimeout: 500"
                  geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                  material="color: black; shader: flat"
                  position="0 0 -1"
                  raycaster="objects: .clickable"></a-entity>
      </a-entity>

      <a-entity id="circle-container">
        <a-animation attribute="rotation" dur="100" to="0 0 360" fill="none" repeat="indefinite"></a-animation>
      </a-entity>

      <a-entity light="type: ambient; color: #445451"></a-entity>
      <a-entity light="type: point; intensity: 0.6; distance: 10; decay: 2" position="2 4 2"></a-entity>
    </a-scene>

    <script>
      AFRAME.registerComponent('random-circles', {
        init: function () {
          const container = document.getElementById('circle-container');
          for (let i = 0; i < 20; i++) {
            const circle = document.createElement('a-circle');
            const x = (Math.random() - 0.5) * 10;
            const y = Math.random() * 5;
            const z = (Math.random() - 0.5) * 10;
            const color = '#' + Math.floor(Math.random()*16777215).toString(16);

            circle.setAttribute('position', {x: x, y: y, z: z});
            circle.setAttribute('radius', 0.5);
            circle.setAttribute('material', {color: color, shader: 'flat'});

            container.appendChild(circle);
          }
        }
      });

      document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('circle-container').setAttribute('random-circles', '');
      });
    </script>
  </body>
</html>
