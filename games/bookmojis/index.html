<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>üìöüèîÔ∏èüêâüóùÔ∏è</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  :root{
    --bg:#0b1020;
    --card:#0f1724;
    --accent:linear-gradient(135deg,#f6c667,#f99b4b);
    --glass: rgba(255,255,255,0.03);
  }
  html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
  body{
    background:
      radial-gradient(60% 40% at 10% 10%, rgba(255,255,255,0.02), transparent),
      linear-gradient(180deg,#071029 0%, #061026 100%);
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px;
    box-sizing:border-box;
  }

  .library{
    width:min(1100px,96%);
    display:grid;
    grid-template-columns:repeat(5,1fr);
    gap:18px;
  }

  .book-card{
    background:var(--card);
    border-radius:12px;
    padding:18px;
    display:flex;
    align-items:center;
    justify-content:center;
    min-height:140px;
    cursor:pointer;
    position:relative;
    box-shadow: 0 6px 18px rgba(2,6,23,0.6), inset 0 -6px 18px rgba(255,255,255,0.02);
    transition:transform .18s ease, box-shadow .18s ease;
    user-select:none;
  }
  .book-card:hover{ transform:translateY(-6px) scale(1.02); box-shadow: 0 12px 30px rgba(2,6,23,0.8); }

  .cover{
    width:100%;
    text-align:center;
    font-size:46px;
    letter-spacing:4px;
    display:flex;
    flex-direction:column;
    gap:10px;
    align-items:center;
    justify-content:center;
  }
  .spine{
    background:linear-gradient(180deg,#0b2033,#071323);
    border-radius:8px;
    padding:10px 12px;
    display:inline-block;
    transform:skewX(-8deg);
    box-shadow: 0 4px 12px rgba(2,6,23,0.6);
  }
  .ribbon{
    position:absolute;
    top:10px;
    right:10px;
    background:var(--glass);
    padding:6px 8px;
    border-radius:8px;
    font-size:18px;
    display:flex;
    gap:6px;
    align-items:center;
  }

  /* Modal */
  .modal{
    position:fixed;
    inset:0;
    display:none;
    align-items:center;
    justify-content:center;
    z-index:999;
    backdrop-filter: blur(6px) saturate(120%);
  }
  .modal.show{ display:flex; }
  .overlay{
    position:absolute; inset:0; background:linear-gradient(180deg, rgba(1,2,8,0.6), rgba(1,2,8,0.85)); 
  }
  .reader{
    position:relative;
    width:min(920px,94%);
    max-height:86vh;
    background:linear-gradient(180deg,#071226,#081422);
    border-radius:14px;
    padding:20px;
    box-shadow: 0 20px 60px rgba(2,6,23,0.8);
    display:flex;
    gap:18px;
    align-items:stretch;
    z-index:2;
  }

  .book-left{
    width:48%;
    min-height:300px;
    background:linear-gradient(180deg,#0b1620,#071014);
    border-radius:10px;
    padding:18px;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow: inset 0 -10px 40px rgba(255,255,255,0.02);
  }
  .book-right{
    width:52%;
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  .page{
    width:100%;
    height:calc(100% - 64px);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:48px;
    text-align:center;
    padding:18px;
    line-height:1.4;
    white-space:pre-wrap;
    word-break:break-word;
  }
  .controls{
    display:flex;
    gap:10px;
    align-items:center;
    justify-content:center;
    padding:8px;
  }
  .btn{
    background:linear-gradient(180deg,#0f1a24,#081018);
    color:#fff;
    border:none;
    padding:10px 14px;
    border-radius:10px;
    font-size:22px;
    cursor:pointer;
    box-shadow: 0 6px 14px rgba(2,6,23,0.6);
    transition:transform .12s ease;
  }
  .btn:active{ transform:translateY(2px); }
  .meta{
    padding:10px;
    border-radius:10px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    display:flex;
    align-items:center;
    gap:12px;
    justify-content:space-between;
    color: #dfeefa;
    font-size:20px;
  }
  .meta .title{
    font-size:22px;
  }
  .pager{
    display:flex;
    gap:10px;
    align-items:center;
    font-size:20px;
  }

  @media (max-width:800px){
    .library{ grid-template-columns:repeat(2,1fr); }
    .reader{ flex-direction:column; padding:14px; }
    .book-left,.book-right{ width:100%; }
    .page{ font-size:36px; height:320px; }
  }

  footer{ position:fixed; left:12px; bottom:12px; color:rgba(255,255,255,0.06); font-size:12px; user-select:none; }
</style>
</head>
<body>

<div class="library" id="library">
  <!-- Book cards injected by JS -->
</div>

<div class="modal" id="modal" aria-hidden="true">
  <div class="overlay" id="overlay"></div>
  <div class="reader" role="dialog" aria-modal="true" id="reader">
    <div class="book-left">
      <div class="page" id="leftPage" style="font-size:48px;"></div>
    </div>
    <div class="book-right">
      <div class="meta">
        <div class="title" id="bookTitle">üìñ</div>
        <div class="pager" id="pageIndicator">1Ô∏è‚É£/5Ô∏è‚É£</div>
      </div>
      <div class="page" id="rightPage" style="font-size:46px;"></div>
      <div class="controls" style="justify-content:space-between;">
        <div style="display:flex;gap:8px;">
          <button class="btn" id="prevBtn">‚óÄÔ∏è</button>
          <button class="btn" id="nextBtn">‚ñ∂Ô∏è</button>
        </div>
        <div style="display:flex;gap:8px;">
          <button class="btn" id="firstBtn">‚èÆÔ∏è</button>
          <button class="btn" id="closeBtn">‚ùå</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const books = [
    { cover: "üê≤üìú", pages: [
      "ü•ö\nüåã\n‚è≥",
      "üêâüë∂\n‚¨ÜÔ∏èüèîÔ∏è",
      "üî•üèòÔ∏è\n‚öîÔ∏èüõ°Ô∏è",
      "ü¶Öüëë\nüí†üìØ",
      "üè∫üìö\nüîíüóùÔ∏è"
    ]},
    { cover: "üó°Ô∏èüñ§", pages: [
      "üåÉ\nüïØÔ∏è\nüï≥Ô∏è",
      "üßç‚Äç‚ôÇÔ∏èüïµÔ∏è‚Äç‚ôÇÔ∏è\nüßµüëõ",
      "üîêü™õ\nüñêÔ∏è‚û°Ô∏è",
      "üí∞üè¨\nüèÉ‚Äç‚ôÇÔ∏èüå´Ô∏è",
      "ü¶äüé≠\nüåó"
    ]},
    { cover: "ü™Ñüìò", pages: [
      "‚ú®üîÆ\nüìà",
      "‚ö°üß†\nüñêÔ∏è",
      "üåÄüö™\nüõ∏",
      "ü™∂üìú\nüî°",
      "üí†üîã\nüåå"
    ]},
    { cover: "üåøü•£", pages: [
      "üå±üåæ\n‚òÄÔ∏èüåßÔ∏è",
      "üçÑüåº\nüîç",
      "üß™ü•§\nüü¢üîµ",
      "ü©∫ü´ó\nüõ°Ô∏è",
      "üß∫üö∂‚Äç‚ôÄÔ∏è\nüåÑ"
    ]},
    { cover: "üñ§üåÄ", pages: [
      "üö™üï≥Ô∏è\nüîÆ",
      "üëÅÔ∏èü¶¥\nüïØÔ∏è",
      "ü§ùüêê\nüåÄ",
      "üå™Ô∏èüî•\nüö®",
      "üîôüï≥Ô∏è\nüîí"
    ]},
    { cover: "‚ùÑÔ∏èü™ì", pages: [
      "üèîÔ∏èüå®Ô∏è\nüè°",
      "ü™ìüõ°Ô∏è\nüå≤",
      "üê∫üéº\nüåï",
      "ü™¶‚ö±Ô∏è\nüß≠",
      "üèπüèÜ\nüë£"
    ]},
    { cover: "‚õµüåä", pages: [
      "‚öìÔ∏èüö¢\nüåÖ",
      "üå¨Ô∏èüå©Ô∏è\nüåä",
      "ü¶àüêô\nü™µ",
      "üèùÔ∏èüî¶\nüó∫Ô∏è",
      "üí∞üè¥‚Äç‚ò†Ô∏è\nüçª"
    ]},
    { cover: "üõ°Ô∏èüê∫", pages: [
      "‚öîÔ∏èüèπ\nüèûÔ∏è",
      "üê∫ü§ù\nüî•",
      "ü•áüèµÔ∏è\nüõ°Ô∏è",
      "üîäüì£\nü´±",
      "üèÅü§ç\n‚ôæÔ∏è"
    ]},
    { cover: "üíÄüìø", pages: [
      "üè∫ü™¶\nü¶¥",
      "üîÆüåë\nüå´Ô∏è",
      "üßô‚Äç‚ôÇÔ∏è‚ö∞Ô∏è\nüìà",
      "‚ò†Ô∏èüßü\nüï∏Ô∏è",
      "üåÖüîì\nüïäÔ∏è"
    ]},
    { cover: "üê¢üåæ", pages: [
      "ü™µüå´Ô∏è\nüõ∂",
      "ü¶éü§ø\nüåø",
      "üèõÔ∏èüî±\nüóùÔ∏è",
      "üåÄü™ß\nüß≠",
      "üèûÔ∏èüèÅ\nüåà"
    ]},
  ];

  const library = document.getElementById('library');
  const modal = document.getElementById('modal');
  const overlay = document.getElementById('overlay');
  const leftPage = document.getElementById('leftPage');
  const rightPage = document.getElementById('rightPage');
  const bookTitle = document.getElementById('bookTitle');
  const pageIndicator = document.getElementById('pageIndicator');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const closeBtn = document.getElementById('closeBtn');
  const firstBtn = document.getElementById('firstBtn');

  let current = { index:0, page:0 };

  function emojiNumber(n){
    // map 1->1Ô∏è‚É£ ... up to 10 (üîü)
    const map = ["0Ô∏è‚É£","1Ô∏è‚É£","2Ô∏è‚É£","3Ô∏è‚É£","4Ô∏è‚É£","5Ô∏è‚É£","6Ô∏è‚É£","7Ô∏è‚É£","8Ô∏è‚É£","9Ô∏è‚É£","üîü"];
    return map[n] || String(n);
  }

  function createCard(b,i){
    const c = document.createElement('div');
    c.className = 'book-card';
    c.setAttribute('data-idx', i);
    c.innerHTML = `
      <div class="cover">
        <div class="spine">${b.cover}</div>
      </div>
      <div class="ribbon">${emojiNumber(i+1)}</div>
    `;
    c.addEventListener('click', ()=> openBook(i));
    return c;
  }

  function renderLibrary(){
    books.forEach((b,i)=> library.appendChild(createCard(b,i)));
  }

  function openBook(i){
    current.index = i;
    current.page = 0;
    modal.classList.add('show');
    modal.setAttribute('aria-hidden','false');
    updateReader();
    setTimeout(()=>{ document.activeElement && document.activeElement.blur(); }, 100);
  }

  function closeBook(){
    modal.classList.remove('show');
    modal.setAttribute('aria-hidden','true');
  }

  function updateReader(){
    const b = books[current.index];
    const total = b.pages.length;
    const p = current.page;
    const left = b.pages[p] || "";
    const right = b.pages[p+1] || "";
    // Two-page spread: left = page p, right = page p+1
    leftPage.innerText = left;
    rightPage.innerText = right;
    // Title shows cover emoji only
    bookTitle.innerText = b.cover;
    const displayIdx = emojiNumber(Math.floor(p/2)+1); // spreads counted as 1,2...
    const spreadTotal = emojiNumber(Math.ceil(total/2));
    pageIndicator.innerText = `${displayIdx}/${spreadTotal}`;
  }

  function next(){
    const b = books[current.index];
    if (current.page + 2 < b.pages.length){
      current.page += 2;
    } else {
      // loop to start
      current.page = 0;
    }
    updateReader();
  }
  function prev(){
    const b = books[current.index];
    if (current.page - 2 >= 0){
      current.page -= 2;
    } else {
      // jump to last spread
      current.page = (b.pages.length % 2 === 0) ? b.pages.length - 2 : b.pages.length - 1;
      if (current.page < 0) current.page = 0;
    }
    updateReader();
  }
  function first(){
    current.page = 0;
    updateReader();
  }

  // Controls
  nextBtn.addEventListener('click', next);
  prevBtn.addEventListener('click', prev);
  closeBtn.addEventListener('click', closeBook);
  firstBtn.addEventListener('click', first);
  overlay.addEventListener('click', closeBook);

  // Keyboard
  document.addEventListener('keydown', (e)=>{
    if (!modal.classList.contains('show')) return;
    if (e.key === 'ArrowRight') next();
    if (e.key === 'ArrowLeft') prev();
    if (e.key === 'Escape') closeBook();
    if (e.key === 'Home') first();
  });

  // Touch swipe for mobile
  let touchStartX = null;
  reader.addEventListener('touchstart', (ev)=>{
    touchStartX = ev.touches[0].clientX;
  }, {passive:true});
  reader.addEventListener('touchend', (ev)=>{
    if (touchStartX === null) return;
    const dx = ev.changedTouches[0].clientX - touchStartX;
    if (dx > 40) prev();
    else if (dx < -40) next();
    touchStartX = null;
  });

  renderLibrary();

})();
</script>

</body>
</html>