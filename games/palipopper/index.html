<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Guessing Game in VR</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <a-scene>
        <a-entity camera look-controls position="0 1.6 0"></a-entity>
        <a-entity light="type: ambient; color: #FFF"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 1" position="-1 1 1"></a-entity>

        <a-entity id="textEntity" position="0 1 -3">
            <a-text id="word" value="..." align="center" color="#000" width="4"></a-text>
        </a-entity>

        <a-entity position="0 0.5 -3">
            <a-text id="scoreDisplay" value="Score: 0" color="#000" align="center" width="4"></a-text>
            <a-text id="tenureDisplay" value="Tenure: 0" color="#000" align="center" width="4" position="0 -0.5 0"></a-text>
        </a-entity>

        <a-entity id="deanAlert" class="hidden" position="0 1 -3">
            <a-text value="Warning: The Dean is doing budget cuts!" color="red" align="center" width="4"></a-text>
        </a-entity>

        <a-entity id="dragonAlert" class="hidden" position="0 1 -3">
            <a-text value="" color="green" align="center" width="4"></a-text>
        </a-entity>

        <a-entity id="languageSelect" geometry="primitive: plane; height: 1; width: 2" material="color: #CCC" position="0 0.5 -3" text="value: Choose Language; align: center; width: 4" class="clickable" href="#" onclick="showLanguageOptions()"></a-entity>

        <a-entity id="wagerButton" geometry="primitive: plane; height: 1; width: 2" material="color: #6C9" position="0 0 -3" text="value: Wager Points; align: center; width: 4" class="clickable" href="#" onclick="wagerPoints()"></a-entity>
        <a-entity id="saveButton" geometry="primitive: plane; height: 1; width: 2" material="color: #6C9" position="0 -1 -3" text="value: Save Points with Tenure; align: center; width: 4" class="clickable" href="#" onclick="savePoints()"></a-entity>
    </a-scene>

    <script>
        const words = {
            "Pali": ["Dhamma", "Sangha", "Buddha", "Nibbana", "Kamma"],
            "Sanskrit": ["Dharma", "Sangha", "Buddha", "Nirvana", "Karma"]
        };

        let currentWord = '';
        let currentLanguage = '';
        let score = 0;
        let tenure = 0;

        function getRandomWord() {
            const languages = Object.keys(words);
            currentLanguage = languages[Math.floor(Math.random() * languages.length)];
            const wordList = words[currentLanguage];
            currentWord = wordList[Math.floor(Math.random() * wordList.length)];
            document.getElementById('word').setAttribute('value', currentWord);
        }

        function updateScoreDisplay() {
            document.getElementById('scoreDisplay').setAttribute('value', "Score: " + score);
            document.getElementById('tenureDisplay').setAttribute('value', "Tenure: " + tenure);
        }

        function deanAlert() {
            document.getElementById('deanAlert').setAttribute('class', '');
            setTimeout(() => {
                document.getElementById('deanAlert').setAttribute('class', 'hidden');
                const budgetCuts = Math.floor(Math.random() * 50) + 1; // Random cuts between 1 and 50
                score = Math.max(0, score - budgetCuts);
                alert(`The Dean made budget cuts! You lost ${budgetCuts} points.`);
                updateScoreDisplay();
            }, 3000); // Show alert for 3 seconds
        }

        function dragonAlert() {
            const dragonMessage = Math.random() < 0.5 ? "The Dragon offers you bonus points!" : "The Dragon is angry! You lose points!";
            document.getElementById('dragonAlert').setAttribute('value', dragonMessage);
            document.getElementById('dragonAlert').setAttribute('class', '');

            setTimeout(() => {
                document.getElementById('dragonAlert').setAttribute('class', 'hidden');
                if (dragonMessage.includes("bonus points")) {
                    const bonusPoints = Math.floor(Math.random() * 20) + 1; // Random bonus between 1 and 20
                    score += bonusPoints;
                    alert(`You gained ${bonusPoints} bonus points!`);
                } else {
                    const penaltyPoints = Math.floor(Math.random() * 20) + 1; // Random penalty between 1 and 20
                    score = Math.max(0, score - penaltyPoints); // Ensure score doesn't go below 0
                    alert(`You lost ${penaltyPoints} points due to the Dragon's anger!`);
                }
                updateScoreDisplay();
            }, 3000); // Show dragon alert for 3 seconds
        }

        function showLanguageOptions() {
            // Show language selection (this can be modified to implement actual selection logic)
            const selectedLanguage = prompt("Enter Language (Pali or Sanskrit):");
            if (selectedLanguage in words) {
                checkAnswer(selectedLanguage);
            } else {
                alert("Invalid Language Selected!");
            }
        }

        function checkAnswer(selectedLanguage) {
            if (selectedLanguage === currentLanguage) {
                score++;
                alert("Correct! You've gained a point.");
            } else {
                alert("Wrong! The correct language was " + currentLanguage + ".");
            }
            updateScoreDisplay();

            if (score >= 1000) {
                alert("Congratulations! You've reached 1000 points! Grant proposal: Funding Required: $10,000");
                score = 0;
                updateScoreDisplay();
            } else {
                getRandomWord();
            }

            // Check if the dean pops in
            if (Math.random() < 0.2) { // 20% chance of the dean appearing
                deanAlert();
            }

            // Check if the dragon appears
            if (Math.random() < 0.25) { // 25% chance of the dragon appearing
                dragonAlert();
            }
        }

        function wagerPoints() {
            if (score <= 0) {
                alert("You have no points to wager!");
                return;
            }
            const wager = Math.floor(score / 2); // Maximum wager is half of the score
            if (confirm(`You have ${score} points. Do you want to wager ${wager} points?\n\nYou will double your points if you win or lose them all if you fail.`)) {
                const correct = Math.random() < 0.5; // Simulating a 50% chance of winning
                if (correct) {
                    score += wager; // Double the wager
                    alert("You won the wager! Your score is now: " + score);
                } else {
                    alert("Mass layoffs! You lost the wager.");
                    score = 0; // Lose the wager
                }
                updateScoreDisplay();

                if (score >= 1000) {
                    alert("Congratulations! You've reached 1000 points! Grant proposal: Funding Required: $10,000");
                    score = 0;
                    updateScoreDisplay();
                }
            }
        }

        function savePoints() {
            if (score >= 250) {
                const saveablePoints = Math.floor(score / 250) * 250;
                tenure += saveablePoints;
                score -= saveablePoints;
                alert(`You have saved ${saveablePoints} points with tenure!`);
                updateScoreDisplay();
            } else {
                alert("You need at least 250 points to save with tenure.");
            }
        }

        // Start the game
        getRandomWord();
    </script>
</body>
</html>
