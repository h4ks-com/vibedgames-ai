<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Guessing Game with Dragon</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            padding: 50px;
            text-align: center;
        }
        .word {
            font-size: 2em;
            margin: 20px;
        }
        select {
            padding: 10px;
            font-size: 1em;
        }
        button {
            padding: 10px 20px;
            font-size: 1em;
            margin: 20px;
            cursor: pointer;
        }
        .score, .wager, .tenure {
            font-size: 1.5em;
            margin-top: 20px;
        }
        .progress-container {
            width: 100%;
            background: #ddd;
            border-radius: 5px;
            margin: 20px 0;
        }
        .progress-bar {
            width: 0;
            height: 30px;
            background: #76c7c0;
            border-radius: 5px;
            text-align: center;
            line-height: 30px;
            color: white;
        }
        .alert {
            color: red;
            font-weight: bold;
        }
        .dragon {
            font-size: 2em;
            color: green;
            margin: 20px;
        }
    </style>
</head>
<body>
    <h1>Guess the Language Game!</h1>
    <div class="word" id="word"></div>
    <select id="languageSelect">
        <option value="">Select Language</option>
        <option value="Pali">Pali</option>
        <option value="Sanskrit">Sanskrit</option>
        <!-- Add more languages here -->
    </select>
    <button onclick="checkAnswer()">Submit</button>
    <div class="score" id="scoreDisplay">Score: 0</div>
    <div class="tenure" id="tenureDisplay">Tenure: 0</div>
    <div id="deanAlert" class="alert" style="display: none;">Warning: The Dean is doing budget cuts!</div>
    <div id="dragonAlert" class="dragon" style="display: none;"></div>

    <div class="progress-container">
        <div class="progress-bar" id="progressBar">0%</div>
    </div>

    <div class="wager">
        <button onclick="wagerPoints()">Wager Points (Double or Nothing)</button>
        <button onclick="savePoints()">Save Points with Tenure</button>
    </div>

    <script>
        const words = {
            "Pali": ["Dhamma", "Sangha", "Buddha", "Nibbana", "Kamma"],
            "Sanskrit": ["Dharma", "Sangha", "Buddha", "Nirvana", "Karma"]
        };

        let currentWord = '';
        let currentLanguage = '';
        let score = 0;
        let tenure = 0;

        function getRandomWord() {
            const languages = Object.keys(words);
            currentLanguage = languages[Math.floor(Math.random() * languages.length)];
            const wordList = words[currentLanguage];
            currentWord = wordList[Math.floor(Math.random() * wordList.length)];
            document.getElementById('word').innerText = currentWord;
        }

        function updateProgressBar() {
            const progressBar = document.getElementById('progressBar');
            const percentage = Math.min((score / 1000) * 100, 100); // Cap at 100%
            progressBar.style.width = percentage + '%';
            progressBar.innerText = Math.round(percentage) + '%';
        }

        function checkAnswer() {
            const selectedLanguage = document.getElementById('languageSelect').value;
            if (selectedLanguage === currentLanguage) {
                score++;
                alert("Correct! You've gained a point.");
            } else {
                alert("Wrong! The correct language was " + currentLanguage + ".");
            }
            document.getElementById('scoreDisplay').innerText = "Score: " + score;
            updateProgressBar();

            if (score >= 1000) {
                writeGrant();
            } else {
                getRandomWord();
                document.getElementById('languageSelect').selectedIndex = 0;
            }

            // Check if the dean pops in
            if (Math.random() < 0.2) { // 20% chance of the dean appearing after each guess
                deanAlert();
            }

            // Check if the dragon appears
            if (Math.random() < 0.25) { // 25% chance of the dragon appearing
                dragonAlert();
            }
        }

        function deanAlert() {
            document.getElementById('deanAlert').style.display = 'block';
            setTimeout(() => {
                document.getElementById('deanAlert').style.display = 'none';
                const budgetCuts = Math.floor(Math.random() * 50) + 1; // Random cuts between 1 and 50
                score = Math.max(0, score - budgetCuts); // Ensure score doesn't go below 0
                alert(`The Dean made budget cuts! You lost ${budgetCuts} points.`);
                updateScoreDisplay();
            }, 3000); // Show alert for 3 seconds
        }

        function dragonAlert() {
            const dragonMessage = Math.random() < 0.5 
                ? "The Dragon offers you bonus points!" 
                : "The Dragon is angry! You lose points!";
            document.getElementById('dragonAlert').innerText = dragonMessage;
            document.getElementById('dragonAlert').style.display = 'block';

            setTimeout(() => {
                document.getElementById('dragonAlert').style.display = 'none';
                if (dragonMessage.includes("bonus points")) {
                    const bonusPoints = Math.floor(Math.random() * 20) + 1; // Random bonus between 1 and 20
                    score += bonusPoints;
                    alert(`You gained ${bonusPoints} bonus points!`);
                } else {
                    const penaltyPoints = Math.floor(Math.random() * 20) + 1; // Random penalty between 1 and 20
                    score = Math.max(0, score - penaltyPoints); // Ensure score doesn't go below 0
                    alert(`You lost ${penaltyPoints} points due to the Dragon's anger!`);
                }
                updateScoreDisplay();
            }, 3000); // Show dragon alert for 3 seconds
        }

        function updateScoreDisplay() {
            document.getElementById('scoreDisplay').innerText = "Score: " + score;
            updateProgressBar();
        }

        function wagerPoints() {
            if (score <= 0) {
                alert("You have no points to wager!");
                return;
            }
            const wager = Math.floor(score / 2); // Maximum wager is half of the score
            if (confirm(`You have ${score} points. Do you want to wager ${wager} points?\n\nYou will double your points if you win or lose them all if you fail.`)) {
                const correct = Math.random() < 0.5; // Simulating a 50% chance of winning
                if (correct) {
                    score += wager; // Double the wager
                    alert("You won the wager! Your score is now: " + score);
                } else {
                    alert("Mass layoffs! You lost the wager.");
                    score = 0; // Lose the wager
                }
                updateScoreDisplay();

                if (score >= 1000) {
                    writeGrant();
                }
            }
        }

        function savePoints() {
            if (score >= 250) {
                const saveablePoints = Math.floor(score / 250) * 250;
                tenure += saveablePoints;
                score -= saveablePoints;
                alert(`You have saved ${saveablePoints} points with tenure!`);
                updateScoreDisplay();
                document.getElementById('tenureDisplay').innerText = "Tenure: " + tenure;
            } else {
                alert("You need at least 250 points to save with tenure.");
            }
        }

        function writeGrant() {
            alert("Congratulations! You've reached 1000 points!\n\n" +
                  "Grant Proposal:\n" +
                  "Title: Expanding Language Knowledge through Interactive Games\n" +
                  "Objective: To utilize gaming as an engaging method for learning languages like Pali and Sanskrit.\n" +
                  "Funding Required: $10,000\n" +
                  "Project Duration: 12 months\n" +
                  "Expected Outcome: Increased interest and knowledge in ancient languages among participants.\n" +
                  "Thank you for your support!");
            score = 0; // Reset score after grant
            document.getElementById('scoreDisplay').innerText = "Score: " + score;
            updateProgressBar();
            getRandomWord();
            document.getElementById('languageSelect').selectedIndex = 0;
        }

        // Start the game
        getRandomWord();
    </script>
</body>
</html>
