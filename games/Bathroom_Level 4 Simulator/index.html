<!doctype html>
<html lang='en'>
<head>
  <meta charset='utf-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <title>Bathroom Level 4 Simulator</title>
  <meta name='description' content='A realism-focused bathroom simulator focused on Level 4 toilet mechanics, interactive bathroom, real-time feedback, and deep customization.' />
  <link rel='stylesheet' href='style.css' />
  <style>
    /* Lightweight, accessibility-minded styling. Avoids heavy JS requirements. */
    :root{
      --ui-scale: 1;
      --contrast: 1;
      --bg: #0b0d12;
      --panel: #141a20;
      --text: #e8f0f5;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient( circle at 20% -10%, rgba(100,180,255,.08), transparent 40%),
                  radial-gradient( circle at 100% 0%, rgba(255,240,200,.06), transparent 40%),
                  var(--bg);
      overflow: hidden;
    }
    /* Accessibility toggle controls via CSS only */
    #a11y-toggle:checked ~ #workspace {
      --ui-scale: 1.25;
      --contrast: 1.2;
    }
    #workspace {
      display: grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: 12px;
      padding: 12px;
      height: 100%;
      font-size: calc(14px * var(--ui-scale));
      filter: saturate(var(--contrast));
    }
    /* Responsive for smaller screens */
    @media (max-width: 1100px) {
      #workspace { grid-template-columns: 1fr; height: auto; grid-auto-rows: min-content; }
    }
    .panel { background: rgba(20,26,32,.75); border: 1px solid rgba(255,255,255,.08); border-radius: 6px; padding: 12px; }
    #scene { width: 100%; height: auto; display: block; border-radius: 6px; background: #000; }
    header { padding: 8px 12px; }
    header h1 { margin: 0; font-size: 1.1rem; }
    .row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; margin: 6px 0; }
    label { user-select: none; }
    button { padding: 8px 12px; border-radius: 6px; border: 1px solid #6a8aaf; background: #2b3a60; color: #eaf4ff; cursor: pointer; }
    button:hover { background: #3b4f82; }
    fieldset { border: 1px solid rgba(255,255,255,.15); border-radius: 6px; padding: 8px 10px; }
    legend { padding: 0 6px; font-weight: bold; }
    details[open] summary { cursor: default; list-style: none; }
    details > summary { list-style: none; }
    #documentation details { margin-bottom: 8px; }
    /* Color-contrast improvements for readability */
    .visually-hidden { position: absolute; left: -10000px; width: 1px; height: 1px; overflow: hidden; }
    /* Simple visually-pleasant scrollbar fix in some environments */
    ::-webkit-scrollbar { width: 10px; height: 10px; }
    ::-webkit-scrollbar-thumb { background: rgba(255,255,255,.25); border-radius: 6px; }
  </style>
</head>
<body>
  <!-- Accessibility quick toggle (CSS-driven, JS-free) -->
  <div id='a11y-controls' class='panel' aria-label='Accessibility and UI scale'>
    <input type='checkbox' id='a11y-toggle' aria-label='Enable accessibility mode'>
    <label for='a11y-toggle'>Enable accessibility mode</label>
  </div>
  <main id='workspace' aria-label='Bathroom Level 4 Simulator Workspace'>
    <section class='panel' aria-labelledby='scene-title'>
      <h2 id='scene-title' style='margin:0 0 6px 0;'>Simulation Viewport</h2>
      <canvas id='scene' width='800' height='450' aria-label='Simulation Canvas' role='img'></canvas>
      <p class='visually-hidden' id='desc'>Real-time toilet mechanics simulator with interactive bathroom environment and customizable settings.</p>
    </section>
    <section class='panel' aria-labelledby='controls-title'>
      <h2 id='controls-title' style='margin:0 0 6px 0;'>Controls & Options</h2>
      <div class='row' aria-label='Core visual toggles'>
        <label><input type='checkbox' id='opt-ripple' checked> Water Ripple</label>
        <label><input type='checkbox' id='opt-glow' checked> Glow Lighting</label>
      </div>
      <div class='row' aria-label='Enhancement toggles'>
        <label><input type='checkbox' id='opt-bubbles' checked> Bubble Shower</label>
        <label><input type='checkbox' id='opt-parallax' checked> Parallax Tiles</label>
      </div>
      <div class='row' aria-label='Scene controls'>
        <button id='btn-pause'>Pause</button>
        <button id='btn-reset'>Reset Scene</button>
      </div>
      <hr />
      <fieldset aria-label='Difficulty and accessibility settings'>
        <legend>Difficulty & Accessibility</legend>
        <label for='slider-difficulty'>Difficulty level: <span id='diff-val'>4</span></label>
        <input type='range' min='1' max='5' value='4' step='1' id='slider-difficulty' aria-valuemin='1' aria-valuemax='5' aria-valuenow='4' />
        <div class='row' style='margin-top:6px;'>
          <label><input type='checkbox' id='opt-colorblind'> Colorblind mode</label>
          <label><input type='checkbox' id='opt-ui-scale' checked> Large UI</label>
        </div>
      </fieldset>
    </section>
  </main>
  <!-- Documentation and GDD overview (embedded in page for easy navigation) -->
  <section id='documentation' class='panel' aria-label='Documentation and overview'>
    <h2 style='margin:6px 0 6px 0;'>Documentation & Project Overview</h2>
    <details open>
      <summary>1) Project Vision, Scope, and Quality Targets</summary>
      <ul>
        <li>Core Experience: realistic toilet mechanics, interactive bathroom, real-time feedback, and rich customization at a Level-4 difficulty curve.</li>
        <li>Target platforms: PC, consoles, mobile; target 60 FPS on PC/console, scalable on mobile.</li>
        <li>Visual Tone: photorealistic with hybrid realism; align with asset budget and performance budgets.</li>
        <li>Accessibility: colorblind modes, adjustable UI, subtitles, and control remapping.</li>
      </ul>
    </details>
    <details open>
      <summary>2) Game Design Document (GDD) Snapshot</summary>
      <p>Core gameplay loop: exploration, interaction, system management, feedback, progression. Level-4 goals: advanced tasks, multiple failure states, high-detail feedback, and customization payoff.</p>
      <p>Level-4 objectives include tighter tolerances, faster cycles, advanced clog scenarios, and rich customization payoff.</p>
    </details>
    <details>
      <summary>3) System Architecture & Tech Choices</summary>
      <p>Engine: Unity recommended for realism and input fidelity, data-driven architecture with components, and scriptable objects. Subsystems: Interaction, Physics/Fluid, Feedback, Customization, Save/Load. Modular plugin plan for future DLCs and additional bathroom environments.</p>
    </details>
    <details>
      <summary>4) Realistic Toilet Mechanics Subsystem</summary>
      <ul>
        <li>Flush cycle modeling: intake valve, fill valve, siphon action, drain timing.</li>
        <li>Water level and volume physics: tank, bowl, overflow thresholds; realistic fill/empty rates.</li>
        <li>Sensor models: float, pressure, leak, overfill; audible/visual cues.</li>
        <li>Clog dynamics: progressive resistance, partial/full blockage, user unclog attempts, random events.</li>
        <li> Sound design tied to states; visual effects: ripples, bubbles, spray boundaries.</li>
        <li>Failure modes and penalties: overflow damage, temporary disablement, repair tasks.</li>
      </ul>
    </details>
    <details>
      <summary>5) Interactive Bathroom Object Catalog</summary>
      <ul>
        <li>Toilet unit: flush, seat up/down, lid noise, bidet, adjustable flush type.</li>
        <li>Sink/faucets: hot/cold, temperature control, soap dispenser, drain plug.</li>
        <li>Mirror: reflective UI overlays, lighting concepts, status reflections.</li>
        <li>Toilet paper: tearing, length, refill prompts.</li>
        <li>Shower/tub, cabinet, tools, trash, towels, vent, light switch, heater, floor mats, window treatments.</li>
      </ul>
    </details>
    <details>
      <summary>6) Accessibility, Localization, and Inclusivity</summary>
      <ul>
        <li>Colorblind-safe palettes, high-contrast modes, scalable UI, screen reader support, localization pipeline.</li>
      </ul>
    </details>
    <details>
      <summary>7) Level Design & Progression</summary>
      <ul>
        <li>Scene variety, dynamic events, randomized task distribution, and level-4 tailored difficulty ramp.</li>
      </ul>
    </details>
    <details>
      <summary>8) Art, Audio, and Performance</summary>
      <ul>
        <li>Visuals: realistic bathroom materials, modular assets, PBR, LODs, shaders for water/wet surfaces.</li>
        <li>Audio: Foley, spatial audio, UI cues, accessibility audio options.</li>
        <li>Performance: target frame-rate budgets, profiling, LODs, occlusion culling, and GC minimization.</li>
      </ul>
    </details>
  </section>
  <script src='main.js'></script>
</body>
</html>