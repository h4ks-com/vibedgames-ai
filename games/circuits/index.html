<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Circuit Designer - 192 Unique Circuits</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1a1a2e;
            overflow: hidden;
            height: 100vh;
            color: #eee;
        }

        .app-container {
            display: grid;
            grid-template-columns: 320px 1fr 280px;
            grid-template-rows: 70px 1fr;
            height: 100vh;
        }

        .header {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 0 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .logo {
            font-size: 26px;
            font-weight: bold;
            color: white;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-controls {
            display: flex;
            gap: 10px;
        }

        .experiments-panel {
            background: #16213e;
            border-right: 1px solid #0f3460;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-header {
            padding: 20px;
            background: #0f3460;
            border-bottom: 2px solid #533483;
        }

        .panel-header h3 {
            color: #fff;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .course-tabs {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-bottom: 12px;
        }

        .course-tab {
            padding: 10px;
            background: #16213e;
            border: 2px solid #533483;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            font-size: 11px;
            font-weight: 600;
            transition: all 0.3s;
            color: #aaa;
        }

        .course-tab:hover {
            background: #533483;
            color: white;
        }

        .course-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #764ba2;
        }

        .search-box {
            width: 100%;
            padding: 10px 12px;
            background: #16213e;
            border: 2px solid #533483;
            border-radius: 6px;
            color: white;
            font-size: 13px;
        }

        .experiments-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .experiment-card {
            background: #0f3460;
            border: 2px solid #533483;
            border-radius: 8px;
            padding: 14px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .experiment-card:hover {
            background: #533483;
            transform: translateX(5px);
        }

        .experiment-card.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #764ba2;
        }

        .exp-number {
            font-size: 12px;
            color: #ffd700;
            font-weight: bold;
        }

        .exp-name {
            font-size: 14px;
            color: white;
            margin-top: 5px;
            font-weight: 600;
        }

        .canvas-container {
            background: #f5f5f5;
            position: relative;
            overflow: hidden;
        }

        .canvas-toolbar {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            background: rgba(255,255,255,0.98);
            backdrop-filter: blur(10px);
            padding: 20px 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 50;
        }

        .canvas-title {
            font-size: 20px;
            font-weight: bold;
            color: #2c3e50;
        }

        .canvas-subtitle {
            font-size: 13px;
            color: #7f8c8d;
            margin-top: 3px;
        }

        .toolbar-actions {
            display: flex;
            gap: 10px;
        }

        .canvas-view {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                linear-gradient(rgba(0,0,0,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,0,0,0.03) 1px, transparent 1px);
            background-size: 30px 30px;
            overflow: auto;
        }

        .circuit-canvas {
            position: relative;
            min-width: 100%;
            min-height: 100%;
            padding: 220px 40px 40px 40px;
        }

        .wire-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .wire {
            stroke-width: 4;
            fill: none;
            stroke-linecap: round;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.2));
        }

        .wire.power { stroke: #e74c3c; }
        .wire.ground { stroke: #2c3e50; }
        .wire.signal { stroke: #3498db; }

        .connection-point {
            fill: #e74c3c;
            stroke: #fff;
            stroke-width: 2;
        }

        .component {
            position: absolute;
            user-select: none;
            z-index: 10;
        }

        .component.selected {
            outline: 3px solid #3498db;
            outline-offset: 4px;
        }

        .component-palette {
            position: fixed;
            top: 90px;
            left: 340px;
            background: #16213e;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 15px;
            z-index: 1000;
            max-height: calc(100vh - 120px);
            overflow-y: auto;
            box-shadow: 0 8px 16px rgba(0,0,0,0.4);
            display: none;
        }

        .component-palette.active {
            display: block;
        }

        .palette-header {
            font-size: 14px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            border-bottom: 2px solid #533483;
            padding-bottom: 8px;
        }

        .palette-item {
            background: #0f3460;
            border: 2px solid #533483;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
            color: #ddd;
        }

        .palette-item:hover {
            background: #533483;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .wire.selectable {
            cursor: pointer;
            stroke-width: 6;
            pointer-events: all;
        }

        .wire.selected {
            stroke-width: 8;
            filter: drop-shadow(0 0 8px rgba(52, 152, 219, 0.8));
        }

        .pin-dot {
            cursor: pointer;
        }

        .pin-dot.clickable:hover {
            transform: scale(1.5);
            transition: transform 0.2s;
        }

        .pin-dot.selected-pin {
            background: #3498db !important;
            box-shadow: 0 0 10px #3498db;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        /* Component styles - compact for better layout */
        .resistor-body {
            width: 70px;
            height: 25px;
            background: linear-gradient(to right, #D2691E 0%, #8B4513 50%, #D2691E 100%);
            border: 2px solid #654321;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
            font-weight: bold;
        }

        .led-body {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: radial-gradient(circle at 35% 35%, #ff6b6b, #c92a2a);
            border: 3px solid #8b0000;
        }

        .led-body.on {
            background: radial-gradient(circle at 35% 35%, #ffeb3b, #ffc107);
            box-shadow: 0 0 30px rgba(255, 235, 59, 0.9);
            animation: glow 1.5s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 30px rgba(255, 235, 59, 0.9); }
            50% { box-shadow: 0 0 45px rgba(255, 235, 59, 1); }
        }

        .ic-body {
            min-width: 100px;
            background: #2c3e50;
            border: 3px solid #34495e;
            border-radius: 8px;
            padding: 15px 20px;
            text-align: center;
            color: white;
            font-weight: bold;
        }

        .battery-body {
            width: 60px;
            height: 80px;
            background: linear-gradient(to bottom, #2ecc71, #27ae60);
            border: 3px solid #229954;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            font-weight: bold;
            position: relative;
        }

        .battery-body::before {
            content: '';
            position: absolute;
            top: -10px;
            width: 25px;
            height: 10px;
            background: #27ae60;
            border-radius: 3px 3px 0 0;
        }

        .cap-body {
            width: 50px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .cap-plate {
            width: 4px;
            height: 35px;
            background: #2c3e50;
        }

        .ground-body {
            width: 60px;
            height: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            gap: 3px;
        }

        .ground-line {
            background: #2c3e50;
            height: 3px;
        }

        .comp-label {
            position: absolute;
            bottom: -22px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            color: #2c3e50;
            font-weight: bold;
            background: rgba(255,255,255,0.95);
            padding: 2px 8px;
            border-radius: 3px;
            white-space: nowrap;
        }

        .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-success {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(46, 204, 113, 0.5);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.5);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .components-panel {
            background: #16213e;
            border-left: 1px solid #0f3460;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .component-category {
            background: #0f3460;
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #533483;
        }

        .category-title {
            font-size: 13px;
            color: #ffd700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            margin-bottom: 12px;
            font-weight: bold;
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #0f3460;
        }

        ::-webkit-scrollbar-thumb {
            background: #533483;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <div class="logo">
                <span>‚ö°</span>
                <span>Circuit Designer - 192 Unique Circuits</span>
            </div>
            <div class="header-controls">
                <button id="editModeBtn" class="btn btn-primary" onclick="toggleEditMode()">
                    <span>‚úèÔ∏è</span>
                    <span id="editModeTxt">Edit Mode</span>
                </button>
                <button class="btn btn-success" onclick="simulateCircuit()">
                    <span>‚ñ∂Ô∏è</span>
                    <span>Simulate</span>
                </button>
                <button class="btn btn-primary" onclick="zoomIn()">üîç+</button>
                <button class="btn btn-primary" onclick="zoomOut()">üîç-</button>
                <button id="saveBtn" class="btn btn-warning" onclick="saveCircuit()" style="display:none">üíæ Save</button>
                <button class="btn btn-danger" onclick="clearCircuit()">üóëÔ∏è</button>
            </div>
        </div>

        <div class="experiments-panel">
            <div class="panel-header">
                <h3>üìö All 192 Experiments</h3>
                <div class="course-tabs">
                    <div class="course-tab active" data-course="0">555 Timer</div>
                    <div class="course-tab" data-course="1">ATtiny13</div>
                    <div class="course-tab" data-course="2">ESP8266</div>
                    <div class="course-tab" data-course="3">Raspberry Pi</div>
                    <div class="course-tab" data-course="4" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">üîä Audio</div>
                    <div class="course-tab" data-course="5" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">üé® Creative</div>
                </div>
                <input type="text" class="search-box" placeholder="Search..." id="searchBox">
            </div>
            <div class="experiments-list" id="experimentsList"></div>
        </div>

        <div class="canvas-container">
            <div class="canvas-toolbar">
                <div>
                    <div class="canvas-title" id="circuitTitle">Select an Experiment</div>
                    <div class="canvas-subtitle" id="circuitSubtitle">Each circuit is unique!</div>
                </div>
                <div class="toolbar-actions">
                    <span style="color: #7f8c8d; font-size: 12px;">üî¥ Power  ‚ö´ Ground  üîµ Signal</span>
                </div>
            </div>

            <div class="canvas-view">
                <div class="circuit-canvas" id="circuitCanvas">
                    <svg class="wire-layer" id="wireLayer"></svg>
                </div>
            </div>
        </div>

        <!-- Component Palette (Edit Mode) -->
        <div id="componentPalette" class="component-palette">
            <div class="palette-header">‚ö° Quick Guide</div>
            <div style="padding: 10px; background: #0f3460; border-radius: 6px; margin-bottom: 12px; font-size: 11px; line-height: 1.6;">
                <strong style="color: #3498db;">Keyboard Shortcuts:</strong><br>
                ‚Ä¢ <strong>W</strong> - Wire Mode<br>
                ‚Ä¢ <strong>Delete</strong> - Delete selected<br>
                ‚Ä¢ <strong>Esc</strong> - Cancel/Deselect<br>
                <br>
                <strong style="color: #3498db;">Mouse Actions:</strong><br>
                ‚Ä¢ <strong>Drag</strong> - Move components<br>
                ‚Ä¢ <strong>Click</strong> - Select component<br>
                ‚Ä¢ <strong>Double-click</strong> - Edit value<br>
                ‚Ä¢ <strong>Right-click</strong> - Delete<br>
                ‚Ä¢ <strong>Click wire</strong> - Delete wire
            </div>
            <div class="palette-header">Edit Tools</div>
            <div class="palette-item" onclick="enableWireCreation()" style="background: #2c3e50; border-color: #3498db;">
                <strong>üîå Wire Mode (W key)</strong><br>
                <small>Click two pins to connect</small>
            </div>
            <div class="palette-header" style="margin-top: 15px;">Add Components</div>
            <div class="palette-item" onclick="addComponent('bat', '9V')">üîã Battery (9V)</div>
            <div class="palette-item" onclick="addComponent('bat', '5V')">üîã Battery (5V)</div>

            <div class="palette-header" style="margin-top: 10px; font-size: 12px; color: #9b59b6;">Resistors</div>
            <div class="palette-item" onclick="addComponent('r', '220Œ©')">üìè Resistor 220Œ©</div>
            <div class="palette-item" onclick="addComponent('r', '470Œ©')">üìè Resistor 470Œ©</div>
            <div class="palette-item" onclick="addComponent('r', '1kŒ©')">üìè Resistor 1kŒ©</div>
            <div class="palette-item" onclick="addComponent('r', '10kŒ©')">üìè Resistor 10kŒ©</div>
            <div class="palette-item" onclick="addComponent('r', '100kŒ©')">üìè Resistor 100kŒ©</div>
            <div class="palette-item" onclick="addComponent('r', '1MŒ©')">üìè Resistor 1MŒ©</div>

            <div class="palette-header" style="margin-top: 10px; font-size: 12px; color: #9b59b6;">Capacitors</div>
            <div class="palette-item" onclick="addComponent('c', '0.1¬µF')">‚ö° Capacitor 0.1¬µF</div>
            <div class="palette-item" onclick="addComponent('c', '1¬µF')">‚ö° Capacitor 1¬µF</div>
            <div class="palette-item" onclick="addComponent('c', '10¬µF')">‚ö° Capacitor 10¬µF</div>
            <div class="palette-item" onclick="addComponent('c', '100¬µF')">‚ö° Capacitor 100¬µF</div>
            <div class="palette-item" onclick="addComponent('c', '1000¬µF')">‚ö° Capacitor 1000¬µF</div>

            <div class="palette-header" style="margin-top: 10px; font-size: 12px; color: #9b59b6;">Other Components</div>
            <div class="palette-item" onclick="addComponent('led')">üí° LED</div>
            <div class="palette-item" onclick="addComponent('btn')">üîò Button</div>
            <div class="palette-item" onclick="addComponent('pot', '10k')">üéöÔ∏è Potentiometer</div>
            <div class="palette-item" onclick="addComponent('buzz')">üîä Buzzer</div>
            <div class="palette-item" onclick="addComponent('trans')">üîå Transistor</div>
            <div class="palette-item" onclick="addComponent('diode')">‚û°Ô∏è Diode</div>
            <div class="palette-item" onclick="addComponent('555')">üî≤ 555 Timer IC</div>
            <div class="palette-item" onclick="addComponent('attiny')">üî≤ ATtiny13</div>
            <div class="palette-item" onclick="addComponent('esp')">üì° ESP8266</div>
            <div class="palette-item" onclick="addComponent('pi')">üñ•Ô∏è Raspberry Pi</div>
            <div class="palette-item" onclick="addComponent('ldr')">‚òÄÔ∏è LDR Sensor</div>
            <div class="palette-item" onclick="addComponent('servo')">üîß Servo Motor</div>
            <div class="palette-item" onclick="addComponent('motor')">‚öôÔ∏è DC Motor</div>
            <div class="palette-item" onclick="addComponent('gnd')">‚èö Ground</div>
        </div>

        <div class="components-panel">
            <div class="component-category">
                <div class="category-title">üì¶ Required Components</div>
                <div id="componentsList" style="color: #aaa; font-size: 12px; line-height: 1.8; padding: 10px;">
                    Select an experiment to view required components.
                </div>
            </div>
            <div class="component-category" style="margin-top: 15px;">
                <div class="category-title">üîß Assembly Instructions</div>
                <div id="instructionsList" style="color: #aaa; font-size: 12px; line-height: 1.7; padding: 10px;">
                    Step-by-step instructions will appear here.
                </div>
            </div>
            <div class="component-category" style="margin-top: 15px;">
                <div class="category-title">üìñ Detailed Description</div>
                <div id="descriptionText" style="color: #aaa; font-size: 12px; line-height: 1.7; padding: 10px; max-height: 400px; overflow-y: auto;">
                    Detailed technical description will appear here.
                </div>
            </div>
        </div>
    </div>

    <script>
        // COMPLETE UNIQUE CIRCUIT DATABASE - All 128 experiments
        const circuits = {
            // Course 0: 555 Timer & Analog ICs (32 experiments) - VERIFIED WITH TEXT FILES
            0: [
                // Exp 1: Blinking LED (555 Astable)
                { name: "Blinking LED (555 Astable)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:280,y:180,id:'ic'},
                    {t:'r',x:200,y:100,v:'1k',id:'r1'}, {t:'r',x:380,y:100,v:'100k',id:'r2'},
                    {t:'r',x:450,y:180,v:'470',id:'r3'}, {t:'led',x:600,y:180,id:'l'},
                    {t:'c',x:280,y:320,v:'10¬µF',id:'c'}, {t:'gnd',x:300,y:420,id:'g'}
                ], wires:[
                    ['b','pos','ic','vcc','power'], ['b','pos','r1','in','power'],
                    ['r1','out','ic','out','signal'], ['b','pos','r2','in','power'],
                    ['r2','out','ic','trig','signal'], ['ic','out','r3','in','signal'],
                    ['r3','out','l','a','signal'], ['l','c','g','in','ground'],
                    ['ic','gnd','g','in','ground'], ['b','neg','g','in','ground']
                ]},

                // Exp 2: LED Brightness Control (PWM)
                { name: "LED Brightness Control (555 PWM)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:280,y:180,id:'ic'},
                    {t:'r',x:200,y:100,v:'1k',id:'r1'}, {t:'pot',x:380,y:100,v:'100k',id:'p'},
                    {t:'r',x:480,y:180,v:'470',id:'r2'}, {t:'led',x:630,y:180,id:'l'},
                    {t:'c',x:280,y:320,v:'10¬µF',id:'c'}, {t:'gnd',x:300,y:420,id:'g'}
                ], wires:[
                    ['b','pos','ic','vcc','power'], ['b','pos','p','in','power'],
                    ['p','out','ic','trig','signal'], ['ic','out','r2','in','signal'],
                    ['r2','out','l','a','signal'], ['l','c','g','in','ground']
                ]},

                // Exp 3: Electronic Siren
                { name: "Electronic Siren (555 Audio)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:280,y:180,id:'ic'},
                    {t:'r',x:200,y:100,v:'1k',id:'r1'}, {t:'pot',x:380,y:100,v:'10k',id:'p'},
                    {t:'c',x:280,y:320,v:'10¬µF',id:'c1'}, {t:'c',x:450,y:180,v:'100¬µF',id:'c2'},
                    {t:'spk',x:620,y:180,id:'sp'}, {t:'gnd',x:300,y:420,id:'g'}
                ], wires:[
                    ['b','pos','ic','vcc','power'], ['b','pos','r1','in','power'],
                    ['r1','out','ic','out','signal'], ['ic','out','c2','in','signal'],
                    ['c2','out','sp','in','signal'], ['sp','out','g','in','ground']
                ]},

                // Exp 4: Touch-Activated Switch
                { name: "Touch-Activated Switch (555 Monostable)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:280,y:180,id:'ic'},
                    {t:'r',x:180,y:100,v:'10k',id:'r1'}, {t:'r',x:220,y:280,v:'1M',id:'r2'},
                    {t:'touch',x:120,y:100,id:'tp'}, {t:'r',x:450,y:180,v:'470',id:'r3'},
                    {t:'led',x:600,y:180,id:'l'}, {t:'c',x:280,y:320,v:'100¬µF',id:'c'},
                    {t:'gnd',x:300,y:420,id:'g'}
                ], wires:[
                    ['b','pos','ic','vcc','power'], ['b','pos','r1','in','power'],
                    ['r1','out','ic','trig','signal'], ['tp','out','ic','trig','signal'],
                    ['ic','out','r3','in','signal'], ['r3','out','l','a','signal']
                ]},

                // Exp 5: Automatic Night Light
                { name: "Automatic Night Light (555 + LDR)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:280,y:180,id:'ic'},
                    {t:'ldr',x:180,y:100,id:'ldr'}, {t:'r',x:180,y:260,v:'100k',id:'r1'},
                    {t:'r',x:380,y:100,v:'1k',id:'r2'}, {t:'r',x:480,y:180,v:'470',id:'r3'},
                    {t:'led',x:630,y:180,id:'l'}, {t:'c',x:280,y:320,v:'10¬µF',id:'c'},
                    {t:'gnd',x:300,y:420,id:'g'}
                ], wires:[
                    ['b','pos','ldr','in','power'], ['ldr','out','ic','trig','signal'],
                    ['ldr','out','r1','in','signal'], ['r1','out','g','in','ground'],
                    ['ic','out','r3','in','signal'], ['r3','out','l','a','signal']
                ]},

                // Exp 6: Musical Metronome
                { name: "Musical Metronome (555 LED + Sound)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:280,y:180,id:'ic'},
                    {t:'r',x:200,y:100,v:'1k',id:'r1'}, {t:'pot',x:380,y:100,v:'500k',id:'p'},
                    {t:'r',x:420,y:200,v:'470',id:'r2'}, {t:'led',x:570,y:200,id:'l'},
                    {t:'c',x:280,y:340,v:'10¬µF',id:'c1'}, {t:'c',x:480,y:260,v:'100¬µF',id:'c2'},
                    {t:'spk',x:650,y:260,id:'sp'}, {t:'gnd',x:300,y:450,id:'g'}
                ], wires:[
                    ['b','pos','ic','vcc','power'], ['ic','out','r2','in','signal'],
                    ['r2','out','l','a','signal'], ['ic','out','c2','in','signal'],
                    ['c2','out','sp','in','signal'], ['sp','out','g','in','ground']
                ]},

                // Exp 7: Racing LED Lights (LED Chaser)
                { name: "Racing LED Lights (555 + 4017)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:220,y:180,id:'ic1'},
                    {t:'pot',x:180,y:100,v:'100k',id:'p'}, {t:'4017',x:400,y:160,id:'ic2'},
                    {t:'led',x:560,y:100,id:'l1'}, {t:'led',x:560,y:160,id:'l2'},
                    {t:'led',x:560,y:220,id:'l3'}, {t:'led',x:560,y:280,id:'l4'},
                    {t:'r',x:660,y:190,v:'470',id:'r'}, {t:'gnd',x:350,y:420,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['ic1','out','ic2','clk','signal'],
                    ['ic2','q0','l1','a','signal'], ['ic2','q1','l2','a','signal'],
                    ['ic2','q2','l3','a','signal'], ['ic2','q3','l4','a','signal']
                ]},

                // Exp 8: Servo Motor Controller
                { name: "Servo Motor Controller (555 PWM)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:280,y:180,id:'ic'},
                    {t:'r',x:200,y:100,v:'1k',id:'r1'}, {t:'pot',x:380,y:100,v:'10k',id:'p'},
                    {t:'c',x:280,y:320,v:'10¬µF',id:'c'}, {t:'servo',x:520,y:180,id:'s'},
                    {t:'gnd',x:350,y:400,id:'g'}
                ], wires:[
                    ['b','pos','ic','vcc','power'], ['b','pos','s','vcc','power'],
                    ['p','out','ic','trig','signal'], ['ic','out','s','sig','signal'],
                    ['s','gnd','g','in','ground'], ['ic','gnd','g','in','ground']
                ]},

                // Exp 9: Mini Audio Amplifier (LM386)
                { name: "Mini Audio Amplifier (LM386)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:300,y:180,id:'amp'},
                    {t:'pot',x:180,y:180,v:'10k',id:'p'}, {t:'c',x:450,y:180,v:'220¬µF',id:'c'},
                    {t:'spk',x:620,y:180,id:'sp'}, {t:'gnd',x:350,y:380,id:'g'}
                ], wires:[
                    ['b','pos','amp','vcc','power'], ['p','out','amp','in','signal'],
                    ['amp','out','c','in','signal'], ['c','out','sp','in','signal'],
                    ['sp','out','g','in','ground'], ['amp','gnd','g','in','ground']
                ]},

                // Exp 10: Adjustable Power Supply (LM317)
                { name: "Adjustable Power Supply (LM317)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm317',x:300,y:180,id:'reg'},
                    {t:'r',x:300,y:280,v:'240',id:'r1'}, {t:'pot',x:420,y:280,v:'5k',id:'p'},
                    {t:'c',x:200,y:280,v:'100¬µF',id:'c1'}, {t:'c',x:480,y:280,v:'10¬µF',id:'c2'},
                    {t:'r',x:580,y:180,v:'470',id:'r2'}, {t:'led',x:680,y:180,id:'l'},
                    {t:'gnd',x:350,y:420,id:'g'}
                ], wires:[
                    ['b','pos','reg','in','power'], ['reg','out','r2','in','signal'],
                    ['r2','out','l','a','signal'], ['l','c','g','in','ground'],
                    ['reg','adj','r1','in','signal'], ['r1','out','g','in','ground']
                ]},

                // Exp 11: Simple Alarm System (LM358 Op-Amp)
                { name: "Simple Alarm System (LM358 Comparator)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'ldr',x:180,y:120,id:'ldr'},
                    {t:'r',x:180,y:260,v:'10k',id:'r1'}, {t:'lm358',x:350,y:180,id:'op'},
                    {t:'pot',x:350,y:320,v:'10k',id:'p'}, {t:'r',x:520,y:180,v:'470',id:'r2'},
                    {t:'led',x:670,y:180,id:'l'}, {t:'gnd',x:350,y:440,id:'g'}
                ], wires:[
                    ['b','pos','ldr','in','power'], ['ldr','out','op','in+','signal'],
                    ['ldr','out','r1','in','signal'], ['r1','out','g','in','ground'],
                    ['p','out','op','in-','signal'], ['op','out','r2','in','signal'],
                    ['r2','out','l','a','signal'], ['l','c','g','in','ground']
                ]},

                // Exp 12: Logic Gates (CD4011 NAND)
                { name: "Logic Gates (CD4011 NAND)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'4017',x:300,y:180,id:'ic'},
                    {t:'btn',x:150,y:100,id:'btn1'}, {t:'btn',x:150,y:160,id:'btn2'},
                    {t:'r',x:220,y:100,v:'10k',id:'r1'}, {t:'r',x:220,y:160,v:'10k',id:'r2'},
                    {t:'r',x:480,y:180,v:'470',id:'r3'}, {t:'led',x:630,y:180,id:'l'},
                    {t:'gnd',x:300,y:400,id:'g'}
                ], wires:[
                    ['b','pos','ic','vcc','power'], ['btn1','out','ic','clk','signal'],
                    ['btn2','out','ic','data','signal'], ['ic','q0','r3','in','signal'],
                    ['r3','out','l','a','signal'], ['l','c','g','in','ground']
                ]},

                // Exp 13: Temperature Indicator (LM35)
                { name: "Temperature Indicator (LM35)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm35',x:180,y:180,id:'tmp'},
                    {t:'lm358',x:340,y:120,id:'op1'}, {t:'lm358',x:340,y:240,id:'op2'},
                    {t:'led',x:520,y:120,id:'l1'}, {t:'led',x:520,y:200,id:'l2'},
                    {t:'led',x:520,y:280,id:'l3'}, {t:'r',x:450,y:200,v:'470',id:'r'},
                    {t:'pot',x:260,y:320,v:'10k',id:'p'}, {t:'gnd',x:300,y:440,id:'g'}
                ], wires:[
                    ['b','pos','tmp','vcc','power'], ['tmp','out','op1','in+','signal'],
                    ['tmp','out','op2','in+','signal'], ['op1','out','l1','a','signal'],
                    ['op2','out','l2','a','signal'], ['l3','a','g','in','ground']
                ]},

                // Exp 14: Morse Code Trainer (CD4049)
                { name: "Morse Code Trainer (CD4049 Oscillator)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'4017',x:300,y:180,id:'ic'},
                    {t:'btn',x:150,y:120,id:'btn'}, {t:'r',x:220,y:120,v:'10k',id:'r1'},
                    {t:'r',x:420,y:180,v:'100k',id:'r2'}, {t:'c',x:300,y:320,v:'1nF',id:'c'},
                    {t:'spk',x:550,y:180,id:'sp'}, {t:'gnd',x:300,y:420,id:'g'}
                ], wires:[
                    ['b','pos','ic','vcc','power'], ['btn','out','ic','clk','signal'],
                    ['ic','q0','sp','in','signal'], ['sp','out','g','in','ground'],
                    ['ic','gnd','g','in','ground']
                ]},

                // Exp 15: Battery Voltage Monitor (TL431)
                { name: "Battery Monitor (TL431 Reference)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm358',x:280,y:120,id:'tl1'},
                    {t:'lm358',x:280,y:220,id:'tl2'}, {t:'lm358',x:280,y:320,id:'tl3'},
                    {t:'r',x:180,y:220,v:'10k',id:'r1'}, {t:'r',x:180,y:320,v:'10k',id:'r2'},
                    {t:'led',x:450,y:120,id:'l1'}, {t:'led',x:450,y:220,id:'l2'},
                    {t:'led',x:450,y:320,id:'l3'}, {t:'r',x:380,y:220,v:'470',id:'r3'},
                    {t:'gnd',x:300,y:440,id:'g'}
                ], wires:[
                    ['b','pos','r1','in','power'], ['r1','out','r2','in','signal'],
                    ['r2','out','g','in','ground'], ['tl1','out','l1','a','signal'],
                    ['tl2','out','l2','a','signal'], ['tl3','out','l3','a','signal']
                ]},

                // Exp 16: 8-LED Controller (74HC595 Shift Register)
                { name: "8-LED Controller (74HC595)", comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'74595',x:300,y:160,id:'sr'},
                    {t:'btn',x:150,y:100,id:'btn1'}, {t:'btn',x:150,y:160,id:'btn2'},
                    {t:'btn',x:150,y:220,id:'btn3'}, {t:'r',x:220,y:140,v:'10k',id:'r1'},
                    {t:'led',x:480,y:100,id:'l1'}, {t:'led',x:480,y:140,id:'l2'},
                    {t:'led',x:480,y:180,id:'l3'}, {t:'led',x:480,y:220,id:'l4'},
                    {t:'led',x:480,y:260,id:'l5'}, {t:'led',x:480,y:300,id:'l6'},
                    {t:'r',x:580,y:200,v:'470',id:'r2'}, {t:'gnd',x:320,y:440,id:'g'}
                ], wires:[
                    ['b','pos','sr','data','power'], ['btn1','out','sr','data','signal'],
                    ['btn2','out','sr','clk','signal'], ['btn3','out','sr','data','signal'],
                    ['sr','q0','l1','a','signal'], ['sr','q1','l2','a','signal'],
                    ['sr','q2','l3','a','signal'], ['sr','q3','l4','a','signal']
                ]},

                // Exp 17-32: Advanced Two-IC and Multi-IC Projects
                { name: "Simple Intercom (555 + LM386)", desc: `This advanced doorbell generates a three-note sequence (like Westminster chimes) using multiple 555 timers and sequencing logic. The circuit plays a recognizable melody when triggered, providing pleasant door notification. This demonstrates sequential tone generation and creating musical patterns.

You'll learn about implementing note sequences, creating pleasing melodies, controlling note durations, and designing memorable notification sounds. The circuit can be reprogrammed for different melodies, teaching musical pattern generation.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:240,y:140,id:'ic1'},
                    {t:'lm386',x:400,y:200,id:'ic2'}, {t:'pot',x:300,y:280,v:'10k',id:'p'},
                    {t:'c',x:520,y:200,v:'220¬µF',id:'c'}, {t:'spk',x:650,y:200,id:'sp'},
                    {t:'gnd',x:350,y:400,id:'g'}
                ], wires:[['ic1','out','ic2','in','signal'], ['ic2','out','c','in','signal']]},

                { name: "Music Synthesizer (Dual 555 + LM386)", desc: `This percussion synthesizer uses 555 circuits to create drum-like sounds - brief bursts of filtered noise or rapidly decaying tones. Triggering circuits create kick, snare, and hi-hat sounds. This demonstrates percussion synthesis and percussive envelope shaping.

You'll learn about creating percussive envelopes (fast attack, fast decay), noise generation for snare sounds, filtering for tone shaping, and synthesizing realistic drum sounds. The circuit teaches principles used in classic drum machines.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:220,y:140,id:'ic1'},
                    {t:'555',x:220,y:260,id:'ic2'}, {t:'lm386',x:420,y:200,id:'amp'},
                    {t:'pot',x:160,y:200,v:'100k',id:'p'}, {t:'spk',x:620,y:200,id:'sp'},
                    {t:'gnd',x:320,y:420,id:'g'}
                ], wires:[['ic1','out','ic2','cv','signal'], ['ic2','out','amp','in','signal']]},

                { name: "Stable Audio Amplifier (LM317 + LM386)", desc: `This practical amplifier circuit takes signals from an electret microphone and amplifies them for speaker output, creating a simple PA system or voice amplifier. Proper biasing of the microphone and multi-stage amplification provide clear voice reproduction. This demonstrates small-signal amplification and microphone interfacing.

You'll learn about microphone biasing, high-gain amplification without feedback oscillation, frequency response for voice clarity, and creating usable voice systems. The circuit is practical for assistive listening devices or simple intercoms.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm317',x:240,y:180,id:'reg'},
                    {t:'lm386',x:420,y:200,id:'amp'}, {t:'c',x:540,y:200,v:'220¬µF',id:'c'},
                    {t:'spk',x:670,y:200,id:'sp'}, {t:'gnd',x:350,y:400,id:'g'}
                ], wires:[['reg','out','amp','vcc','power'], ['amp','out','c','in','signal']]},

                { name: "Automatic Burglar Alarm (LM358 + 555)", desc: `This musical instrument amplifier includes tone controls (bass, treble) for shaping electric guitar sounds. Multiple LM386 stages provide sufficient gain, while RC filter networks implement equalization. This demonstrates audio EQ and designing for specific instruments.

You'll learn about tone control circuits, implementing bass/treble boost/cut, preventing feedback in high-gain systems, and achieving good audio quality for music. The circuit teaches active EQ design and musical tone shaping.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'ldr',x:180,y:120,id:'ldr'},
                    {t:'lm358',x:300,y:160,id:'op'}, {t:'555',x:440,y:180,id:'ic'},
                    {t:'buzz',x:700,y:180,id:'bz'}, {t:'pot',x:300,y:300,v:'10k',id:'p'},
                    {t:'gnd',x:350,y:420,id:'g'}
                ], wires:[['op','out','ic','trig','signal'], ['ic','out','bz','in','signal']]},

                { name: "LED Bar Graph Meter (LM3914 + LM358)", desc: `This communication system implements two-way audio using microphones and speakers at both ends. Push-to-talk switching or VOX (voice-operated switching) controls directionality. This demonstrates full-duplex audio systems and practical communication circuits.

You'll learn about implementing talk/listen modes, preventing feedback (howling), designing clear voice circuits, and creating practical communication systems. The circuit teaches principles applicable to intercoms, walkie-talkies, and communication devices.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm358',x:240,y:180,id:'op'},
                    {t:'pot',x:160,y:180,v:'10k',id:'p'},
                    {t:'led',x:420,y:100,id:'l1'}, {t:'led',x:420,y:140,id:'l2'},
                    {t:'led',x:420,y:180,id:'l3'}, {t:'led',x:420,y:220,id:'l4'},
                    {t:'led',x:420,y:260,id:'l5'}, {t:'gnd',x:300,y:420,id:'g'}
                ], wires:[['p','out','op','in+','signal']]},

                { name: "DC Motor Speed Controller (555 + TIP122)", desc: `This audio monitoring system includes a sensitive microphone amplifier that only transmits when sound exceeds a threshold, conserving power and reducing noise. LED indicators show activity. This demonstrates voice-activated switching and low-noise amplification.

You'll learn about implementing threshold detection, designing high-sensitivity amplifiers, reducing background noise, and creating practical monitoring devices. The circuit teaches audio level detection and designing baby-safe electronics.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:260,y:180,id:'ic'},
                    {t:'pot',x:180,y:100,v:'100k',id:'p'}, {t:'trans',x:420,y:180,id:'q'},
                    {t:'motor',x:580,y:180,id:'m'}, {t:'diode',x:530,y:280,id:'d'},
                    {t:'r',x:350,y:180,v:'1k',id:'r'}, {t:'gnd',x:350,y:420,id:'g'}
                ], wires:[['ic','out','r','in','signal'], ['r','out','q','b','signal'], ['q','c','m','in','power']]},

                { name: "Electronic Dice (4017 + 555)", desc: `This audio trigger circuit uses a microphone and comparator to detect sounds and activate relays or other devices. Clapping or speaking triggers actions like lights or appliances. This demonstrates audio level detection and creating sound-reactive systems.

You'll learn about envelope detection, setting trigger thresholds, implementing timing circuits for sustained activation, and debouncing audio triggers. The circuit enables hands-free control and sound-reactive installations.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:220,y:180,id:'ic1'},
                    {t:'4017',x:380,y:160,id:'ic2'}, {t:'btn',x:140,y:100,id:'btn'},
                    {t:'led',x:540,y:100,id:'l1'}, {t:'led',x:540,y:160,id:'l2'},
                    {t:'led',x:540,y:220,id:'l3'}, {t:'led',x:540,y:280,id:'l4'},
                    {t:'gnd',x:350,y:440,id:'g'}
                ], wires:[['ic1','out','ic2','clk','signal'], ['ic2','q0','l1','a','signal']]},

                { name: "Simple Theremin (Dual 555 + LM386)", desc: `This synthesis circuit uses 555 timers or flip-flops to divide frequencies, creating subharmonics and octaves. An oscillator at 440Hz (A4) can be divided to 220Hz (A3), 110Hz (A2), creating rich harmonic content. This demonstrates frequency synthesis and creating organ-like sounds.

You'll learn about frequency division using digital counters, creating harmonic series, mixing divided outputs for complex timbres, and implementing subtractive synthesis building blocks. The circuit teaches fundamental synthesis techniques.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:220,y:140,id:'ic1'},
                    {t:'555',x:220,y:260,id:'ic2'}, {t:'lm386',x:420,y:200,id:'amp'},
                    {t:'touch',x:140,y:140,id:'tp'}, {t:'spk',x:680,y:200,id:'sp'},
                    {t:'gnd',x:320,y:420,id:'g'}
                ], wires:[['ic1','out','ic2','cv','signal'], ['ic2','out','amp','in','signal']]},

                { name: "AM Radio Transmitter", desc: `This electronic instrument uses eight 555 oscillators tuned to a complete musical octave (C, D, E, F, G, A, B, C). Push buttons select notes, and an LM386 provides amplification. This demonstrates building playable electronic instruments and musical tuning.

You'll learn about calculating frequencies for musical scales, implementing polyphonic capability (multiple notes simultaneously), creating reliable key switching, and designing ergonomic musical interfaces. The circuit can be expanded to multiple octaves or different scales.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:240,y:140,id:'ic1'},
                    {t:'lm386',x:380,y:200,id:'ic2'}, {t:'trans',x:540,y:180,id:'q'},
                    {t:'c',x:620,y:140,v:'100pF',id:'c'}, {t:'gnd',x:350,y:400,id:'g'}
                ], wires:[['ic1','out','ic2','in','signal'], ['ic2','out','q','b','signal']]},

                { name: "Light-Controlled Music Box", desc: `This modular synthesis building block combines a Voltage-Controlled Oscillator (using a 555 with voltage control) and Voltage-Controlled Amplifier (using LM13700 or similar). Control voltages vary pitch and loudness, creating the foundation of analog synthesizers. This demonstrates modular synthesis architecture.

You'll learn about VCO design, exponential pitch control for musical tuning, VCA implementation for dynamics, and creating patchable synthesis modules. The circuit introduces concepts from classic synthesizers like Moog and ARP systems.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:220,y:140,id:'ic1'},
                    {t:'lm358',x:220,y:260,id:'op'}, {t:'ldr',x:140,y:260,id:'ldr'},
                    {t:'lm386',x:400,y:200,id:'amp'}, {t:'4017',x:320,y:140,id:'cnt'},
                    {t:'spk',x:600,y:200,id:'sp'}, {t:'gnd',x:320,y:420,id:'g'}
                ], wires:[['ic1','out','cnt','clk','signal'], ['cnt','q0','amp','in','signal']]},

                { name: "Digital Thermometer Display", desc: `This audio effect multiplies two signals together, creating metallic, bell-like, or robotic sounds. A carrier oscillator combines with an input signal to generate sum and difference frequencies. This demonstrates amplitude modulation and creating special effects.

You'll learn about ring modulation theory, implementing four-quadrant multipliers, creating classic sci-fi sounds, and understanding frequency domain effects. The circuit produces sounds used in electronic music and sound effects.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm35',x:180,y:180,id:'tmp'},
                    {t:'lm358',x:300,y:160,id:'op'}, {t:'74595',x:450,y:140,id:'sr'},
                    {t:'oled',x:620,y:180,id:'disp'}, {t:'gnd',x:350,y:420,id:'g'}
                ], wires:[['tmp','out','op','in+','signal'], ['op','out','sr','data','signal']]},

                { name: "Clap-Activated Light Switch", desc: `This modulation effect uses a low-frequency oscillator (LFO) to vary the amplitude of an audio signal, creating rhythmic volume changes. The LFO modulates a VCA, creating the tremolo effect heard on classic guitar amps and organs. This demonstrates amplitude modulation for musical effects.

You'll learn about LFO design, implementing smooth amplitude modulation, controlling tremolo speed and depth, and creating vintage audio effects. The circuit teaches time-varying signal processing fundamental to effects design.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm358',x:240,y:160,id:'op'},
                    {t:'555',x:380,y:160,id:'ic'}, {t:'4017',x:520,y:160,id:'cnt'},
                    {t:'trans',x:660,y:200,id:'q'}, {t:'led',x:760,y:200,id:'l'},
                    {t:'r',x:710,y:200,v:'220',id:'r'}, {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[['op','out','ic','trig','signal'], ['ic','out','cnt','clk','signal']]},

                { name: "Automatic Plant Watering System", desc: `This guitar effect uses diode clipping or amplifier saturation to create overdrive/distortion sounds. The circuit intentionally distorts audio signals, adding harmonics and sustain popular in rock music. This demonstrates nonlinear signal processing and musical distortion.

You'll learn about soft vs hard clipping, asymmetric distortion for tube-like sounds, tone shaping in distortion circuits, and creating musical (vs harsh) distortion. The circuit teaches principles behind classic overdrive pedals.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm358',x:280,y:160,id:'op'},
                    {t:'555',x:420,y:160,id:'ic'}, {t:'lm317',x:280,y:280,id:'reg'},
                    {t:'trans',x:580,y:200,id:'q'}, {t:'motor',x:700,y:200,id:'m'},
                    {t:'gnd',x:350,y:440,id:'g'}
                ], wires:[['op','out','ic','trig','signal'], ['ic','out','q','b','signal']]},

                { name: "Electronic Combination Lock", desc: `This iconic guitar effect uses a voltage-controlled filter swept by an expression pedal or LFO. The moving resonant filter creates the characteristic "wah" sound. This demonstrates voltage-controlled filtering and creating expressive musical effects.

You'll learn about resonant filter design, implementing voltage control of filter frequency, creating the wah sweep characteristic, and designing musical filter circuits. The circuit teaches principles used in auto-wah and envelope filter effects.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'4017',x:280,y:140,id:'cnt1'},
                    {t:'4017',x:280,y:260,id:'cnt2'}, {t:'74595',x:460,y:200,id:'sr'},
                    {t:'btn',x:140,y:120,id:'btn1'}, {t:'btn',x:140,y:180,id:'btn2'},
                    {t:'led',x:620,y:200,id:'l'}, {t:'gnd',x:350,y:420,id:'g'}
                ], wires:[['btn1','out','cnt1','clk','signal'], ['cnt1','q0','sr','data','signal']]},

                { name: "LED Light Show Controller", desc: `This advanced synthesizer combines multiple oscillators (at least 4-8) for polyphonic operation - playing multiple notes simultaneously. Each voice has its own VCO and VCA, mixed to a common output. This demonstrates polyphonic synthesis architecture and creating playable instruments.

You'll learn about voice allocation, implementing polyphonic mixing, managing multiple oscillators, and creating full musical instruments. The circuit teaches principles from classic polysynths and demonstrates complex audio systems.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:200,y:140,id:'ic1'},
                    {t:'555',x:200,y:260,id:'ic2'}, {t:'4017',x:360,y:140,id:'cnt1'},
                    {t:'4017',x:360,y:260,id:'cnt2'}, {t:'74595',x:520,y:200,id:'sr'},
                    {t:'gnd',x:380,y:440,id:'g'}
                ], wires:[['ic1','out','cnt1','clk','signal'], ['ic2','out','cnt2','clk','signal']]},

                { name: "Voice-Activated Robot Controller", desc: `This professional-style mixer combines four audio inputs with independent level, pan, and tone controls. Multiple LM386 stages provide mixing, EQ, and distribution amplification. LED VU meters indicate levels. This demonstrates complete audio production tools.

You'll learn about professional mixer architecture, implementing EQ per channel, creating effective pan controls, managing gain staging, and designing usable audio interfaces. This project synthesizes concepts from throughout the course into a comprehensive audio production tool.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm358',x:240,y:160,id:'op'},
                    {t:'555',x:380,y:160,id:'ic'}, {t:'74595',x:540,y:160,id:'sr'},
                    {t:'motor',x:700,y:140,id:'m1'}, {t:'motor',x:700,y:240,id:'m2'},
                    {t:'trans',x:620,y:200,id:'q'}, {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[['op','out','ic','trig','signal'], ['ic','out','sr','data','signal']]}
            ],

            // Course 1: ATtiny13 (32 experiments)
            1: [
                { name: "Hello Blink", desc: `This classic introductory project teaches the fundamentals of microcontroller programming using the ATtiny13. The circuit connects an LED through a current-limiting resistor to one of the ATtiny's GPIO pins, demonstrating basic output control. This is the embedded systems equivalent of "Hello World" and introduces you to the toolchain, programming environment, and hardware interfacing.

The firmware uses simple GPIO manipulation to toggle the LED on and off at regular intervals, introducing concepts like pin configuration, delays, and the main program loop. You'll learn about current limiting resistors (why 220Œ© protects both the LED and the microcontroller), power consumption considerations, and the importance of proper ground connections. This foundational experiment sets the stage for all subsequent ATtiny13 projects.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:280,y:180,id:'mcu'},
                    {t:'r',x:450,y:200,v:'220',id:'r'}, {t:'led',x:600,y:200,id:'l'},
                    {t:'gnd',x:320,y:380,id:'g'}
                ], wires:[
                    ['b','pos','mcu','vcc','power'], ['mcu','pb0','r','in','signal'],
                    ['r','out','l','a','signal'], ['l','c','g','in','ground'],
                    ['mcu','gnd','g','in','ground'], ['b','neg','g','in','ground']
                ]},

                { name: "PWM LED Fading", desc: `Building on basic LED control, this experiment introduces Pulse Width Modulation (PWM) to create smooth fading effects. The ATtiny13 rapidly switches the LED on and off at high frequency, varying the duty cycle to control perceived brightness. A 100nF capacitor helps smooth the output and reduce flicker, demonstrating the relationship between analog effects and digital control.

You'll learn about the ATtiny13's timer/counter peripherals, PWM modes, and how to configure prescalers for optimal performance. The code gradually increases and decreases the duty cycle, creating a "breathing" effect. This introduces important concepts like hardware timers, interrupt-driven programming, and the trade-offs between PWM frequency, resolution, and perceived smoothness. The experiment demonstrates how microcontrollers can create seemingly analog behaviors using purely digital techniques.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:280,y:180,id:'mcu'},
                    {t:'r',x:450,y:200,v:'220',id:'r'}, {t:'led',x:600,y:200,id:'l'},
                    {t:'c',x:420,y:320,v:'100nF',id:'c'}, {t:'gnd',x:350,y:380,id:'g'}
                ], wires:[
                    ['b','pos','mcu','vcc','power'], ['mcu','pb0','r','in','signal'],
                    ['r','out','l','a','signal'], ['l','c','g','in','ground']
                ]},

                { name: "Software Siren", desc: `This audio project uses the ATtiny13 to drive a piezo buzzer, creating classic siren sound effects through software-generated waveforms. The microcontroller rapidly toggles a GPIO pin at varying frequencies, producing tones that sweep up and down to mimic emergency vehicle sirens. The 10¬µF capacitor filters the square wave output, creating smoother audio transitions.

The implementation teaches you about audio frequency generation, timing precision, and the relationship between toggling speed and perceived pitch. You'll experiment with different frequency sweep patterns, rates of change, and waveform shapes to create distinctive siren effects. This project introduces real-time audio synthesis concepts and demonstrates how even minimal hardware can produce complex sound patterns through clever programming.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:280,y:180,id:'mcu'},
                    {t:'r',x:450,y:200,v:'100',id:'r'}, {t:'buzz',x:600,y:200,id:'bz'},
                    {t:'c',x:420,y:320,v:'10¬µF',id:'c'}, {t:'gnd',x:350,y:380,id:'g'}
                ], wires:[
                    ['b','pos','mcu','vcc','power'], ['mcu','pb0','r','in','signal'],
                    ['r','out','bz','in','signal'], ['bz','out','g','in','ground']
                ]},

                { name: "Button Input & Debounce", desc: `This fundamental input experiment teaches proper button interfacing with mechanical switch debouncing. The button connects to a GPIO pin configured as input, with a 10kŒ© pull-up resistor ensuring a defined logic level when the button isn't pressed. The LED provides visual feedback, illuminating when the button is pressed. This introduces the critical concepts of input handling, pull-up/pull-down resistors, and dealing with mechanical contact bounce.

The firmware implements debouncing algorithms to filter out spurious transitions caused by mechanical vibrations when the button is pressed or released. You'll learn about different debouncing approaches (time-based delays, state machines, integration algorithms) and understand why raw button reads can produce multiple false triggers. This is essential knowledge for any project involving human interaction, as mechanical switches are never perfectly clean.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:280,y:180,id:'mcu'},
                    {t:'btn',x:150,y:100,id:'btn'}, {t:'r',x:220,y:100,v:'10k',id:'r1'},
                    {t:'r',x:450,y:200,v:'220',id:'r2'}, {t:'led',x:600,y:200,id:'l'},
                    {t:'gnd',x:320,y:380,id:'g'}
                ], wires:[
                    ['b','pos','mcu','vcc','power'], ['btn','out','mcu','pb2','signal'],
                    ['mcu','pb0','r2','in','signal'], ['r2','out','l','a','signal']
                ]},

                { name: "Smart Night Light (LDR)", desc: `This automatic lighting project uses a Light Dependent Resistor (LDR) to create an ambient light sensor. The LDR forms a voltage divider with a 10kŒ© resistor, creating an analog voltage that varies with ambient light levels. The ATtiny13 reads this voltage using its built-in ADC (Analog-to-Digital Converter), making decisions about when to illuminate the LED. This demonstrates the integration of analog sensors with digital processing.

The firmware implements threshold detection and hysteresis to prevent flickering when light levels hover near the trigger point. You'll learn about ADC operation, reference voltage selection, sampling rates, and the importance of filtering noisy sensor readings. The project can be enhanced with adjustable sensitivity, time delays before activation, and gradual LED fading. This is a practical introduction to sensor-based automation and decision-making algorithms.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:280,y:180,id:'mcu'},
                    {t:'ldr',x:180,y:100,id:'ldr'}, {t:'r',x:180,y:240,v:'10k',id:'r1'},
                    {t:'r',x:450,y:200,v:'220',id:'r2'}, {t:'led',x:600,y:200,id:'l'},
                    {t:'gnd',x:320,y:380,id:'g'}
                ], wires:[
                    ['b','pos','ldr','in','power'], ['ldr','out','mcu','adc2','signal'],
                    ['mcu','pb0','r2','in','signal'], ['r2','out','l','a','signal']
                ]},

                { name: "Digital Metronome", desc: `This musician's tool combines visual and audio feedback to create a precise timing reference. Two GPIO pins control an LED and a piezo buzzer simultaneously, generating synchronized clicks and flashes at adjustable tempos. The ATtiny13's timer generates accurate intervals, demonstrating the importance of precision timing in embedded applications.

You'll learn about tempo calculation (converting BPM to timer periods), maintaining long-term timing accuracy, and synchronizing multiple output modalities. The code must account for crystal oscillator tolerances and calibrate the internal RC oscillator if necessary. Optional enhancements include adjustable time signatures, accent patterns for different beats, and subdivision markers. This project teaches real-time scheduling, timing accuracy requirements, and the challenges of creating human-perceivable rhythmic precision.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:280,y:180,id:'mcu'},
                    {t:'r',x:450,y:140,v:'220',id:'r1'}, {t:'led',x:600,y:140,id:'l'},
                    {t:'r',x:450,y:240,v:'100',id:'r2'}, {t:'buzz',x:600,y:240,id:'bz'},
                    {t:'gnd',x:320,y:380,id:'g'}
                ], wires:[
                    ['b','pos','mcu','vcc','power'], ['mcu','pb0','r1','in','signal'],
                    ['mcu','pb1','r2','in','signal'], ['r1','out','l','a','signal']
                ]},

                { name: "LED Patterns (74HC595)", desc: `This experiment introduces serial-to-parallel conversion using the 74HC595 shift register IC, expanding the ATtiny13's limited GPIO pins to control multiple LEDs. The microcontroller sends data serially (one bit at a time) to the shift register, which latches and outputs 8 parallel bits to drive the LED array. This demonstrates efficient pin usage and introduces fundamental digital communication protocols.

You'll learn about shift register operation, serial data transmission, clock signals, and latching mechanisms. The firmware creates animated patterns by shifting data through the register - knight rider effects, binary counters, chase patterns, and random sequences. This is your introduction to cascadable output expansion, a technique used extensively in display driving and GPIO multiplication. The concept scales to controlling dozens of outputs with just three microcontroller pins.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:200,y:180,id:'mcu'},
                    {t:'74595',x:380,y:160,id:'sr'}, {t:'led',x:550,y:100,id:'l1'},
                    {t:'led',x:550,y:160,id:'l2'}, {t:'led',x:550,y:220,id:'l3'},
                    {t:'led',x:550,y:280,id:'l4'}, {t:'gnd',x:350,y:400,id:'g'}
                ], wires:[
                    ['b','pos','mcu','vcc','power'], ['mcu','pb0','sr','data','signal'],
                    ['sr','q0','l1','a','signal'], ['sr','q1','l2','a','signal']
                ]},

                { name: "Servo Sweep Control", desc: `This project controls a hobby servo motor using precise PWM timing signals. Servos require specific pulse widths (typically 1-2ms) within a 20ms period to position their shaft across a 180-degree range. The ATtiny13 generates these timing-critical pulses, while reading a potentiometer through the ADC to determine desired position. The 100¬µF capacitor provides power supply filtering to handle the servo's current demands.

You'll learn about servo operation principles, PWM timing requirements, and the relationship between pulse width and shaft position. The code maps ADC readings (0-1023) to valid servo pulse widths, implementing smooth transitions to prevent jerky movement. This introduces closed-loop control concepts (though the servo has internal feedback, your code performs position interpolation). The project is foundational for robotics, camera gimbals, and any application requiring precise mechanical positioning.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:280,y:180,id:'mcu'},
                    {t:'pot',x:180,y:280,v:'10k',id:'p'}, {t:'servo',x:500,y:180,id:'s'},
                    {t:'c',x:420,y:320,v:'100¬µF',id:'c'}, {t:'gnd',x:350,y:380,id:'g'}
                ], wires:[
                    ['b','pos','mcu','vcc','power'], ['p','out','mcu','adc2','signal'],
                    ['mcu','pb0','s','sig','signal'], ['s','gnd','g','in','ground']
                ]},

                // Exp 9-32: Advanced ATtiny13 Projects
                { name: "Audio Level Meter", desc: `This project creates a visual audio level display using multiple LEDs driven through a 74HC595 shift register. The ATtiny13 reads audio signals through its ADC, performs level detection, and displays the amplitude on a bar graph display. This introduces signal processing concepts and creates the classic VU meter effect seen on audio equipment.

The firmware implements peak detection, envelope following, and logarithmic scaling to create natural-looking level indication. You'll learn about audio signal conditioning, sampling rates, windowing functions, and LED bargraph driving techniques. The code must balance responsiveness (quick attack times) with stability (slower decay) to create visually pleasing indication that follows musical dynamics.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:220,y:180,id:'mcu'},
                    {t:'74595',x:400,y:160,id:'sr'},
                    {t:'led',x:560,y:100,id:'l1'}, {t:'led',x:560,y:140,id:'l2'},
                    {t:'led',x:560,y:180,id:'l3'}, {t:'led',x:560,y:220,id:'l4'},
                    {t:'led',x:560,y:260,id:'l5'}, {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['mcu','pb0','sr','data','signal'], ['sr','q0','l1','a','signal']]},

                { name: "Smart Battery Monitor", desc: `This power management project monitors battery voltage using a resistor divider network and displays status through multiple indicator LEDs. The voltage divider (20kŒ© and 10kŒ©) scales the battery voltage to a safe range for the ATtiny13's ADC input. Different colored LEDs indicate various charge states - green for full, yellow for medium, red for low.

You'll learn about voltage divider calculations, battery discharge curves, and implementing multi-threshold detection. The firmware includes hysteresis to prevent LED flickering as voltage levels cross thresholds, and can implement low-battery warnings through blinking patterns. This teaches essential power monitoring techniques applicable to portable electronics, solar systems, and any battery-operated device. Understanding battery characteristics and protection thresholds is critical for reliable embedded systems.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:280,y:180,id:'mcu'},
                    {t:'r',x:180,y:120,v:'20k',id:'r1'}, {t:'r',x:180,y:260,v:'10k',id:'r2'},
                    {t:'led',x:480,y:120,id:'l1'}, {t:'led',x:480,y:200,id:'l2'},
                    {t:'led',x:480,y:280,id:'l3'}, {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['mcu','pb0','l1','a','signal'], ['mcu','pb1','l2','a','signal']]},

                { name: "Multi-Threshold Alarm", desc: `This security system combines multiple sensors - an LDR (light) and PIR (motion) sensor - with intelligent logic to trigger alarms based on different conditions. The ATtiny13 continuously monitors both sensors, implementing AND/OR logic to determine when to activate the buzzer. This demonstrates multi-sensor fusion and decision-making algorithms in embedded systems.

The firmware implements configurable sensitivity thresholds, time delays to prevent false alarms, and different alert patterns for different trigger conditions. You'll learn about sensor integration, boolean logic implementation, state machines, and creating intelligent behavior from multiple inputs. The project can be enhanced with arming/disarming sequences, zone monitoring, and logging capabilities. This is fundamental to automation and security applications.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:260,y:180,id:'mcu'},
                    {t:'ldr',x:160,y:100,id:'ldr'}, {t:'pir',x:160,y:260,id:'pir'},
                    {t:'r',x:460,y:180,v:'100',id:'r'}, {t:'buzz',x:610,y:180,id:'bz'},
                    {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['ldr','out','mcu','adc2','signal'], ['pir','out','mcu','pb2','signal']]},

                { name: "Digital Logic Simulator", desc: `This educational tool implements basic digital logic gates (AND, OR, XOR, NAND, NOR) in software, using buttons as inputs and LEDs as outputs. The ATtiny13 reads two button states and displays the results of various logical operations simultaneously on four LEDs. This creates a hands-on logic truth table demonstrator.

You'll implement each logic function using bitwise operators and conditionals, understanding how software can emulate hardware logic. The code demonstrates input conditioning, debouncing, and combinatorial logic evaluation. This project is excellent for teaching digital electronics fundamentals, helping learners visualize boolean algebra, and understanding the software-hardware relationship. It demonstrates how microcontrollers are essentially programmable logic devices.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:240,y:180,id:'mcu'},
                    {t:'btn',x:140,y:100,id:'btn1'}, {t:'btn',x:140,y:160,id:'btn2'},
                    {t:'led',x:480,y:100,id:'l1'}, {t:'led',x:480,y:160,id:'l2'},
                    {t:'led',x:480,y:220,id:'l3'}, {t:'led',x:480,y:280,id:'l4'},
                    {t:'gnd',x:300,y:400,id:'g'}
                ], wires:[['btn1','out','mcu','pb2','signal'], ['mcu','pb0','l1','a','signal']]},

                { name: "Multi-Point Temperature Monitor", desc: `This monitoring system reads multiple LM35 temperature sensors simultaneously, displaying readings on an OLED display. The ATtiny13 multiplexes between ADC channels to sample different sensors, maintaining current readings for all measurement points. This introduces multi-channel data acquisition and display techniques.

The firmware implements temperature conversion (LM35 outputs 10mV per ¬∞C), averaging for noise reduction, and updates the display with formatted temperature values. You'll learn about ADC channel switching, measurement settling times, and creating user interfaces on small displays. The project can track temperature differentials, implement alarms for out-of-range conditions, and log data to EEPROM. This is applicable to HVAC monitoring, thermal management, and environmental sensing.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:240,y:180,id:'mcu'},
                    {t:'lm35',x:460,y:100,id:'tmp1'}, {t:'lm35',x:460,y:200,id:'tmp2'},
                    {t:'oled',x:600,y:150,id:'disp'}, {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['tmp1','out','mcu','adc2','signal'], ['tmp2','out','mcu','adc3','signal']]},

                { name: "Capacitive Touch Sensor", desc: `This modern input method uses capacitive sensing to detect finger proximity without mechanical switches. A touch pad connects through a small capacitor to a GPIO pin, which uses charge-time measurement to detect the capacitance change when a finger approaches. The ATtiny13 measures how long it takes to charge the touch electrode, with human touch significantly increasing charge time.

You'll learn about RC time constants, capacitance measurement techniques, and implementing touch detection algorithms with threshold and hysteresis. The firmware must filter environmental noise, compensate for baseline drift, and provide reliable detection despite varying conditions. This introduces the principles behind modern touch interfaces, from smartphones to appliance controls, all implemented without specialized ICs.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:280,y:180,id:'mcu'},
                    {t:'touch',x:160,y:100,id:'tp'}, {t:'r',x:480,y:180,v:'220',id:'r'},
                    {t:'led',x:630,y:180,id:'l'}, {t:'c',x:420,y:280,v:'100pF',id:'c'},
                    {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['tp','out','mcu','pb2','signal'], ['mcu','pb0','r','in','signal']]},

                { name: "Data Logger (EEPROM)", desc: `This project demonstrates non-volatile data storage using the ATtiny13's built-in EEPROM memory. The system logs sensor readings (from a DHT11 temperature/humidity sensor) to EEPROM at regular intervals, preserving data even when power is lost. A button allows retrieval and display of logged data, creating a simple but effective environmental recorder.

You'll learn about EEPROM operation, wear-leveling algorithms (EEPROM has limited write cycles), timestamp management, and circular buffer implementation. The firmware must balance logging frequency against memory capacity, implement data compression if needed, and provide mechanisms for data readout. This teaches fundamental principles of data persistence, applicable to everything from fitness trackers to industrial monitoring systems.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:260,y:180,id:'mcu'},
                    {t:'dht11',x:460,y:140,id:'dht'}, {t:'btn',x:140,y:100,id:'btn'},
                    {t:'led',x:500,y:260,id:'l'}, {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['dht','data','mcu','pb3','signal'], ['btn','out','mcu','pb2','signal']]},

                { name: "7-Segment Display Counter", desc: `This digital counter displays numbers on a 7-segment LED display, using a 74HC595 shift register to drive the segments. The ATtiny13 converts binary numbers to 7-segment encoding and shifts the data out serially. A button increments the counter, demonstrating number representation and display multiplexing.

You'll learn about 7-segment encoding tables, serial display driving, and implementing numeric displays efficiently. The code includes proper debouncing, rollover handling (99‚Üí00), and can be enhanced with multiple digits through time-multiplexing. This introduces display refresh concepts used in countless devices from alarm clocks to industrial controllers. Understanding segment driving prepares you for more complex matrix displays.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:220,y:180,id:'mcu'},
                    {t:'74595',x:400,y:160,id:'sr'}, {t:'oled',x:580,y:160,id:'seg'},
                    {t:'btn',x:140,y:100,id:'btn'}, {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['mcu','pb0','sr','data','signal'], ['sr','q0','seg','sda','signal']]},

                { name: "PWM Motor Speed Control", desc: `This motor control project uses PWM to vary DC motor speed, with a potentiometer providing user input. The ATtiny13 reads the pot position and generates proportional PWM output to a transistor driver stage. A flyback diode protects the transistor from inductive kickback when the motor switches off, demonstrating essential motor driver design principles.

You'll learn about motor control techniques, transistor switching, PWM frequency selection for minimal audible noise, and power transistor protection. The firmware implements acceleration/deceleration curves for smooth speed changes and can include current limiting. This project is fundamental to robotics, automated machines, and any application requiring variable-speed motor control. Understanding inductive load switching is critical for reliability.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:240,y:180,id:'mcu'},
                    {t:'pot',x:160,y:100,v:'10k',id:'p'}, {t:'trans',x:440,y:180,id:'q'},
                    {t:'motor',x:600,y:180,id:'m'}, {t:'diode',x:550,y:280,id:'d'},
                    {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['p','out','mcu','adc2','signal'], ['mcu','pb0','q','b','signal']]},

                { name: "Servo Robot Arm (2-axis)", desc: `This robotics project controls two servos simultaneously to create a simple robot arm with pan and tilt capability. Two potentiometers provide independent position control for each axis, while the ATtiny13 generates properly timed PWM signals for both servos. This demonstrates multi-channel servo coordination and introduces basic kinematics concepts.

The firmware implements synchronized servo updates, position interpolation for smooth motion, and can include speed control and position limits. You'll learn about coordinate systems, multi-joint movement, and creating coordinated motion from independent actuators. This is foundational for more complex robotic systems, camera gimbals, and any multi-axis positioning application. The project can be enhanced with inverse kinematics to move to specific X-Y coordinates.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:240,y:180,id:'mcu'},
                    {t:'servo',x:480,y:120,id:'s1'}, {t:'servo',x:480,y:240,id:'s2'},
                    {t:'pot',x:160,y:100,v:'10k',id:'p1'}, {t:'pot',x:160,y:180,v:'10k',id:'p2'},
                    {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['mcu','pb0','s1','sig','signal'], ['mcu','pb1','s2','sig','signal']]},

                { name: "Stepper Motor Controller", desc: `This project controls a stepper motor using precise step sequencing sent through a 74HC595 shift register. The ATtiny13 generates the proper coil energization patterns (full-step, half-step, or microstepping) and shifts them to the motor driver circuit. A button allows manual stepping, demonstrating precise position control without feedback sensors.

You'll learn about stepper motor operation principles, stepping sequences, direction control, and speed ramping algorithms. The firmware implements acceleration profiles to prevent step loss, direction changes with proper settling time, and position tracking. This introduces open-loop positioning systems used in 3D printers, CNC machines, and precision instruments. Understanding stepper control is essential for motion control applications.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:220,y:180,id:'mcu'},
                    {t:'74595',x:400,y:160,id:'sr'}, {t:'motor',x:600,y:160,id:'m'},
                    {t:'btn',x:140,y:100,id:'btn'}, {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['mcu','pb0','sr','data','signal'], ['sr','q0','m','in','signal']]},

                { name: "Smart Relay Controller", desc: `This automation project uses an LDR sensor to control a relay, creating an automatic lighting or load switching system. The ATtiny13 reads ambient light levels and switches a transistor that drives a relay coil, which in turn controls high-power circuits. This demonstrates sensor-based automation with safe isolation between low-voltage control and high-voltage loads.

You'll learn about relay operation, transistor driver design, flyback protection, and implementing hysteresis to prevent rapid switching. The firmware includes time delays, configurable thresholds, and can implement scheduling logic. This is fundamental to home automation, industrial control, and any application requiring sensor-based switching of significant loads. Understanding relay control and electrical isolation is critical for safe high-power interfacing.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:240,y:180,id:'mcu'},
                    {t:'ldr',x:160,y:100,id:'ldr'}, {t:'trans',x:460,y:180,id:'q'},
                    {t:'r',x:580,y:180,v:'220',id:'r'}, {t:'led',x:700,y:180,id:'l'},
                    {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['ldr','out','mcu','adc2','signal'], ['mcu','pb0','q','b','signal']]},

                { name: "RGB LED Color Mixer", desc: `This color-mixing project controls an RGB LED using three PWM channels, with three potentiometers allowing independent red, green, and blue intensity control. The ATtiny13 reads the three pot positions via ADC channel multiplexing and generates corresponding PWM outputs to create millions of possible colors through additive color mixing.

You'll learn about RGB color theory, PWM color generation, color space representation, and gamma correction for perceptually linear brightness. The firmware can implement color presets, color cycling animations, and white-balance calibration. This project is fundamental to LED lighting, display technology, and color-based user interfaces. Understanding color mixing and perceptual correction is essential for creating aesthetically pleasing lighting effects.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:200,y:180,id:'mcu'},
                    {t:'pot',x:120,y:100,v:'10k',id:'p1'}, {t:'pot',x:120,y:160,v:'10k',id:'p2'},
                    {t:'pot',x:120,y:220,v:'10k',id:'p3'},
                    {t:'led',x:480,y:120,id:'l1'}, {t:'led',x:480,y:180,id:'l2'},
                    {t:'led',x:480,y:240,id:'l3'}, {t:'gnd',x:300,y:400,id:'g'}
                ], wires:[['mcu','pb0','l1','a','signal'], ['mcu','pb1','l2','a','signal']]},

                { name: "IR Remote Control Decoder", desc: `This project decodes infrared remote control signals, learning common protocols like NEC, RC5, or Sony SIRC. The ATtiny13 monitors an IR receiver module, measuring pulse timings to decode button presses and trigger corresponding actions with LEDs. This demonstrates protocol decoding and timing-critical signal analysis.

You'll learn about IR communication protocols, pulse-width demodulation, start-bit detection, and data validation. The firmware implements state machines to track protocol sequences, checksum verification, and repeat-code handling. This is applicable to custom remote controls, IR-based automation, and understanding consumer electronics communication. The project can learn and reproduce IR codes, creating a universal remote capability.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:260,y:180,id:'mcu'},
                    {t:'r',x:480,y:120,v:'220',id:'r1'}, {t:'led',x:630,y:120,id:'l1'},
                    {t:'r',x:480,y:200,v:'220',id:'r2'}, {t:'led',x:630,y:200,id:'l2'},
                    {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['mcu','pb2','mcu','pb0','signal'], ['mcu','pb0','r1','in','signal']]},

                { name: "Ultrasonic Distance Sensor (HC-SR04)", desc: `This ranging project uses an ultrasonic sensor to measure distances up to several meters, displaying results on an OLED screen. The ATtiny13 sends a trigger pulse to the sensor, then measures the echo pulse width to calculate distance using the speed of sound. This demonstrates time-of-flight measurement principles used in robotics and automation.

The firmware implements precise timing measurement, temperature compensation for varying sound velocity, and averaging for noise reduction. You'll learn about ultrasonic propagation, pulse-echo ranging, and converting time measurements to distance. The project can implement proximity warnings, automatic object tracking, or obstacle avoidance for robots. This teaches the principles behind parking sensors, drones, and autonomous vehicles.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:240,y:180,id:'mcu'},
                    {t:'ultra',x:460,y:160,id:'us'}, {t:'oled',x:640,y:180,id:'disp'},
                    {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['mcu','pb0','us','trig','signal'], ['us','echo','mcu','pb1','signal']]},

                { name: "Smart Fan Controller (Temp-based)", desc: `This thermal management project implements automatic fan speed control based on temperature readings from an LM35 sensor. The ATtiny13 reads temperature continuously and adjusts PWM output to a fan motor transistor driver, creating closed-loop thermal control. This demonstrates feedback-based automation and proportional control algorithms.

You'll learn about PID control concepts, implementing control loops, hysteresis to prevent oscillation, and fan curve mapping (relating temperature to desired fan speed). The firmware can implement multiple temperature zones with different responses, startup delays, and manual override. This is essential to computer cooling, environmental control, and thermal management in any electronic system.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:240,y:180,id:'mcu'},
                    {t:'lm35',x:160,y:100,id:'tmp'}, {t:'trans',x:460,y:180,id:'q'},
                    {t:'motor',x:620,y:180,id:'m'}, {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['tmp','out','mcu','adc2','signal'], ['mcu','pb0','q','b','signal']]},

                { name: "MIDI Note Generator", desc: `This musical project generates MIDI (Musical Instrument Digital Interface) messages using four buttons as a simple keyboard. The ATtiny13 implements UART transmission at MIDI baud rate (31,250 bps), sending note-on and note-off messages when buttons are pressed and released. This introduces serial communication and music industry standard protocols.

You'll learn about MIDI protocol structure, UART configuration, message formatting, and musical note numbering. The firmware implements velocity sensitivity through timing measurement, sustain capability, and can generate other MIDI messages (control changes, program changes). This is fundamental to electronic music, synthesizer control, and understanding how digital instruments communicate.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:240,y:180,id:'mcu'},
                    {t:'btn',x:140,y:100,id:'btn1'}, {t:'btn',x:140,y:160,id:'btn2'},
                    {t:'btn',x:140,y:220,id:'btn3'}, {t:'btn',x:140,y:280,id:'btn4'},
                    {t:'gnd',x:300,y:400,id:'g'}
                ], wires:[['btn1','out','mcu','pb2','signal'], ['btn2','out','mcu','pb3','signal']]},

                { name: "Simon Says Memory Game", desc: `This interactive game implements the classic memory challenge using four buttons, four LEDs, and a buzzer. The ATtiny13 generates random sequences that players must repeat, increasing difficulty with each successful round. This demonstrates game logic implementation, random number generation, and creating engaging user interactions with minimal hardware.

The firmware implements sequence generation and storage, pattern playback with audio-visual feedback, input validation, scoring, and defeat conditions. You'll learn about random seed initialization, game state management, and creating compelling user experiences. The project teaches software architecture for interactive applications and can be enhanced with difficulty levels, high scores stored in EEPROM, and multi-player modes.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:200,y:180,id:'mcu'},
                    {t:'btn',x:120,y:80,id:'btn1'}, {t:'btn',x:120,y:140,id:'btn2'},
                    {t:'btn',x:120,y:200,id:'btn3'}, {t:'btn',x:120,y:260,id:'btn4'},
                    {t:'led',x:440,y:80,id:'l1'}, {t:'led',x:440,y:140,id:'l2'},
                    {t:'led',x:440,y:200,id:'l3'}, {t:'led',x:440,y:260,id:'l4'},
                    {t:'buzz',x:600,y:170,id:'bz'}, {t:'gnd',x:300,y:420,id:'g'}
                ], wires:[['mcu','pb0','l1','a','signal'], ['btn1','out','mcu','pb2','signal']]},

                { name: "Digital Combination Lock", desc: `This security project implements a keypad-based combination lock using four buttons and a servo to operate a locking mechanism. The ATtiny13 monitors button sequences, comparing them against a stored combination. Correct entry triggers the servo to unlock, while incorrect attempts may trigger timeouts or alarms. This demonstrates security logic and access control systems.

You'll learn about sequence matching algorithms, timeout implementation, tamper detection, and creating secure embedded systems. The firmware can implement combination programming modes, attempt limiting, and lockout periods after failed attempts. This teaches fundamental principles of access control, applicable to door locks, safes, and computer security systems.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:240,y:180,id:'mcu'},
                    {t:'btn',x:140,y:80,id:'btn1'}, {t:'btn',x:140,y:140,id:'btn2'},
                    {t:'btn',x:140,y:200,id:'btn3'}, {t:'btn',x:140,y:260,id:'btn4'},
                    {t:'servo',x:500,y:180,id:'s'}, {t:'led',x:640,y:180,id:'l'},
                    {t:'gnd',x:320,y:420,id:'g'}
                ], wires:[['mcu','pb0','s','sig','signal'], ['mcu','pb1','l','a','signal']]},

                { name: "Wireless Temperature Transmitter", desc: `This telemetry project reads an LM35 temperature sensor and transmits the data wirelessly using simple on-off keying (OOK) modulation through an LED (for IR) or RF transmitter module. The ATtiny13 encodes temperature readings into pulse patterns for transmission, demonstrating wireless sensor networking principles.

You'll learn about data encoding schemes (Manchester, pulse-width, etc.), error detection (checksums, parity), and implementing simple wireless protocols. The firmware includes synchronization headers, data packetization, and can implement addressing for multiple sensors. This introduces telemetry concepts used in remote sensing, IoT devices, and wireless sensor networks.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:240,y:180,id:'mcu'},
                    {t:'lm35',x:160,y:100,id:'tmp'}, {t:'led',x:500,y:180,id:'l'},
                    {t:'gnd',x:320,y:400,id:'g'}
                ], wires:[['tmp','out','mcu','adc2','signal'], ['mcu','pb0','l','a','signal']]},

                { name: "Solar Battery Charger Controller", desc: `This power management project implements a solar charge controller, protecting batteries from overcharge while maximizing energy harvest. The ATtiny13 monitors battery voltage through resistor dividers and controls charging current via a transistor switch. This demonstrates renewable energy management and battery protection circuits.

The firmware implements charge state determination (bulk, absorption, float), temperature compensation, and prevents over-voltage and under-voltage conditions. You'll learn about battery chemistry, charge algorithms, and creating efficient power management systems. The project can implement MPPT (Maximum Power Point Tracking) approximations and data logging. This is essential to solar systems, battery management, and sustainable energy applications.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:220,y:180,id:'mcu'},
                    {t:'r',x:140,y:100,v:'10k',id:'r1'}, {t:'r',x:140,y:200,v:'10k',id:'r2'},
                    {t:'trans',x:440,y:180,id:'q'}, {t:'led',x:600,y:180,id:'l'},
                    {t:'gnd',x:300,y:400,id:'g'}
                ], wires:[['mcu','pb0','q','b','signal'], ['mcu','pb1','l','a','signal']]},

                { name: "Line-Following Robot", desc: `This robotics project creates an autonomous line-following robot using infrared reflectance sensors and differential motor control. The ATtiny13 reads sensors to detect a dark line on a light surface (or vice versa) and adjusts motor speeds to keep the robot centered on the path. This demonstrates closed-loop control and basic autonomous navigation.

You'll learn about sensor-based navigation, PID control for smooth tracking, differential drive calculations, and handling intersections and line gaps. The firmware implements steering algorithms that balance speed and accuracy, can detect special markers for actions, and recovers from lost-line conditions. This teaches fundamental robotics concepts applicable to warehouse automation, agriculture, and autonomous vehicles.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:200,y:180,id:'mcu'},
                    {t:'motor',x:480,y:120,id:'m1'}, {t:'motor',x:480,y:240,id:'m2'},
                    {t:'trans',x:380,y:180,id:'q1'}, {t:'trans',x:580,y:180,id:'q2'},
                    {t:'gnd',x:300,y:420,id:'g'}
                ], wires:[['mcu','pb0','q1','b','signal'], ['mcu','pb1','q2','b','signal']]},

                { name: "Smart Home Light Controller", desc: `This home automation project combines an LDR and PIR sensor to create intelligent lighting control. The ATtiny13 only activates lights when it's dark (LDR threshold met) AND motion is detected (PIR triggered). This demonstrates multi-sensor logic and energy-efficient automation.

The firmware implements configurable time delays (how long lights stay on after last motion), sensitivity adjustment, and can include manual override modes. You'll learn about occupancy detection, daylight harvesting, and creating comfortable automated environments. The project can be enhanced with gradual dimming, scheduling, and integration with other home systems. This teaches principles applicable to smart homes, energy management, and user-centric automation.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:220,y:180,id:'mcu'},
                    {t:'ldr',x:140,y:100,id:'ldr'}, {t:'pir',x:140,y:260,id:'pir'},
                    {t:'trans',x:440,y:180,id:'q'}, {t:'led',x:600,y:180,id:'l'},
                    {t:'gnd',x:300,y:400,id:'g'}
                ], wires:[['ldr','out','mcu','adc2','signal'], ['mcu','pb0','q','b','signal']]},

                { name: "Complete Weather Station", desc: `This comprehensive project combines multiple sensors - LM35 for temperature, LDR for light, and DHT11 for humidity - with an OLED display to create a full-featured weather monitoring station. The ATtiny13 multiplexes between sensors, performs data processing, and presents formatted information on the display. A buzzer can provide alerts for extreme conditions.

You'll learn about multi-sensor integration, display formatting, data fusion, and creating informative user interfaces on limited hardware. The firmware implements averaging for stability, trend analysis, and can log data to EEPROM for historical tracking. The project demonstrates system integration, bringing together input, processing, storage, and output capabilities into a cohesive application. This is applicable to environmental monitoring, agricultural automation, and any multi-parameter measurement system.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'attiny',x:180,y:180,id:'mcu'},
                    {t:'lm35',x:380,y:100,id:'tmp'}, {t:'ldr',x:380,y:180,id:'ldr'},
                    {t:'oled',x:580,y:140,id:'disp'}, {t:'buzz',x:580,y:240,id:'bz'},
                    {t:'gnd',x:280,y:420,id:'g'}
                ], wires:[['tmp','out','mcu','adc2','signal'], ['ldr','out','mcu','adc3','signal']]}
            ],

            // Course 2: ESP8266 (32 experiments)
            2: [
                { name: "WiFi Blink - Web Control", desc: `This foundational IoT project introduces the ESP8266's WiFi capabilities by creating a web-controlled LED. The ESP8266 connects to your local WiFi network and runs a simple web server. Users can visit a webpage hosted on the ESP8266 to toggle an LED on or off, demonstrating basic network communication and web interfaces. This is your introduction to the Internet of Things and remote device control.

You'll learn about WiFi initialization, web server setup using the ESP8266WebServer library, HTML generation, and handling HTTP GET/POST requests. The project teaches network addressing, client-server architecture, and creating simple web-based user interfaces. This foundation extends to controlling any device remotely through a browser, forming the basis for home automation, remote monitoring, and web-connected embedded systems.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'esp',x:250,y:180,id:'esp'},
                    {t:'r',x:480,y:220,v:'220',id:'r'}, {t:'led',x:630,y:220,id:'l'},
                    {t:'gnd',x:350,y:380,id:'g'}
                ], wires:[
                    ['b','pos','esp','vcc','power'], ['esp','d1','r','in','signal'],
                    ['r','out','l','a','signal'], ['l','c','g','in','ground'],
                    ['esp','gnd','g','in','ground']
                ]},

                { name: "WiFi Network Scanner", desc: `This diagnostic tool scans for all WiFi networks in range and reports their SSID, signal strength (RSSI), channel, and encryption type. The ESP8266 periodically scans and displays results via serial monitor or stores them for web-based display. This demonstrates WiFi survey capabilities and RF environment analysis, useful for network planning and troubleshooting.

The firmware uses the WiFi.scanNetworks() function to enumerate access points, then processes and formats the results. You'll learn about WiFi channels, signal strength measurement in dBm, encryption types (WPA2, WPA3, open), and analyzing RF interference. The project can be enhanced with channel occupancy visualization, historical tracking, and recommendations for optimal AP placement. This teaches wireless networking fundamentals and RF site survey techniques.`,comps: [
                    {t:'bat',x:150,y:200,id:'b'}, {t:'esp',x:350,y:200,id:'esp'},
                    {t:'gnd',x:350,y:380,id:'g'}
                ], wires:[
                    ['b','pos','esp','vcc','power'], ['esp','gnd','g','in','ground']
                ]},

                { name: "Temperature Webserver", desc: `This sensor web server publishes real-time temperature and humidity readings from a DHT11 sensor over a local network. The ESP8266 hosts a webpage that displays current environmental conditions, automatically refreshing to show updated measurements. This demonstrates sensor data publication and creating simple monitoring dashboards.

You'll learn about reading DHT sensors, formatting data for web display, implementing HTTP headers for refresh control, and creating responsive web pages. The firmware includes error handling for sensor failures, data validation, and can serve historical graphs. This is fundamental to environmental monitoring, remote sensing, and creating web-based instrumentation displays. The project extends to any sensor type and forms the basis of IoT monitoring systems.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'esp',x:250,y:180,id:'esp'},
                    {t:'dht11',x:450,y:160,id:'dht'}, {t:'r',x:450,y:280,v:'10k',id:'r'},
                    {t:'gnd',x:350,y:380,id:'g'}
                ], wires:[
                    ['b','pos','esp','vcc','power'], ['esp','d4','dht','data','signal'],
                    ['dht','vcc','esp','vcc','power'], ['dht','gnd','g','in','ground']
                ]},

                { name: "Remote DHT11 Monitor", desc: `This dual-display project shows DHT11 sensor readings both locally on an OLED screen and remotely via a web interface. The ESP8266 maintains simultaneous local display updates and serves web pages to network clients, demonstrating multi-tasking and dual-interface design. This is useful for systems that need both local indication and remote monitoring capabilities.

The firmware balances display refresh timing with web server responsiveness, implementing non-blocking code architecture. You'll learn about I2C communication for the OLED, coordinating multiple output channels, and designing systems with both local and remote access. The project can include touch-free operation, configuration via web interface, and alarm notifications. This teaches creating professional monitoring systems with multiple user interaction methods.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'esp',x:250,y:180,id:'esp'},
                    {t:'dht11',x:450,y:160,id:'dht'}, {t:'oled',x:550,y:280,id:'disp'},
                    {t:'gnd',x:350,y:400,id:'g'}
                ], wires:[
                    ['b','pos','esp','vcc','power'], ['esp','d4','dht','data','signal'],
                    ['esp','d1','disp','sda','signal'], ['esp','d2','disp','scl','signal']
                ]},

                { name: "JSON API Server", desc: `This project transforms the ESP8266 into a RESTful API server, responding to HTTP requests with JSON-formatted data and accepting JSON commands to control devices. Two LEDs represent controllable endpoints, with API calls retrieving their status or changing their state. This demonstrates modern web service architecture and machine-to-machine communication.

You'll learn about JSON encoding/decoding using ArduinoJson library, implementing REST principles (GET for queries, POST for commands), proper HTTP status codes, and API design patterns. The firmware can include authentication, rate limiting, and comprehensive error responses. This is essential for IoT integration, mobile app backends, and creating devices that work with home automation platforms like Home Assistant or OpenHAB.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'esp',x:250,y:180,id:'esp'},
                    {t:'r',x:450,y:180,v:'220',id:'r1'}, {t:'led',x:600,y:140,id:'l1'},
                    {t:'r',x:450,y:260,v:'220',id:'r2'}, {t:'led',x:600,y:260,id:'l2'},
                    {t:'gnd',x:350,y:400,id:'g'}
                ], wires:[
                    ['b','pos','esp','vcc','power'], ['esp','d1','r1','in','signal'],
                    ['esp','d2','r2','in','signal'], ['r1','out','l1','a','signal']
                ]},

                { name: "AJAX Real-time Dashboard", desc: `This advanced web interface uses AJAX (Asynchronous JavaScript and XML) to update displayed sensor values without page reloads. The ESP8266 serves both the static HTML/JavaScript dashboard and JSON data endpoints. Temperature, humidity, and light levels update continuously, creating a responsive monitoring experience. This demonstrates modern web development techniques on embedded systems.

The firmware serves HTML with embedded JavaScript that polls the ESP8266 for updates at regular intervals, parsing JSON responses and updating the DOM. You'll learn about asynchronous HTTP requests, JSON APIs, client-side rendering, and creating snappy user experiences. The project can include charts, gauges, and real-time graphing. This teaches building professional web interfaces for embedded devices, applicable to instrumentation and control systems.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'esp',x:250,y:180,id:'esp'},
                    {t:'dht11',x:450,y:140,id:'dht'}, {t:'ldr',x:450,y:240,id:'ldr'},
                    {t:'r',x:550,y:240,v:'10k',id:'r'}, {t:'gnd',x:350,y:400,id:'g'}
                ], wires:[
                    ['b','pos','esp','vcc','power'], ['esp','d4','dht','data','signal'],
                    ['esp','a0','ldr','out','signal'], ['ldr','in','esp','vcc','power']
                ]},

                { name: "OTA Updates System", desc: `This project implements Over-The-Air (OTA) firmware updates, allowing you to upload new code wirelessly without physical connection. The ESP8266 includes the ArduinoOTA library, which creates a network endpoint accepting firmware uploads. An LED indicates update status. This is essential for deployed devices and eliminates the need for physical access during updates.

You'll learn about firmware partitions, secure boot considerations, implementing update progress indication, and rollback mechanisms for failed updates. The firmware can include version reporting, password protection, and automated update checking. This is critical for commercial IoT products, remote installations, and maintaining deployed device fleets. Understanding OTA systems is essential for professional embedded development.`,comps: [
                    {t:'bat',x:150,y:200,id:'b'}, {t:'esp',x:350,y:200,id:'esp'},
                    {t:'led',x:550,y:200,id:'l'}, {t:'r',x:480,y:200,v:'220',id:'r'},
                    {t:'gnd',x:350,y:380,id:'g'}
                ], wires:[
                    ['b','pos','esp','vcc','power'], ['esp','d5','r','in','signal'],
                    ['r','out','l','a','signal'], ['l','c','g','in','ground']
                ]},

                { name: "MQTT Pub/Sub Client", desc: `This project introduces MQTT (Message Queuing Telemetry Transport), a lightweight publish-subscribe protocol ideal for IoT. The ESP8266 connects to an MQTT broker, publishing sensor readings to topics and subscribing to command topics to control an LED. A button can publish status updates. This demonstrates industry-standard IoT communication patterns.

You'll learn about MQTT architecture, topic hierarchies, Quality of Service levels, retained messages, and last will testaments. The firmware handles broker connection/reconnection, message parsing, and can implement complex automation logic. This is fundamental to professional IoT systems, enabling device-to-device communication through centralized message routing. MQTT powers industrial automation, smart homes, and large-scale sensor networks.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'esp',x:250,y:180,id:'esp'},
                    {t:'btn',x:150,y:100,id:'btn'}, {t:'r',x:450,y:200,v:'220',id:'r'},
                    {t:'led',x:600,y:200,id:'l'}, {t:'gnd',x:350,y:380,id:'g'}
                ], wires:[
                    ['b','pos','esp','vcc','power'], ['btn','out','esp','d2','signal'],
                    ['esp','d1','r','in','signal'], ['r','out','l','a','signal']
                ]},

                // Continue with remaining ESP8266 experiments
                ...Array.from({length:24}, (_, i) => ({
                    name: `Experiment ${9+i}`,
                    comps: [
                        {t:'bat',x:100,y:200,id:'b'}, {t:'esp',x:280,y:180,id:'esp'},
                        {t:'r',x:480,y:220,v:'220',id:'r'}, {t:'led',x:630,y:220,id:'l'},
                        {t:'gnd',x:350,y:380,id:'g'}
                    ],
                    wires: [
                        ['b','pos','esp','vcc','power'], ['esp','d1','r','in','signal'],
                        ['r','out','l','a','signal'], ['l','c','g','in','ground']
                    ]
                }))
            ],

            // Course 3: Raspberry Pi (32 experiments)
            3: [
                { name: "Hello Pi - LED Blink", desc: `This introductory project demonstrates Raspberry Pi GPIO control by blinking an LED. Unlike microcontrollers, the Pi runs a full Linux operating system, so GPIO control happens through a userspace API (RPi.GPIO or gpiozero libraries in Python). This teaches the fundamentals of Linux-based embedded development and the differences between OS-based and bare-metal programming.

You'll learn about GPIO pin numbering schemes (BCM vs BOARD), safe GPIO access, proper shutdown procedures, and writing Python scripts for hardware control. The project introduces the concept of device drivers, kernel space vs userspace, and permission management for hardware access. This foundation extends to controlling any GPIO-connected device on Linux-based embedded systems.`,comps: [
                    {t:'pi',x:200,y:180,id:'pi'}, {t:'r',x:450,y:220,v:'220',id:'r'},
                    {t:'led',x:600,y:220,id:'l'}, {t:'gnd',x:400,y:380,id:'g'}
                ], wires:[
                    ['pi','gpio18','r','in','signal'], ['r','out','l','a','signal'],
                    ['l','c','g','in','ground'], ['pi','gnd','g','in','ground']
                ]},

                { name: "Traffic Light Controller", desc: `This project creates a realistic traffic light sequence using three LEDs (red, yellow, green) controlled by the Raspberry Pi. The Python script implements state machine logic to cycle through proper traffic signal patterns with appropriate timing. This demonstrates sequential control and creating realistic automated behaviors with proper timing relationships.

You'll learn about state machines, timing in Python (time.sleep vs better methods), and managing multiple outputs with coordinated relationships. The firmware can implement pedestrian crossings, sensor-triggered sequences, and multiple intersection coordination. This teaches principles applicable to automation, sequential process control, and creating timed multi-step operations.`,comps: [
                    {t:'pi',x:150,y:180,id:'pi'}, {t:'r',x:400,y:100,v:'220',id:'r1'},
                    {t:'led',x:550,y:100,id:'l1'}, {t:'r',x:400,y:200,v:'220',id:'r2'},
                    {t:'led',x:550,y:200,id:'l2'}, {t:'r',x:400,y:300,v:'220',id:'r3'},
                    {t:'led',x:550,y:300,id:'l3'}, {t:'gnd',x:350,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio17','r1','in','signal'], ['r1','out','l1','a','signal'],
                    ['pi','gpio27','r2','in','signal'], ['r2','out','l2','a','signal'],
                    ['pi','gpio22','r3','in','signal'], ['r3','out','l3','a','signal'],
                    ['l1','c','g','in','ground'], ['l2','c','g','in','ground']
                ]},

                { name: "PWM Servo Control", desc: `This project controls a hobby servo motor using the Raspberry Pi's hardware PWM capabilities. The gpiozero ServoKit or RPi.GPIO PWM functions generate precise timing signals needed for servo positioning. A potentiometer (read through an external ADC like MCP3008, since Pi lacks analog inputs) or keyboard input provides position control.

You'll learn about hardware vs software PWM, timing accuracy in Linux userspace, and the challenges of real-time control on non-real-time operating systems. The code demonstrates servo calibration, position mapping, and smooth motion generation. This is fundamental to robotics, camera control, and any application requiring precision mechanical positioning from a Linux platform.`,comps: [
                    {t:'pi',x:200,y:200,id:'pi'}, {t:'servo',x:480,y:200,id:'s'},
                    {t:'pot',x:200,y:340,v:'10k',id:'p'}, {t:'gnd',x:380,y:380,id:'g'}
                ], wires:[
                    ['pi','gpio12','s','sig','signal'], ['pi','5v','s','vcc','power'],
                    ['s','gnd','g','in','ground'], ['pi','gnd','g','in','ground']
                ]},

                { name: "Button Input & Debounce", desc: `This input handling project demonstrates reading button presses on the Raspberry Pi with proper debouncing and event detection. The Pi's GPIO library provides edge detection and interrupt-driven input handling, more sophisticated than simple polling. The button controls an LED, providing visual feedback and teaching input event handling in Linux.

You'll learn about GPIO pull-up/pull-down configuration, edge detection (rising, falling, both), callback functions for interrupt handling, and implementing debouncing in software. The code demonstrates both polling and event-driven approaches, teaching when each is appropriate. This is essential for any user interface, sensor triggering, or event-driven application on the Pi.`,comps: [
                    {t:'pi',x:200,y:180,id:'pi'}, {t:'btn',x:100,y:100,id:'btn'},
                    {t:'r',x:180,y:100,v:'10k',id:'r1'}, {t:'r',x:450,y:220,v:'220',id:'r2'},
                    {t:'led',x:600,y:220,id:'l'}, {t:'gnd',x:380,y:380,id:'g'}
                ], wires:[
                    ['btn','out','pi','gpio2','signal'], ['pi','gpio18','r2','in','signal'],
                    ['r2','out','l','a','signal'], ['l','c','g','in','ground']
                ]},

                { name: "DHT11 Temp & Humidity", desc: `This sensor project reads temperature and humidity from a DHT11/DHT22 sensor using the Raspberry Pi. The DHT sensors use a specialized one-wire protocol requiring precise timing. Python libraries (Adafruit_DHT or dht11) handle the protocol complexity. This demonstrates environmental sensing and working with timing-critical protocols on Linux.

You'll learn about the DHT communication protocol, handling timing-sensitive operations on non-real-time systems, error handling for unreliable sensors, and data validation. The code can implement averaging, logging to files or databases, and triggering actions based on thresholds. This is fundamental to weather monitoring, environmental control, and any sensor-based Pi application.`,comps: [
                    {t:'pi',x:200,y:200,id:'pi'}, {t:'dht11',x:450,y:180,id:'dht'},
                    {t:'r',x:450,y:300,v:'10k',id:'r'}, {t:'gnd',x:380,y:400,id:'g'}
                ], wires:[
                    ['pi','3v3','dht','vcc','power'], ['pi','gpio4','dht','data','signal'],
                    ['dht','gnd','g','in','ground'], ['pi','gnd','g','in','ground']
                ]},

                { name: "Ultrasonic Distance Sensor", desc: `This ranging project uses an HC-SR04 ultrasonic sensor with the Raspberry Pi, implementing pulse-echo distance measurement. The Pi sends a trigger pulse and measures the echo return time to calculate distance. Voltage dividers protect the 3.3V GPIO pins from the 5V echo signal. This demonstrates time-of-flight measurement and mixed-voltage interfacing.

You'll learn about pulse width measurement in Python, handling timing jitter from Linux scheduling, voltage level shifting, and filtering noisy measurements. The code implements distance averaging, change detection, and can create proximity alerts or object tracking. This is applicable to robotics, automation, and presence detection systems.`,comps: [
                    {t:'pi',x:200,y:200,id:'pi'}, {t:'ultra',x:480,y:180,id:'us'},
                    {t:'r',x:620,y:240,v:'1k',id:'r1'}, {t:'r',x:620,y:320,v:'2k',id:'r2'},
                    {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio23','us','trig','signal'], ['us','echo','r1','in','signal'],
                    ['r1','out','pi','gpio24','signal'], ['us','vcc','pi','5v','power']
                ]},

                { name: "PIR Motion Sensor", desc: `This security project uses a PIR (Passive Infrared) motion sensor to detect human presence. The PIR sensor outputs a digital signal when motion is detected, which the Pi reads and responds to by controlling lights, cameras, or alarms. This demonstrates simple yet effective presence detection for automation and security applications.

You'll learn about PIR sensor operation, sensitivity adjustment, implementing cool-down periods to prevent retriggering, and creating intelligent responses to motion events. The code can timestamp detections, log events, send notifications, or integrate with home automation systems. This is essential for security systems, occupancy detection, and energy-saving automated lighting.`,comps: [
                    {t:'pi',x:200,y:200,id:'pi'}, {t:'pir',x:420,y:160,id:'pir'},
                    {t:'r',x:550,y:260,v:'220',id:'r'}, {t:'led',x:680,y:260,id:'l'},
                    {t:'gnd',x:400,y:400,id:'g'}
                ], wires:[
                    ['pi','5v','pir','vcc','power'], ['pir','out','pi','gpio4','signal'],
                    ['pi','gpio18','r','in','signal'], ['r','out','l','a','signal']
                ]},

                { name: "MCP3008 ADC Integration", desc: `This project adds analog input capability to the Raspberry Pi using an MCP3008 8-channel ADC connected via SPI. The Pi lacks built-in ADC, so external chips are necessary for reading analog sensors. This demonstrates SPI communication and expanding the Pi's capabilities with peripheral ICs.

You'll learn about SPI protocol, configuring SPI on the Raspberry Pi, reading multiple ADC channels, and converting digital values to voltages/sensor readings. The code implements channel multiplexing, reference voltage management, and can interface with any analog sensor (potentiometers, LDRs, temperature sensors). This is fundamental to adding analog sensing to Pi projects.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'mcp3008',x:420,y:180,id:'adc'},
                    {t:'pot',x:600,y:140,v:'10k',id:'p1'}, {t:'ldr',x:600,y:240,id:'ldr'},
                    {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','spi0','adc','clk','signal'], ['adc','ch0','p1','out','signal'],
                    ['adc','ch1','ldr','out','signal'], ['pi','3v3','adc','vref','power']
                ]},

                { name: "LCD 16x2 Display", desc: `This display project interfaces a character LCD module with the Raspberry Pi using I2C or parallel interface. The display shows system information, sensor readings, or custom messages. Python libraries (like RPLCD or Adafruit_CharLCD) simplify the LCD communication protocol.

You'll learn about LCD initialization sequences, character ROM encoding, creating custom characters, and managing display updates. The code demonstrates formatting text, creating scrolling messages, and updating specific positions without flickering. This is essential for creating user interfaces without full graphical displays, applicable to information displays, instrumentation, and embedded UI design.`,comps: [
                    {t:'pi',x:150,y:200,id:'pi'}, {t:'oled',x:450,y:180,id:'lcd'},
                    {t:'pot',x:450,y:320,v:'10k',id:'p'}, {t:'gnd',x:380,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio2','lcd','sda','signal'], ['pi','gpio3','lcd','scl','signal'],
                    ['pi','5v','lcd','vcc','power'], ['lcd','gnd','g','in','ground']
                ]},

                { name: "RGB LED Control", desc: `This lighting project controls an RGB LED (or LED strip) using three PWM channels from the Raspberry Pi. Software or hardware PWM generates color mixing signals, creating millions of colors from red, green, and blue primaries. This demonstrates color control and PWM-based analog output simulation.

You'll learn about RGB color mixing, PWM generation for color control, gamma correction for perceptually linear brightness, and implementing color effects (fades, cycles, breathing). The code can implement color presets, web-based color picking, or music-reactive lighting. This is applicable to architectural lighting, displays, and creating ambient lighting effects.`,comps: [
                    {t:'pi',x:150,y:200,id:'pi'},
                    {t:'r',x:400,y:140,v:'220',id:'r1'}, {t:'led',x:550,y:140,id:'l1'},
                    {t:'r',x:400,y:220,v:'220',id:'r2'}, {t:'led',x:550,y:220,id:'l2'},
                    {t:'r',x:400,y:300,v:'220',id:'r3'}, {t:'led',x:550,y:300,id:'l3'},
                    {t:'gnd',x:380,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio17','r1','in','signal'], ['r1','out','l1','a','signal'],
                    ['pi','gpio27','r2','in','signal'], ['r2','out','l2','a','signal'],
                    ['pi','gpio22','r3','in','signal'], ['r3','out','l3','a','signal']
                ]},

                { name: "7-Segment Display", desc: `This numeric display project drives a 7-segment LED display using a 74HC595 shift register controlled via GPIO. The Pi generates serial data to set segment patterns, displaying numbers and some letters. This demonstrates efficient display driving and serial-to-parallel conversion.

You'll learn about 7-segment encoding, shift register control, multiplexing for multi-digit displays, and implementing counters or value displays. The code handles segment mapping, creating smooth counting animations, and can display sensor readings or time. This is useful for instrumentation, clocks, and any application needing numeric display.`,comps: [
                    {t:'pi',x:150,y:200,id:'pi'}, {t:'74595',x:400,y:180,id:'sr'},
                    {t:'oled',x:600,y:180,id:'seg'}, {t:'gnd',x:380,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio2','sr','data','signal'], ['sr','q0','seg','sda','signal'],
                    ['pi','3v3','sr','data','power'], ['sr','q1','seg','scl','signal']
                ]},

                { name: "NeoPixel LED Strip", desc: `This addressable LED project controls WS2812B (NeoPixel) LED strips using the Raspberry Pi. These LEDs use a specialized timing protocol requiring precise bit-banging or DMA-based generation. The rpi_ws281x library handles the complex timing. This demonstrates controlling intelligent LED strips for colorful animations and displays.

You'll learn about NeoPixel protocol, color ordering (RGB vs GRB), implementing animations (chase, rainbow, fade), and creating light shows. The code can react to music, display visualizations, or create notification indicators. This is popular for decorative lighting, wearable electronics, and creating eye-catching visual displays.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'},
                    {t:'led',x:450,y:140,id:'l1'}, {t:'led',x:550,y:140,id:'l2'},
                    {t:'led',x:650,y:140,id:'l3'}, {t:'led',x:450,y:240,id:'l4'},
                    {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio18','l1','a','signal'], ['l1','c','l2','a','signal'],
                    ['l2','c','l3','a','signal'], ['l3','c','l4','a','signal']
                ]},

                { name: "Serial UART Communication", desc: `This communication project uses the Raspberry Pi's UART (serial port) to communicate with other devices - microcontrollers, GPS modules, or serial peripherals. Python's pyserial library provides cross-platform serial communication. This demonstrates classic serial protocols still widely used in embedded systems.

You'll learn about baud rate configuration, data framing, implementing protocols over serial, and handling binary vs text data. The code demonstrates sending commands and parsing responses, implementing timeouts and error handling. This is essential for interfacing with serial sensors, debugging embedded systems, and creating multi-device communication networks.`,comps: [
                    {t:'pi',x:200,y:200,id:'pi'}, {t:'esp',x:500,y:200,id:'dev'},
                    {t:'r',x:380,y:160,v:'1k',id:'r1'}, {t:'r',x:380,y:240,v:'2k',id:'r2'},
                    {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio2','r1','in','signal'], ['r1','out','dev','d1','signal'],
                    ['dev','d2','pi','gpio3','signal'], ['pi','gnd','g','in','ground']
                ]},

                { name: "SPI Communication", desc: `This advanced interface project demonstrates SPI (Serial Peripheral Interface) communication with peripheral devices like sensors, ADCs, or displays. The Pi acts as SPI master, controlling clock and chip select signals. This teaches high-speed serial communication for performance-critical applications.

You'll learn about SPI modes, clock polarity/phase, implementing proper chip select handling, and achieving high data rates. The code demonstrates reading sensors, writing to memory, and full-duplex communication. This is essential for interfacing with many modern sensors and high-speed peripherals where I2C is too slow.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'mcp3008',x:480,y:200,id:'spi'},
                    {t:'pot',x:650,y:200,v:'10k',id:'p'}, {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','spi0','spi','clk','signal'], ['spi','ch0','p','out','signal'],
                    ['pi','3v3','spi','vref','power'], ['spi','gnd','g','in','ground']
                ]},

                { name: "I2C Bus Scanner", desc: `This diagnostic tool scans the I2C bus for connected devices, reporting their addresses and helping identify hardware configurations. The Pi queries all possible I2C addresses and reports which respond. This is invaluable for troubleshooting and discovering device addresses.

You'll learn about I2C protocol, addressing schemes, bus scanning techniques, and implementing device detection. The code helps identify unknown devices, verify connections, and debug I2C hardware problems. This is essential for working with I2C peripherals and understanding bus topology.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'oled',x:450,y:160,id:'dev1'},
                    {t:'dht11',x:450,y:280,id:'dev2'}, {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio2','dev1','sda','signal'], ['pi','gpio3','dev1','scl','signal'],
                    ['pi','gpio2','dev2','data','signal'], ['pi','3v3','dev1','vcc','power']
                ]},

                { name: "Data Logging SQLite", desc: `This data management project implements sensor logging using SQLite database on the Raspberry Pi. Temperature, humidity, and other readings are timestamped and stored in a structured database, enabling complex queries and long-term analysis. This demonstrates proper data persistence for sensor applications.

You'll learn about SQLite database operations, SQL queries, designing database schemas, and implementing efficient data insertion. The code can aggregate data (hourly averages), export to CSV, and create reports. This is essential for any long-term monitoring application, scientific data collection, or creating data-driven analytics.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'dht11',x:450,y:160,id:'dht'},
                    {t:'oled',x:600,y:280,id:'lcd'}, {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio4','dht','data','signal'], ['pi','gpio2','lcd','sda','signal'],
                    ['dht','vcc','pi','3v3','power'], ['lcd','gnd','g','in','ground']
                ]},

                { name: "Pi Camera Module", desc: `This imaging project uses the Raspberry Pi Camera Module to capture photos and video. The picamera Python library provides comprehensive camera control. This demonstrates still and video capture, introducing computer vision capabilities.

You'll learn about camera initialization, resolution/quality settings, implementing timelapse photography, and storing captured media. The code can implement motion-triggered capture, scheduled photography, or streaming video. This is fundamental to security cameras, wildlife monitoring, and any vision-based application.`,comps: [
                    {t:'pi',x:200,y:200,id:'pi'},
                    {t:'r',x:450,y:200,v:'220',id:'r'}, {t:'led',x:600,y:200,id:'l'},
                    {t:'btn',x:100,y:100,id:'btn'}, {t:'gnd',x:400,y:400,id:'g'}
                ], wires:[
                    ['btn','out','pi','gpio2','signal'], ['pi','gpio18','r','in','signal'],
                    ['r','out','l','a','signal'], ['l','c','g','in','ground']
                ]},

                { name: "Face Detection OpenCV", desc: `This computer vision project uses OpenCV to detect faces in camera images. Haar cascade classifiers identify faces in real-time, allowing the Pi to track people, count occupancy, or trigger actions based on presence. This demonstrates practical AI and computer vision on embedded Linux.

You'll learn about OpenCV installation, loading classifiers, implementing detection algorithms, and processing video streams. The code can draw bounding boxes, count faces, or recognize specific individuals with additional training. This is applicable to security, human-computer interaction, and accessibility applications.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'},
                    {t:'r',x:450,y:180,v:'220',id:'r1'}, {t:'led',x:600,y:180,id:'l1'},
                    {t:'buzz',x:600,y:280,id:'bz'}, {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio17','r1','in','signal'], ['r1','out','l1','a','signal'],
                    ['pi','gpio27','bz','in','signal'], ['bz','out','g','in','ground']
                ]},

                { name: "QR Code Scanner", desc: `This code reading project uses the Pi Camera and pyzbar library to scan and decode QR codes. The system continuously analyzes camera frames, decodes any QR codes found, and triggers actions based on the content. This demonstrates practical barcode/QR applications.

You'll learn about image preprocessing, QR code structure, implementing scanning applications, and parsing decoded data. The code can trigger URLs, log inventory, or implement attendance systems. This is applicable to industrial automation, retail, and creating interactive installations activated by QR codes.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'btn',x:100,y:120,id:'btn'},
                    {t:'oled',x:500,y:200,id:'lcd'}, {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['btn','out','pi','gpio2','signal'], ['pi','gpio3','lcd','sda','signal'],
                    ['pi','gpio4','lcd','scl','signal'], ['pi','3v3','lcd','vcc','power']
                ]},

                { name: "Motion Detection Camera", desc: `This security project implements motion detection using computer vision - analyzing camera frames to detect movement and trigger recording or alerts. OpenCV or simpler frame-difference algorithms identify changes, providing smarter motion detection than PIR sensors.

You'll learn about background subtraction, frame differencing, noise filtering, and implementing sensitivity controls. The code can record only when motion occurs, send alerts with captured images, and distinguish between small movements and significant events. This is essential for security cameras, wildlife monitoring, and event-triggered recording systems.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'pir',x:420,y:140,id:'pir'},
                    {t:'r',x:520,y:260,v:'220',id:'r'}, {t:'led',x:650,y:260,id:'l'},
                    {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','5v','pir','vcc','power'], ['pir','out','pi','gpio4','signal'],
                    ['pi','gpio18','r','in','signal'], ['r','out','l','a','signal']
                ]},

                { name: "Object Tracking", desc: `This computer vision project tracks objects through video frames using color-based or feature-based tracking. OpenCV's tracking algorithms follow selected objects, enabling applications like ball tracking, person following, or gesture recognition. This demonstrates real-time visual tracking.

You'll learn about color space conversion (HSV for color tracking), contour detection, implementing tracking algorithms, and predicting object motion. The code can control servos to follow objects, log movement paths, or trigger events when objects enter zones. This is applicable to robotics, sports analysis, and interactive installations.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'servo',x:480,y:160,id:'s1'},
                    {t:'servo',x:480,y:280,id:'s2'}, {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio12','s1','sig','signal'], ['pi','gpio13','s2','sig','signal'],
                    ['pi','5v','s1','vcc','power'], ['pi','5v','s2','vcc','power']
                ]},

                { name: "OCR Text Recognition", desc: `This optical character recognition project uses Tesseract OCR to extract text from images captured by the Pi Camera. The system preprocesses images and recognizes printed or handwritten text, enabling applications like document scanning or automated form reading.

You'll learn about image preprocessing for OCR, configuring Tesseract, handling different languages, and improving recognition accuracy. The code can read meter displays, extract serial numbers, or automate data entry from printed forms. This is applicable to industrial automation, accessibility tools, and document processing systems.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'btn',x:100,y:120,id:'btn'},
                    {t:'oled',x:520,y:200,id:'lcd'}, {t:'buzz',x:520,y:320,id:'bz'},
                    {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['btn','out','pi','gpio2','signal'], ['pi','gpio3','lcd','sda','signal'],
                    ['pi','gpio17','bz','in','signal'], ['bz','out','g','in','ground']
                ]},

                { name: "TensorFlow Lite Setup", desc: `This machine learning project sets up TensorFlow Lite on the Raspberry Pi, enabling on-device AI inference. Pre-trained models run on the Pi's CPU/GPU, bringing machine learning capabilities to edge devices without cloud dependency. This introduces practical AI deployment.

You'll learn about model quantization, TensorFlow Lite interpreter, implementing inference pipelines, and optimizing for performance. The setup enables image classification, object detection, and other ML tasks. This is fundamental to edge AI, enabling intelligent devices that work offline and preserve privacy by processing data locally.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'},
                    {t:'r',x:450,y:180,v:'220',id:'r'}, {t:'led',x:600,y:180,id:'l'},
                    {t:'oled',x:500,y:300,id:'lcd'}, {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio18','r','in','signal'], ['r','out','l','a','signal'],
                    ['pi','gpio2','lcd','sda','signal'], ['pi','gpio3','lcd','scl','signal']
                ]},

                { name: "Image Classification", desc: `This AI vision project uses TensorFlow Lite models (like MobileNet) to classify objects in camera images. The Pi identifies objects in real-time, labeling them with confidence scores. This demonstrates practical computer vision AI applications.

You'll learn about image preprocessing for neural networks, running inference, interpreting model outputs, and displaying results. The code can sort objects on conveyor belts, identify plants, or create visual search applications. This is applicable to quality control, inventory management, and creating intelligent camera-based systems.`,comps: [
                    {t:'pi',x:150,y:200,id:'pi'}, {t:'btn',x:80,y:120,id:'btn'},
                    {t:'oled',x:480,y:160,id:'lcd'},
                    {t:'r',x:480,y:280,v:'220',id:'r1'}, {t:'led',x:630,y:280,id:'l1'},
                    {t:'gnd',x:380,y:420,id:'g'}
                ], wires:[
                    ['btn','out','pi','gpio2','signal'], ['pi','gpio3','lcd','sda','signal'],
                    ['pi','gpio18','r1','in','signal'], ['r1','out','l1','a','signal']
                ]},

                { name: "Voice Recognition", desc: `This speech interface project uses speech recognition libraries (like SpeechRecognition with Google/CMU Sphinx) to transcribe spoken commands. A USB microphone captures audio, which is processed to text and parsed for command execution. This demonstrates voice-controlled embedded systems.

You'll learn about audio capture in Python, interfacing with speech APIs, implementing command grammars, and creating voice user interfaces. The code can control GPIO devices, search information, or provide accessibility interfaces. This is essential for hands-free control, assistive technology, and creating natural language interfaces.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'spk',x:480,y:160,id:'spk'},
                    {t:'r',x:480,y:280,v:'220',id:'r'}, {t:'led',x:630,y:280,id:'l'},
                    {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio18','spk','in','signal'], ['pi','gpio17','r','in','signal'],
                    ['r','out','l','a','signal'], ['l','c','g','in','ground']
                ]},

                { name: "Speech Synthesis", desc: `This text-to-speech project uses synthesis engines (pyttsx3 or Google TTS) to convert text to spoken audio. The Pi can announce sensor readings, provide status updates, or create audio interfaces for visually impaired users. This demonstrates audio output for human interaction.

You'll learn about TTS engines, voice selection, controlling speech parameters (rate, pitch), and generating natural-sounding speech. The code can read notifications, create audio books, or provide voice feedback for appliances. This is essential for accessibility, user notifications, and creating audio interfaces.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'spk',x:480,y:200,id:'spk'},
                    {t:'btn',x:100,y:120,id:'btn'}, {t:'gnd',x:400,y:400,id:'g'}
                ], wires:[
                    ['pi','gpio18','spk','in','signal'], ['btn','out','pi','gpio2','signal'],
                    ['spk','out','g','in','ground'], ['pi','gnd','g','in','ground']
                ]},

                { name: "Gesture Control", desc: `This motion interface project uses camera-based hand tracking or IMU sensors to recognize gestures for contactless control. OpenCV or MediaPipe detect hand positions and movements, interpreting them as commands. This demonstrates advanced human-computer interaction.

You'll learn about hand detection, pose estimation, implementing gesture recognition, and mapping gestures to actions. The code can control media playback, navigate interfaces, or enable touchless operation. This is applicable to public installations, sterile environments, and accessibility interfaces.`,comps: [
                    {t:'pi',x:150,y:200,id:'pi'},
                    {t:'r',x:400,y:140,v:'220',id:'r1'}, {t:'led',x:550,y:140,id:'l1'},
                    {t:'r',x:400,y:220,v:'220',id:'r2'}, {t:'led',x:550,y:220,id:'l2'},
                    {t:'servo',x:480,y:320,id:'s'}, {t:'gnd',x:380,y:440,id:'g'}
                ], wires:[
                    ['pi','gpio17','r1','in','signal'], ['r1','out','l1','a','signal'],
                    ['pi','gpio27','r2','in','signal'], ['pi','gpio12','s','sig','signal']
                ]},

                { name: "Flask Web Server", desc: `This web development project creates a full-featured web application using Flask framework. The Pi serves dynamic web pages with sensor data, control interfaces, and data visualization. This demonstrates professional web development on embedded Linux.

You'll learn about Flask routing, template rendering with Jinja2, handling forms, and creating RESTful APIs. The code can include user authentication, database integration, and real-time updates. This is essential for creating web-based device interfaces, data dashboards, and remote monitoring systems.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'dht11',x:450,y:160,id:'dht'},
                    {t:'r',x:520,y:280,v:'220',id:'r'}, {t:'led',x:670,y:280,id:'l'},
                    {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio4','dht','data','signal'], ['pi','gpio18','r','in','signal'],
                    ['r','out','l','a','signal'], ['dht','vcc','pi','3v3','power']
                ]},

                { name: "REST API Server", desc: `This API project creates a comprehensive RESTful API using Flask-RESTful or FastAPI. The Pi exposes sensor readings and controls through HTTP endpoints, enabling integration with mobile apps, web services, and automation platforms. This demonstrates modern API design for IoT devices.

You'll learn about REST principles, implementing CRUD operations, API versioning, and documentation with Swagger/OpenAPI. The code includes authentication, rate limiting, and comprehensive error handling. This is essential for professional IoT products, enabling integration with diverse client applications.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'},
                    {t:'r',x:450,y:160,v:'220',id:'r1'}, {t:'led',x:600,y:160,id:'l1'},
                    {t:'r',x:450,y:240,v:'220',id:'r2'}, {t:'led',x:600,y:240,id:'l2'},
                    {t:'btn',x:100,y:120,id:'btn'}, {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['btn','out','pi','gpio2','signal'], ['pi','gpio17','r1','in','signal'],
                    ['pi','gpio27','r2','in','signal'], ['r1','out','l1','a','signal']
                ]},

                { name: "Socket.IO Real-time", desc: `This real-time communication project uses Socket.IO for bidirectional event-based communication between the Pi and web clients. Unlike polling, Socket.IO pushes updates instantly, creating responsive dashboards and control interfaces. This demonstrates modern real-time web technologies.

You'll learn about WebSocket protocols, event-driven architecture, broadcasting to multiple clients, and creating snappy user experiences. The code implements rooms for organizing clients, handles connection management, and creates real-time sensor visualization. This is essential for responsive monitoring interfaces and collaborative applications.`,comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'dht11',x:450,y:160,id:'dht'},
                    {t:'ldr',x:450,y:280,id:'ldr'}, {t:'r',x:550,y:280,v:'10k',id:'r'},
                    {t:'gnd',x:400,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio4','dht','data','signal'], ['ldr','out','r','in','signal'],
                    ['dht','vcc','pi','3v3','power'], ['r','out','g','in','ground']
                ]},

                { name: "Telegram Bot Interface", desc: `This messaging integration creates a Telegram bot for controlling and monitoring the Raspberry Pi. Users send commands through Telegram, receiving status updates, alerts, and sensor data. The python-telegram-bot library handles bot interactions. This demonstrates creating mobile interfaces without developing custom apps.

You'll learn about Telegram Bot API, implementing command handlers, sending rich messages with images/buttons, and user authentication. The code can send alerts, respond to queries, and control connected devices. This is excellent for remote monitoring, providing accessible interfaces through familiar messaging apps.`,comps: [
                    {t:'pi',x:150,y:200,id:'pi'}, {t:'btn',x:80,y:120,id:'btn1'},
                    {t:'btn',x:80,y:180,id:'btn2'},
                    {t:'r',x:450,y:180,v:'220',id:'r'}, {t:'led',x:600,y:180,id:'l'},
                    {t:'gnd',x:380,y:420,id:'g'}
                ], wires:[
                    ['btn1','out','pi','gpio2','signal'], ['btn2','out','pi','gpio3','signal'],
                    ['pi','gpio18','r','in','signal'], ['r','out','l','a','signal']
                ]},

                { name: "MQTT IoT Gateway", desc: `This IoT infrastructure project transforms the Pi into an MQTT gateway, bridging local sensors and cloud services. The Pi collects data from multiple sources (sensors, cameras, other devices), publishes to MQTT topics, and subscribes to commands for local control. This demonstrates creating IoT infrastructure and device coordination.

You'll learn about MQTT broker connection, topic design, implementing quality of service, and creating robust message handling. The code coordinates multiple devices, implements automation rules locally, and integrates with cloud platforms. This is essential for building smart home systems, industrial monitoring, and creating scalable IoT networks. The Pi acts as an edge computing hub, processing data locally while connecting to cloud services.`,comps: [
                    {t:'pi',x:150,y:200,id:'pi'}, {t:'dht11',x:420,y:140,id:'dht'},
                    {t:'pir',x:420,y:260,id:'pir'}, {t:'buzz',x:600,y:200,id:'bz'},
                    {t:'gnd',x:380,y:420,id:'g'}
                ], wires:[
                    ['pi','gpio4','dht','data','signal'], ['pi','gpio17','pir','out','signal'],
                    ['pi','gpio27','bz','in','signal'], ['bz','out','g','in','ground']
                ]},

                { name: "Complete Weather Station",comps: [
                    {t:'pi',x:150,y:180,id:'pi'}, {t:'dht11',x:400,y:120,id:'dht'},
                    {t:'ldr',x:400,y:220,id:'ldr'}, {t:'r',x:500,y:220,v:'10k',id:'r1'},
                    {t:'oled',x:580,y:300,id:'lcd'}, {t:'gnd',x:380,y:440,id:'g'}
                ], wires:[
                    ['pi','gpio4','dht','data','signal'], ['ldr','out','r1','in','signal'],
                    ['pi','gpio2','lcd','sda','signal'], ['pi','gpio3','lcd','scl','signal']
                ]},

                { name: "Smart Home Hub",comps: [
                    {t:'pi',x:120,y:200,id:'pi'},
                    {t:'r',x:380,y:120,v:'220',id:'r1'}, {t:'led',x:530,y:120,id:'l1'},
                    {t:'r',x:380,y:200,v:'220',id:'r2'}, {t:'led',x:530,y:200,id:'l2'},
                    {t:'servo',x:450,y:300,id:'s'}, {t:'buzz',x:630,y:300,id:'bz'},
                    {t:'gnd',x:350,y:440,id:'g'}
                ], wires:[
                    ['pi','gpio17','r1','in','signal'], ['pi','gpio27','r2','in','signal'],
                    ['pi','gpio12','s','sig','signal'], ['pi','gpio22','bz','in','signal']
                ]},

                { name: "Air Quality Monitor",comps: [
                    {t:'pi',x:180,y:200,id:'pi'}, {t:'mcp3008',x:450,y:160,id:'adc'},
                    {t:'oled',x:600,y:280,id:'lcd'}, {t:'buzz',x:450,y:340,id:'bz'},
                    {t:'gnd',x:400,y:440,id:'g'}
                ], wires:[
                    ['pi','spi0','adc','clk','signal'], ['pi','gpio2','lcd','sda','signal'],
                    ['pi','gpio17','bz','in','signal'], ['bz','out','g','in','ground']
                ]},

                { name: "Security Camera System",comps: [
                    {t:'pi',x:150,y:200,id:'pi'}, {t:'pir',x:400,y:140,id:'pir1'},
                    {t:'pir',x:400,y:260,id:'pir2'}, {t:'buzz',x:580,y:200,id:'bz'},
                    {t:'r',x:580,y:320,v:'220',id:'r'}, {t:'led',x:720,y:320,id:'l'},
                    {t:'gnd',x:380,y:440,id:'g'}
                ], wires:[
                    ['pi','gpio4','pir1','out','signal'], ['pi','gpio17','pir2','out','signal'],
                    ['pi','gpio27','bz','in','signal'], ['pi','gpio18','r','in','signal']
                ]},

                { name: "Robot Car Controller",comps: [
                    {t:'pi',x:150,y:200,id:'pi'},
                    {t:'motor',x:450,y:140,id:'m1'}, {t:'motor',x:450,y:260,id:'m2'},
                    {t:'ultra',x:620,y:180,id:'us'}, {t:'gnd',x:380,y:440,id:'g'}
                ], wires:[
                    ['pi','gpio17','m1','in','signal'], ['pi','gpio27','m2','in','signal'],
                    ['pi','gpio23','us','trig','signal'], ['us','echo','pi','gpio24','signal']
                ]},

                { name: "IoT Dashboard Complete",comps: [
                    {t:'pi',x:120,y:180,id:'pi'}, {t:'dht11',x:380,y:120,id:'dht'},
                    {t:'ldr',x:380,y:200,id:'ldr'}, {t:'r',x:480,y:200,v:'10k',id:'r1'},
                    {t:'pir',x:380,y:280,id:'pir'}, {t:'oled',x:600,y:180,id:'lcd'},
                    {t:'r',x:600,y:320,v:'220',id:'r2'}, {t:'led',x:720,y:320,id:'l'},
                    {t:'gnd',x:380,y:460,id:'g'}
                ], wires:[
                    ['pi','gpio4','dht','data','signal'], ['ldr','out','r1','in','signal'],
                    ['pi','gpio17','pir','out','signal'], ['pi','gpio2','lcd','sda','signal'],
                    ['pi','gpio18','r2','in','signal'], ['r2','out','l','a','signal']
                ]}
            ],

            // Course 4: Audio Experiments (32 experiments)
            4: [
                // Exp 1: Simple 555 Tone Generator
                { name: "Simple 555 Tone Generator", desc: `This classic circuit introduces the 555 timer IC in astable mode, creating a continuous audio tone. The 555 rapidly toggles its output, generating a square wave at audible frequency (typically 500Hz-2kHz). This foundational project teaches 555 operation and basic audio synthesis without amplification.

You'll learn about the 555 astable formula (frequency = 1.44 / ((R1 + 2*R2) * C)), timing component selection, and audio frequency ranges. The circuit demonstrates how simple oscillators create tones and introduces concepts used throughout audio electronics. Experimenting with component values reveals the relationship between RC timing and pitch.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:280,y:180,id:'ic1'},
                    {t:'r',x:200,y:100,v:'10kŒ©',id:'r1'}, {t:'r',x:380,y:100,v:'100kŒ©',id:'r2'},
                    {t:'c',x:350,y:280,v:'0.1¬µF',id:'c1'}, {t:'spk',x:500,y:200,id:'sp1'},
                    {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['ic1','gnd','g','in','ground'],
                    ['ic1','out','sp1','in','signal'], ['sp1','out','g','in','ground'],
                    ['r1','in','ic1','vcc','power'], ['r1','out','ic1','dis','signal'],
                    ['r2','in','ic1','dis','signal'], ['r2','out','ic1','thr','signal'],
                    ['ic1','thr','c1','in','signal'], ['c1','out','g','in','ground']
                ]},

                // Exp 2: Variable Pitch Oscillator
                { name: "Variable Pitch Oscillator", desc: `Building on the basic tone generator, this circuit adds a potentiometer to create variable pitch control. Adjusting the pot changes the resistance in the 555 timing network, sweeping through a range of frequencies. This demonstrates voltage control principles and creates simple electronic instrument sounds.

You'll learn about implementing user controls, frequency range selection through component choices, and creating musically useful pitch ranges. The project can be tuned to cover specific octaves or create special effects like sirens and laser sounds. This introduces the concept of voltage-controlled oscillators fundamental to synthesizers.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:300,y:180,id:'ic1'},
                    {t:'r',x:200,y:100,v:'1kŒ©',id:'r1'}, {t:'pot',x:350,y:100,v:'100k',id:'pot1'},
                    {t:'c',x:380,y:280,v:'0.1¬µF',id:'c1'}, {t:'spk',x:520,y:200,id:'sp1'},
                    {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['ic1','gnd','g','in','ground'],
                    ['ic1','out','sp1','in','signal'], ['sp1','out','g','in','ground'],
                    ['r1','in','ic1','vcc','power'], ['r1','out','pot1','in','signal'],
                    ['pot1','out','ic1','thr','signal'], ['ic1','thr','c1','in','signal'],
                    ['c1','out','g','in','ground']
                ]},

                // Exp 3: Two-Tone Siren
                { name: "Two-Tone Siren", desc: `This sound effect circuit uses two 555 timers - one running fast for the siren tone, another running slowly to modulate between two pitches. The slow oscillator varies the control voltage of the fast oscillator, creating alternating high-low siren tones. This demonstrates modulation and creating complex sounds from simple circuits.

You'll learn about oscillator modulation, implementing AM (amplitude modulation) or FM (frequency modulation), and creating recognizable sound effects. The circuit teaches how multiple oscillators interact to create more complex timbres, a principle underlying all synthesis.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:250,y:150,id:'ic1'},
                    {t:'555',x:250,y:300,id:'ic2'}, {t:'btn',x:150,y:220,id:'btn1'},
                    {t:'r',x:180,y:100,v:'10kŒ©',id:'r1'}, {t:'r',x:180,y:250,v:'22kŒ©',id:'r2'},
                    {t:'c',x:320,y:200,v:'1¬µF',id:'c1'}, {t:'c',x:320,y:350,v:'1¬µF',id:'c2'},
                    {t:'spk',x:450,y:225,id:'sp1'}, {t:'gnd',x:100,y:400,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','ic2','vcc','power'],
                    ['ic1','gnd','g','in','ground'], ['ic2','gnd','g','in','ground'],
                    ['btn1','in','ic1','rst','signal'], ['btn1','out','ic2','rst','signal'],
                    ['ic1','out','sp1','in','signal'], ['ic2','out','sp1','in','signal'],
                    ['sp1','out','g','in','ground'], ['r1','in','ic1','vcc','power'],
                    ['r2','in','ic2','vcc','power']
                ]},

                // Exp 4: LM386 Basic Amplifier
                { name: "LM386 Basic Amplifier", desc: `This amplification project introduces the LM386 audio amplifier IC, capable of driving speakers from low-level audio signals. The LM386 provides up to 200x voltage gain in minimal configurations, making it ideal for battery-powered audio projects. This teaches fundamental audio amplification and signal chain design.

You'll learn about amplifier gain settings (controlled by pin 1 and 8 connections), input/output coupling capacitors, supply decoupling, and speaker matching. The circuit can amplify signals from audio sources, microphones, or oscillator circuits. This is foundational to all audio electronics, teaching signal levels and impedance matching.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:300,y:200,id:'amp1'},
                    {t:'c',x:200,y:150,v:'10¬µF',id:'c1'}, {t:'c',x:400,y:200,v:'100¬µF',id:'c2'},
                    {t:'r',x:200,y:250,v:'10kŒ©',id:'r1'}, {t:'spk',x:520,y:200,id:'sp1'},
                    {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','amp1','vcc','power'], ['amp1','gnd','g','in','ground'],
                    ['c1','in','amp1','in','signal'], ['c1','out','g','in','ground'],
                    ['amp1','out','c2','in','signal'], ['c2','out','sp1','in','signal'],
                    ['sp1','out','g','in','ground'], ['r1','in','amp1','in','signal'],
                    ['r1','out','g','in','ground']
                ]},

                // Exp 5: 555 + LM386 Amplified Tone
                { name: "555 + LM386 Amplified Tone", desc: `This project combines the 555 oscillator with LM386 amplification, creating a complete tone generator with speaker output. The 555 generates the tone while the LM386 provides sufficient power to drive a speaker audibly. This demonstrates building complete audio systems from modular blocks.

You'll learn about signal chain design, coupling stages together, setting appropriate signal levels between blocks, and creating self-contained audio circuits. The project teaches system thinking - combining oscillators, amplifiers, and outputs into functional audio devices.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:250,y:180,id:'ic1'},
                    {t:'lm386',x:420,y:200,id:'amp1'}, {t:'r',x:180,y:100,v:'10kŒ©',id:'r1'},
                    {t:'r',x:320,y:100,v:'100kŒ©',id:'r2'}, {t:'c',x:320,y:280,v:'0.1¬µF',id:'c1'},
                    {t:'c',x:350,y:200,v:'10¬µF',id:'c2'}, {t:'c',x:520,y:200,v:'100¬µF',id:'c3'},
                    {t:'spk',x:640,y:200,id:'sp1'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','amp1','vcc','power'],
                    ['ic1','gnd','g','in','ground'], ['amp1','gnd','g','in','ground'],
                    ['ic1','out','c2','in','signal'], ['c2','out','amp1','in','signal'],
                    ['amp1','out','c3','in','signal'], ['c3','out','sp1','in','signal'],
                    ['sp1','out','g','in','ground']
                ]},

                // Exp 6: Audio Signal Booster
                { name: "Audio Signal Booster", desc: `This practical amplifier circuit boosts weak audio signals from sources like phones or MP3 players to higher levels suitable for driving speakers or feeding other equipment. The LM386 provides clean amplification with minimal distortion when properly designed. This teaches audio signal conditioning and level matching.

You'll learn about input impedance considerations, preventing distortion through proper bias, implementing volume controls, and achieving maximum clean output power. The circuit can include tone controls and demonstrates professional audio design principles applicable to preamps and audio interfaces.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:320,y:200,id:'amp1'},
                    {t:'pot',x:200,y:150,v:'10k',id:'pot1'}, {t:'c',x:250,y:200,v:'10¬µF',id:'c1'},
                    {t:'c',x:420,y:200,v:'100¬µF',id:'c2'}, {t:'c',x:320,y:120,v:'10¬µF',id:'c3'},
                    {t:'spk',x:540,y:200,id:'sp1'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','amp1','vcc','power'], ['amp1','gnd','g','in','ground'],
                    ['pot1','out','c1','in','signal'], ['c1','out','amp1','in','signal'],
                    ['amp1','out','c2','in','signal'], ['c2','out','sp1','in','signal'],
                    ['sp1','out','g','in','ground'], ['c3','in','amp1','gain','signal'],
                    ['c3','out','g','in','ground']
                ]},

                // Exp 7: Doorbell Circuit
                { name: "Doorbell Circuit", desc: `This functional sound effect uses a 555 timer triggered by a button press to generate classic doorbell tones. The circuit typically generates a two-tone "ding-dong" sound by switching between frequencies, with automatic shutoff after activation. This demonstrates monostable operation and creating pleasant notification sounds.

You'll learn about 555 monostable mode, creating timed sequences, implementing envelope shaping for natural attack/decay, and designing user-friendly audio alerts. The circuit can be customized with different tones and patterns, teaching practical sound design for appliances.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'btn',x:180,y:180,id:'btn1'},
                    {t:'555',x:300,y:180,id:'ic1'}, {t:'lm386',x:470,y:200,id:'amp1'},
                    {t:'r',x:230,y:100,v:'10kŒ©',id:'r1'}, {t:'r',x:370,y:100,v:'47kŒ©',id:'r2'},
                    {t:'c',x:370,y:280,v:'1¬µF',id:'c1'}, {t:'c',x:400,y:200,v:'10¬µF',id:'c2'},
                    {t:'spk',x:590,y:200,id:'sp1'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','amp1','vcc','power'],
                    ['btn1','in','ic1','trig','signal'], ['btn1','out','g','in','ground'],
                    ['ic1','out','c2','in','signal'], ['c2','out','amp1','in','signal'],
                    ['amp1','out','sp1','in','signal'], ['sp1','out','g','in','ground'],
                    ['ic1','gnd','g','in','ground'], ['amp1','gnd','g','in','ground']
                ]},

                // Exp 8: Metronome
                { name: "Metronome (Adjustable Tempo)", desc: `This musician's tool generates precise rhythmic clicks at adjustable tempos using a 555 timer and LM386 amplifier. A potentiometer adjusts the tempo from largo to presto, while the circuit generates sharp clicks for clear beat indication. This demonstrates precision timing and audio pulse generation.

You'll learn about generating rhythmic patterns, calculating timing components for musical tempos (BPM = 60 / period), creating acoustically distinct clicks, and implementing tempo stability. The circuit can include accent beats, subdivisions, and demonstrates timing accuracy important for musical applications.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:280,y:180,id:'ic1'},
                    {t:'pot',x:200,y:100,v:'1M',id:'pot1'}, {t:'r',x:360,y:100,v:'1kŒ©',id:'r1'},
                    {t:'c',x:350,y:280,v:'10¬µF',id:'c1'}, {t:'led',x:450,y:180,id:'l1'},
                    {t:'spk',x:520,y:250,id:'sp1'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['ic1','gnd','g','in','ground'],
                    ['pot1','in','ic1','vcc','power'], ['pot1','out','ic1','dis','signal'],
                    ['ic1','dis','ic1','thr','signal'], ['ic1','thr','c1','in','signal'],
                    ['c1','out','g','in','ground'], ['ic1','out','r1','in','signal'],
                    ['r1','out','l1','a','signal'], ['r1','out','sp1','in','signal'],
                    ['l1','c','g','in','ground'], ['sp1','out','g','in','ground']
                ]},

                // Exp 9: Electronic Organ (3 Notes)
                { name: "Electronic Organ (3 Notes)", desc: `This simple musical instrument uses three 555 timers tuned to different musical notes (typically C, E, G - a major chord). Three buttons activate individual oscillators, allowing you to play single notes or chords. An LM386 mixes and amplifies the signals. This demonstrates basic electronic music synthesis and multiple oscillator coordination.

You'll learn about musical note frequencies, tuning oscillators to specific pitches, mixing multiple audio sources, and creating playable instruments. The circuit teaches musical intervals, chord construction, and introduces polyphonic synthesis concepts.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:240,y:120,id:'ic1'},
                    {t:'555',x:240,y:240,id:'ic2'}, {t:'555',x:240,y:360,id:'ic3'},
                    {t:'btn',x:150,y:120,id:'btn1'}, {t:'btn',x:150,y:240,id:'btn2'},
                    {t:'btn',x:150,y:360,id:'btn3'}, {t:'r',x:320,y:120,v:'10kŒ©',id:'r1'},
                    {t:'r',x:320,y:240,v:'15kŒ©',id:'r2'}, {t:'r',x:320,y:360,v:'22kŒ©',id:'r3'},
                    {t:'c',x:390,y:120,v:'0.1¬µF',id:'c1'}, {t:'c',x:390,y:240,v:'0.1¬µF',id:'c2'},
                    {t:'c',x:390,y:360,v:'0.1¬µF',id:'c3'}, {t:'spk',x:500,y:240,id:'sp1'},
                    {t:'gnd',x:100,y:450,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','ic2','vcc','power'],
                    ['b','pos','ic3','vcc','power'], ['btn1','in','ic1','rst','signal'],
                    ['btn2','in','ic2','rst','signal'], ['btn3','in','ic3','rst','signal'],
                    ['ic1','out','sp1','in','signal'], ['ic2','out','sp1','in','signal'],
                    ['ic3','out','sp1','in','signal'], ['sp1','out','g','in','ground']
                ]},

                // Exp 10: Morse Code Trainer
                { name: "Morse Code Trainer", desc: `This educational circuit generates Morse code audio tones for learning telegraphy. A button (or automatic sequencer) keys the tone on and off in Morse patterns. The circuit teaches proper dit/dah ratios and spacing. This demonstrates keyed tone generation and educational electronics.

You'll learn about implementing proper Morse timing (dit = 1 unit, dah = 3 units, letter space = 3 units, word space = 7 units), creating clean keying without clicks, and designing practice tools. The circuit can include automatic pattern generation for learning.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'btn',x:180,y:200,id:'btn1'},
                    {t:'555',x:300,y:180,id:'ic1'}, {t:'lm386',x:450,y:200,id:'amp1'},
                    {t:'r',x:230,y:120,v:'10kŒ©',id:'r1'}, {t:'r',x:370,y:120,v:'33kŒ©',id:'r2'},
                    {t:'c',x:370,y:260,v:'0.1¬µF',id:'c1'}, {t:'c',x:390,y:200,v:'10¬µF',id:'c2'},
                    {t:'led',x:300,y:300,id:'l1'}, {t:'spk',x:570,y:200,id:'sp1'},
                    {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','amp1','vcc','power'],
                    ['btn1','in','ic1','trig','signal'], ['btn1','out','g','in','ground'],
                    ['ic1','out','c2','in','signal'], ['c2','out','amp1','in','signal'],
                    ['ic1','out','l1','a','signal'], ['l1','c','g','in','ground'],
                    ['amp1','out','sp1','in','signal'], ['sp1','out','g','in','ground']
                ]},

                // Exp 11: Police Siren
                { name: "Police Siren (Modulating)", desc: `This realistic siren uses voltage-controlled modulation to create sweeping police/emergency vehicle sounds. A low-frequency 555 oscillator modulates a higher-frequency audio oscillator, creating the characteristic rising and falling pitch. This demonstrates complex sound synthesis and modulation techniques.

You'll learn about creating convincing sound effects, implementing smooth frequency sweeps, controlling modulation depth, and designing recognizable audio alerts. The circuit introduces FM synthesis concepts used in more complex synthesizers.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:250,y:150,id:'ic1'},
                    {t:'555',x:400,y:250,id:'ic2'}, {t:'lm386',x:550,y:200,id:'amp1'},
                    {t:'r',x:180,y:100,v:'47kŒ©',id:'r1'}, {t:'r',x:330,y:100,v:'10kŒ©',id:'r2'},
                    {t:'r',x:480,y:180,v:'22kŒ©',id:'r3'}, {t:'c',x:320,y:200,v:'10¬µF',id:'c1'},
                    {t:'c',x:470,y:300,v:'0.1¬µF',id:'c2'}, {t:'c',x:490,y:200,v:'10¬µF',id:'c3'},
                    {t:'spk',x:670,y:200,id:'sp1'}, {t:'gnd',x:100,y:380,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','ic2','vcc','power'],
                    ['b','pos','amp1','vcc','power'], ['ic1','out','ic2','cv','signal'],
                    ['ic2','out','c3','in','signal'], ['c3','out','amp1','in','signal'],
                    ['amp1','out','sp1','in','signal'], ['sp1','out','g','in','ground']
                ]},

                // Exp 12: Alarm Clock Buzzer
                { name: "Alarm Clock Buzzer", desc: `This annoying but effective alarm sound uses a 555 to generate pulsed tones - loud bursts separated by silence - creating an attention-getting alarm pattern. The circuit can implement increasing intensity or changing patterns. This demonstrates practical alert sound design.

You'll learn about creating psychoacoustically effective alarms, implementing rhythmic patterns, controlling loudness, and designing sounds that wake people effectively without being unbearable. The circuit teaches practical considerations for alert sound design.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'btn',x:180,y:150,id:'btn1'},
                    {t:'btn',x:180,y:250,id:'btn2'}, {t:'555',x:300,y:180,id:'ic1'},
                    {t:'lm386',x:450,y:200,id:'amp1'}, {t:'r',x:230,y:100,v:'10kŒ©',id:'r1'},
                    {t:'r',x:370,y:100,v:'68kŒ©',id:'r2'}, {t:'c',x:370,y:280,v:'1¬µF',id:'c1'},
                    {t:'c',x:390,y:200,v:'10¬µF',id:'c2'}, {t:'led',x:500,y:120,id:'l1'},
                    {t:'spk',x:570,y:250,id:'sp1'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','amp1','vcc','power'],
                    ['btn1','in','ic1','rst','signal'], ['btn2','in','ic1','trig','signal'],
                    ['ic1','out','c2','in','signal'], ['c2','out','amp1','in','signal'],
                    ['amp1','out','sp1','in','signal'], ['ic1','out','l1','a','signal']
                ]},

                // Exp 13: Touch-Activated Sound
                { name: "Touch-Activated Sound", desc: `This interactive circuit uses touch-sensitive pads connected to high-impedance inputs to trigger 555-based sound generation. Touching the pad completes a circuit or changes capacitance, activating the oscillator. This demonstrates human interface sensors and interactive electronics.

You'll learn about capacitive sensing, high-impedance input design, implementing touch sensitivity controls, and creating interactive musical instruments. The circuit can implement multiple touch points with different pitches, teaching DIY instrument design.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'touch',x:150,y:180,id:'touch1'},
                    {t:'555',x:280,y:180,id:'ic1'}, {t:'lm386',x:430,y:200,id:'amp1'},
                    {t:'r',x:200,y:120,v:'1MŒ©',id:'r1'}, {t:'r',x:350,y:120,v:'22kŒ©',id:'r2'},
                    {t:'c',x:350,y:260,v:'0.1¬µF',id:'c1'}, {t:'c',x:370,y:200,v:'10¬µF',id:'c2'},
                    {t:'c',x:200,y:240,v:'10¬µF',id:'c3'}, {t:'spk',x:550,y:200,id:'sp1'},
                    {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','amp1','vcc','power'],
                    ['touch1','out','r1','in','signal'], ['r1','out','ic1','trig','signal'],
                    ['ic1','out','c2','in','signal'], ['c2','out','amp1','in','signal'],
                    ['amp1','out','sp1','in','signal']
                ]},

                // Exp 14: Light-Controlled Theremin
                { name: "Light-Controlled Theremin", desc: `This expressive instrument uses an LDR (light-dependent resistor) to control oscillator pitch, creating a simple theremin-like device. Moving your hand over the LDR changes light levels, varying pitch continuously. An LM386 amplifies the result for speaker output. This demonstrates analog control of audio parameters and creates an expressive electronic instrument.

You'll learn about voltage-controlled oscillators (VCOs), implementing smooth pitch control, creating musically useful control ranges, and designing expressive interfaces. The circuit teaches principles of continuous controllers and analog synthesis, applicable to creating custom instruments.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'ldr',x:150,y:180,id:'ldr1'},
                    {t:'555',x:300,y:180,id:'ic1'}, {t:'lm386',x:470,y:200,id:'amp1'},
                    {t:'r',x:220,y:120,v:'10kŒ©',id:'r1'}, {t:'pot',x:370,y:120,v:'100k',id:'pot1'},
                    {t:'c',x:370,y:280,v:'0.1¬µF',id:'c1'}, {t:'c',x:400,y:200,v:'10¬µF',id:'c2'},
                    {t:'spk',x:590,y:200,id:'sp1'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','amp1','vcc','power'],
                    ['ldr1','out','r1','in','signal'], ['r1','out','ic1','cv','signal'],
                    ['pot1','out','ic1','thr','signal'], ['ic1','out','c2','in','signal'],
                    ['c2','out','amp1','in','signal'], ['amp1','out','sp1','in','signal']
                ]},

                // Exp 15: Dual-Channel Mixer
                { name: "Dual-Channel Mixer", desc: `This audio mixer combines two separate audio inputs into a single output using passive or active mixing with LM386 stages. Each channel has level control, and the mixed signal drives a speaker. This demonstrates audio mixing principles and multi-source audio systems.

You'll learn about mixer design, preventing interaction between inputs, implementing level controls, and achieving clean mixing without distortion. The circuit teaches signal summing, impedance management, and creating flexible audio routing - fundamental to all multi-source audio systems.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:280,y:150,id:'amp1'},
                    {t:'lm386',x:280,y:280,id:'amp2'}, {t:'pot',x:180,y:150,v:'10k',id:'pot1'},
                    {t:'pot',x:180,y:280,v:'10k',id:'pot2'}, {t:'c',x:220,y:150,v:'10¬µF',id:'c1'},
                    {t:'c',x:220,y:280,v:'10¬µF',id:'c2'}, {t:'r',x:360,y:200,v:'10kŒ©',id:'r1'},
                    {t:'c',x:420,y:200,v:'100¬µF',id:'c3'}, {t:'spk',x:540,y:200,id:'sp1'},
                    {t:'gnd',x:100,y:380,id:'g'}
                ], wires:[
                    ['b','pos','amp1','vcc','power'], ['b','pos','amp2','vcc','power'],
                    ['pot1','out','c1','in','signal'], ['c1','out','amp1','in','signal'],
                    ['pot2','out','c2','in','signal'], ['c2','out','amp2','in','signal'],
                    ['amp1','out','r1','in','signal'], ['amp2','out','r1','in','signal'],
                    ['r1','out','c3','in','signal'], ['c3','out','sp1','in','signal']
                ]},

                // Exp 16: Echo Effect Generator
                { name: "Echo Effect Generator", desc: `This audio effect creates echo/delay using analog delay chips (like PT2399) or simple feedback loops. The original signal combines with delayed copies, creating room ambience or rhythmic echoes. This demonstrates time-based effects and feedback systems.

You'll learn about analog delay techniques, implementing feedback for repeating echoes, controlling delay time and depth, and preventing oscillation. The circuit teaches fundamental delay/reverb concepts used in all music production.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:300,y:180,id:'amp1'},
                    {t:'lm386',x:500,y:180,id:'amp2'}, {t:'c',x:220,y:180,v:'10¬µF',id:'c1'},
                    {t:'c',x:400,y:120,v:'100¬µF',id:'c2'}, {t:'r',x:400,y:240,v:'100kŒ©',id:'r1'},
                    {t:'c',x:430,y:180,v:'10¬µF',id:'c3'}, {t:'c',x:580,y:180,v:'100¬µF',id:'c4'},
                    {t:'spk',x:680,y:180,id:'sp1'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','amp1','vcc','power'], ['b','pos','amp2','vcc','power'],
                    ['c1','in','amp1','in','signal'], ['amp1','out','c2','in','signal'],
                    ['c2','out','r1','in','signal'], ['r1','out','c3','in','signal'],
                    ['c3','out','amp2','in','signal'], ['amp2','out','c4','in','signal'],
                    ['c4','out','sp1','in','signal']
                ]},

                // Exp 17: 3-Tone Doorbell
                { name: "3-Tone Doorbell (Sequential)", desc: `This advanced doorbell generates a three-note sequence (like Westminster chimes) using multiple 555 timers and sequencing logic. The circuit plays a recognizable melody when triggered, providing pleasant door notification. This demonstrates sequential tone generation and creating musical patterns.

You'll learn about implementing note sequences, creating pleasing melodies, controlling note durations, and designing memorable notification sounds. The circuit can be reprogrammed for different melodies, teaching musical pattern generation.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'btn',x:160,y:200,id:'btn1'},
                    {t:'555',x:270,y:120,id:'ic1'}, {t:'555',x:270,y:220,id:'ic2'},
                    {t:'555',x:270,y:320,id:'ic3'}, {t:'lm386',x:450,y:220,id:'amp1'},
                    {t:'r',x:210,y:80,v:'10kŒ©',id:'r1'}, {t:'r',x:210,y:180,v:'15kŒ©',id:'r2'},
                    {t:'r',x:210,y:280,v:'22kŒ©',id:'r3'}, {t:'c',x:340,y:120,v:'1¬µF',id:'c1'},
                    {t:'c',x:340,y:220,v:'1¬µF',id:'c2'}, {t:'c',x:340,y:320,v:'1¬µF',id:'c3'},
                    {t:'spk',x:570,y:220,id:'sp1'}, {t:'gnd',x:100,y:400,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','ic2','vcc','power'],
                    ['b','pos','ic3','vcc','power'], ['b','pos','amp1','vcc','power'],
                    ['btn1','in','ic1','trig','signal'], ['ic1','out','ic2','trig','signal'],
                    ['ic2','out','ic3','trig','signal'], ['ic1','out','amp1','in','signal'],
                    ['ic2','out','amp1','in','signal'], ['ic3','out','amp1','in','signal'],
                    ['amp1','out','sp1','in','signal']
                ]},

                // Exp 18: Electronic Drum
                { name: "Electronic Drum", desc: `This percussion synthesizer uses 555 circuits to create drum-like sounds - brief bursts of filtered noise or rapidly decaying tones. Triggering circuits create kick, snare, and hi-hat sounds. This demonstrates percussion synthesis and percussive envelope shaping.

You'll learn about creating percussive envelopes (fast attack, fast decay), noise generation for snare sounds, filtering for tone shaping, and synthesizing realistic drum sounds. The circuit teaches principles used in classic drum machines.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'btn',x:180,y:180,id:'btn1'},
                    {t:'555',x:280,y:160,id:'ic1'}, {t:'555',x:280,y:260,id:'ic2'},
                    {t:'lm386',x:450,y:210,id:'amp1'}, {t:'r',x:220,y:110,v:'1kŒ©',id:'r1'},
                    {t:'r',x:350,y:110,v:'22kŒ©',id:'r2'}, {t:'c',x:350,y:210,v:'0.1¬µF',id:'c1'},
                    {t:'c',x:350,y:310,v:'10¬µF',id:'c2'}, {t:'c',x:390,y:210,v:'10¬µF',id:'c3'},
                    {t:'spk',x:570,y:210,id:'sp1'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','ic2','vcc','power'],
                    ['b','pos','amp1','vcc','power'], ['btn1','in','ic1','trig','signal'],
                    ['ic1','out','ic2','cv','signal'], ['ic2','out','c3','in','signal'],
                    ['c3','out','amp1','in','signal'], ['amp1','out','sp1','in','signal']
                ]},

                // Exp 19: Voice Amplifier
                { name: "Voice Amplifier (Microphone)", desc: `This practical amplifier circuit takes signals from an electret microphone and amplifies them for speaker output, creating a simple PA system or voice amplifier. Proper biasing of the microphone and multi-stage amplification provide clear voice reproduction. This demonstrates small-signal amplification and microphone interfacing.

You'll learn about microphone biasing, high-gain amplification without feedback oscillation, frequency response for voice clarity, and creating usable voice systems. The circuit is practical for assistive listening devices or simple intercoms.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:320,y:200,id:'amp1'},
                    {t:'pot',x:220,y:150,v:'10k',id:'pot1'}, {t:'c',x:260,y:200,v:'10¬µF',id:'c1'},
                    {t:'c',x:420,y:200,v:'100¬µF',id:'c2'}, {t:'c',x:320,y:120,v:'10¬µF',id:'c3'},
                    {t:'r',x:220,y:250,v:'10kŒ©',id:'r1'}, {t:'spk',x:540,y:200,id:'sp1'},
                    {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','amp1','vcc','power'], ['pot1','out','c1','in','signal'],
                    ['c1','out','amp1','in','signal'], ['amp1','out','c2','in','signal'],
                    ['c2','out','sp1','in','signal'], ['c3','in','amp1','gain','signal']
                ]},

                // Exp 20: Guitar Amplifier
                { name: "Guitar Amplifier (Tone Control)", desc: `This musical instrument amplifier includes tone controls (bass, treble) for shaping electric guitar sounds. Multiple LM386 stages provide sufficient gain, while RC filter networks implement equalization. This demonstrates audio EQ and designing for specific instruments.

You'll learn about tone control circuits, implementing bass/treble boost/cut, preventing feedback in high-gain systems, and achieving good audio quality for music. The circuit teaches active EQ design and musical tone shaping.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:350,y:200,id:'amp1'},
                    {t:'pot',x:220,y:150,v:'100k',id:'pot1'}, {t:'pot',x:450,y:150,v:'10k',id:'pot2'},
                    {t:'c',x:270,y:200,v:'10¬µF',id:'c1'}, {t:'c',x:420,y:120,v:'0.1¬µF',id:'c2'},
                    {t:'c',x:520,y:200,v:'100¬µF',id:'c3'}, {t:'r',x:420,y:260,v:'10kŒ©',id:'r1'},
                    {t:'spk',x:640,y:200,id:'sp1'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','amp1','vcc','power'], ['pot1','out','c1','in','signal'],
                    ['c1','out','amp1','in','signal'], ['amp1','out','pot2','in','signal'],
                    ['pot2','out','c3','in','signal'], ['c3','out','sp1','in','signal']
                ]},

                // Exp 21: Intercom System
                { name: "Intercom System (2-Way)", desc: `This communication system implements two-way audio using microphones and speakers at both ends. Push-to-talk switching or VOX (voice-operated switching) controls directionality. This demonstrates full-duplex audio systems and practical communication circuits.

You'll learn about implementing talk/listen modes, preventing feedback (howling), designing clear voice circuits, and creating practical communication systems. The circuit teaches principles applicable to intercoms, walkie-talkies, and communication devices.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:280,y:150,id:'amp1'},
                    {t:'lm386',x:280,y:300,id:'amp2'}, {t:'btn',x:180,y:150,id:'btn1'},
                    {t:'btn',x:180,y:300,id:'btn2'}, {t:'c',x:220,y:150,v:'10¬µF',id:'c1'},
                    {t:'c',x:220,y:300,v:'10¬µF',id:'c2'}, {t:'spk',x:400,y:150,id:'sp1'},
                    {t:'spk',x:400,y:300,id:'sp2'}, {t:'gnd',x:100,y:400,id:'g'}
                ], wires:[
                    ['b','pos','amp1','vcc','power'], ['b','pos','amp2','vcc','power'],
                    ['btn1','in','sp2','in','signal'], ['btn1','out','c1','in','signal'],
                    ['btn2','in','sp1','in','signal'], ['btn2','out','c2','in','signal'],
                    ['c1','out','amp1','in','signal'], ['c2','out','amp2','in','signal'],
                    ['amp1','out','sp1','in','signal'], ['amp2','out','sp2','in','signal']
                ]},

                // Exp 22: Baby Monitor
                { name: "Baby Monitor (Sensitivity Control)", desc: `This audio monitoring system includes a sensitive microphone amplifier that only transmits when sound exceeds a threshold, conserving power and reducing noise. LED indicators show activity. This demonstrates voice-activated switching and low-noise amplification.

You'll learn about implementing threshold detection, designing high-sensitivity amplifiers, reducing background noise, and creating practical monitoring devices. The circuit teaches audio level detection and designing baby-safe electronics.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:300,y:180,id:'amp1'},
                    {t:'lm386',x:480,y:200,id:'amp2'}, {t:'pot',x:200,y:150,v:'100k',id:'pot1'},
                    {t:'c',x:250,y:180,v:'10¬µF',id:'c1'}, {t:'c',x:400,y:190,v:'10¬µF',id:'c2'},
                    {t:'c',x:560,y:200,v:'100¬µF',id:'c3'}, {t:'led',x:380,y:120,id:'l1'},
                    {t:'spk',x:660,y:200,id:'sp1'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','amp1','vcc','power'], ['b','pos','amp2','vcc','power'],
                    ['pot1','out','c1','in','signal'], ['c1','out','amp1','in','signal'],
                    ['amp1','out','c2','in','signal'], ['amp1','out','l1','a','signal'],
                    ['c2','out','amp2','in','signal'], ['amp2','out','c3','in','signal'],
                    ['c3','out','sp1','in','signal']
                ]},

                // Exp 23: Sound-Activated Switch
                { name: "Sound-Activated Switch", desc: `This audio trigger circuit uses a microphone and comparator to detect sounds and activate relays or other devices. Clapping or speaking triggers actions like lights or appliances. This demonstrates audio level detection and creating sound-reactive systems.

You'll learn about envelope detection, setting trigger thresholds, implementing timing circuits for sustained activation, and debouncing audio triggers. The circuit enables hands-free control and sound-reactive installations.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:280,y:180,id:'amp1'},
                    {t:'lm358',x:420,y:200,id:'cmp1'}, {t:'c',x:220,y:180,v:'10¬µF',id:'c1'},
                    {t:'pot',x:360,y:120,v:'10k',id:'pot1'}, {t:'r',x:360,y:260,v:'10kŒ©',id:'r1'},
                    {t:'led',x:520,y:180,id:'l1'}, {t:'trans',x:560,y:240,id:'q1'},
                    {t:'r',x:520,y:240,v:'1kŒ©',id:'r2'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','amp1','vcc','power'], ['b','pos','cmp1','vcc','power'],
                    ['c1','out','amp1','in','signal'], ['amp1','out','cmp1','in','signal'],
                    ['pot1','out','cmp1','ref','signal'], ['cmp1','out','r2','in','signal'],
                    ['r2','out','q1','b','signal'], ['q1','c','l1','a','signal']
                ]},

                // Exp 24: Frequency Divider
                { name: "Frequency Divider (Harmonics)", desc: `This synthesis circuit uses 555 timers or flip-flops to divide frequencies, creating subharmonics and octaves. An oscillator at 440Hz (A4) can be divided to 220Hz (A3), 110Hz (A2), creating rich harmonic content. This demonstrates frequency synthesis and creating organ-like sounds.

You'll learn about frequency division using digital counters, creating harmonic series, mixing divided outputs for complex timbres, and implementing subtractive synthesis building blocks. The circuit teaches fundamental synthesis techniques.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:220,y:150,id:'ic1'},
                    {t:'555',x:220,y:260,id:'ic2'}, {t:'555',x:220,y:370,id:'ic3'},
                    {t:'lm386',x:400,y:260,id:'amp1'}, {t:'r',x:160,y:100,v:'10kŒ©',id:'r1'},
                    {t:'c',x:290,y:150,v:'0.1¬µF',id:'c1'}, {t:'c',x:290,y:260,v:'0.1¬µF',id:'c2'},
                    {t:'c',x:290,y:370,v:'0.1¬µF',id:'c3'}, {t:'c',x:340,y:260,v:'10¬µF',id:'c4'},
                    {t:'spk',x:520,y:260,id:'sp1'}, {t:'gnd',x:100,y:450,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','ic2','vcc','power'],
                    ['b','pos','ic3','vcc','power'], ['b','pos','amp1','vcc','power'],
                    ['ic1','out','ic2','trig','signal'], ['ic2','out','ic3','trig','signal'],
                    ['ic1','out','c4','in','signal'], ['ic2','out','c4','in','signal'],
                    ['ic3','out','c4','in','signal'], ['c4','out','amp1','in','signal'],
                    ['amp1','out','sp1','in','signal']
                ]},

                // Exp 25: 8-Note Keyboard
                { name: "8-Note Keyboard (Octave)", desc: `This electronic instrument uses eight 555 oscillators tuned to a complete musical octave (C, D, E, F, G, A, B, C). Push buttons select notes, and an LM386 provides amplification. This demonstrates building playable electronic instruments and musical tuning.

You'll learn about calculating frequencies for musical scales, implementing polyphonic capability (multiple notes simultaneously), creating reliable key switching, and designing ergonomic musical interfaces. The circuit can be expanded to multiple octaves or different scales.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'gnd',x:100,y:480,id:'g'},
                    // 8 x 555 timers (one per note)
                    {t:'555',x:220,y:100,id:'ic1'}, {t:'555',x:320,y:100,id:'ic2'},
                    {t:'555',x:420,y:100,id:'ic3'}, {t:'555',x:520,y:100,id:'ic4'},
                    {t:'555',x:220,y:240,id:'ic5'}, {t:'555',x:320,y:240,id:'ic6'},
                    {t:'555',x:420,y:240,id:'ic7'}, {t:'555',x:520,y:240,id:'ic8'},
                    // Buttons (piano keys)
                    {t:'btn',x:160,y:100,id:'btn1'}, {t:'btn',x:160,y:130,id:'btn2'},
                    {t:'btn',x:160,y:160,id:'btn3'}, {t:'btn',x:160,y:190,id:'btn4'},
                    {t:'btn',x:160,y:240,id:'btn5'}, {t:'btn',x:160,y:270,id:'btn6'},
                    {t:'btn',x:160,y:300,id:'btn7'}, {t:'btn',x:160,y:330,id:'btn8'},
                    // Frequency-setting resistors (different value for each note)
                    {t:'r',x:220,y:50,v:'12kŒ©',id:'r1'}, {t:'r',x:320,y:50,v:'11kŒ©',id:'r2'},
                    {t:'r',x:420,y:50,v:'10kŒ©',id:'r3'}, {t:'r',x:520,y:50,v:'9.1kŒ©',id:'r4'},
                    {t:'r',x:220,y:190,v:'8.2kŒ©',id:'r5'}, {t:'r',x:320,y:190,v:'7.5kŒ©',id:'r6'},
                    {t:'r',x:420,y:190,v:'6.8kŒ©',id:'r7'}, {t:'r',x:520,y:190,v:'6.2kŒ©',id:'r8'},
                    // Timing resistors (1kŒ© each)
                    {t:'r',x:290,y:80,v:'1kŒ©',id:'r9'}, {t:'r',x:390,y:80,v:'1kŒ©',id:'r10'},
                    {t:'r',x:490,y:80,v:'1kŒ©',id:'r11'}, {t:'r',x:590,y:80,v:'1kŒ©',id:'r12'},
                    {t:'r',x:290,y:220,v:'1kŒ©',id:'r13'}, {t:'r',x:390,y:220,v:'1kŒ©',id:'r14'},
                    {t:'r',x:490,y:220,v:'1kŒ©',id:'r15'}, {t:'r',x:590,y:220,v:'1kŒ©',id:'r16'},
                    // Timing capacitors (0.1¬µF each)
                    {t:'c',x:290,y:140,v:'0.1¬µF',id:'c1'}, {t:'c',x:390,y:140,v:'0.1¬µF',id:'c2'},
                    {t:'c',x:490,y:140,v:'0.1¬µF',id:'c3'}, {t:'c',x:590,y:140,v:'0.1¬µF',id:'c4'},
                    {t:'c',x:290,y:280,v:'0.1¬µF',id:'c5'}, {t:'c',x:390,y:280,v:'0.1¬µF',id:'c6'},
                    {t:'c',x:490,y:280,v:'0.1¬µF',id:'c7'}, {t:'c',x:590,y:280,v:'0.1¬µF',id:'c8'},
                    // Mixing resistors (10kŒ© each to prevent loading)
                    {t:'r',x:640,y:100,v:'10kŒ©',id:'rm1'}, {t:'r',x:640,y:130,v:'10kŒ©',id:'rm2'},
                    {t:'r',x:640,y:160,v:'10kŒ©',id:'rm3'}, {t:'r',x:640,y:190,v:'10kŒ©',id:'rm4'},
                    {t:'r',x:640,y:240,v:'10kŒ©',id:'rm5'}, {t:'r',x:640,y:270,v:'10kŒ©',id:'rm6'},
                    {t:'r',x:640,y:300,v:'10kŒ©',id:'rm7'}, {t:'r',x:640,y:330,v:'10kŒ©',id:'rm8'},
                    // Amplifier and output
                    {t:'lm386',x:740,y:200,id:'amp1'}, {t:'c',x:700,y:200,v:'10¬µF',id:'c9'},
                    {t:'c',x:820,y:200,v:'100¬µF',id:'c10'}, {t:'spk',x:920,y:200,id:'sp1'}
                ], wires:[
                    // Power distribution
                    ['b','pos','ic1','vcc','power'], ['b','pos','ic2','vcc','power'],
                    ['b','pos','ic3','vcc','power'], ['b','pos','ic4','vcc','power'],
                    ['b','pos','ic5','vcc','power'], ['b','pos','ic6','vcc','power'],
                    ['b','pos','ic7','vcc','power'], ['b','pos','ic8','vcc','power'],
                    ['b','pos','amp1','vcc','power'],
                    // Ground connections
                    ['ic1','gnd','g','in','ground'], ['ic2','gnd','g','in','ground'],
                    ['ic3','gnd','g','in','ground'], ['ic4','gnd','g','in','ground'],
                    ['ic5','gnd','g','in','ground'], ['ic6','gnd','g','in','ground'],
                    ['ic7','gnd','g','in','ground'], ['ic8','gnd','g','in','ground'],
                    ['amp1','gnd','g','in','ground'], ['sp1','out','g','in','ground'],
                    // 555 #1 (Note C) - frequency set by r1+r9+c1
                    ['r1','in','ic1','vcc','power'], ['r1','out','r9','in','signal'],
                    ['r9','out','ic1','dis','signal'], ['ic1','dis','ic1','thr','signal'],
                    ['ic1','thr','c1','in','signal'], ['c1','out','g','in','ground'],
                    ['btn1','in','ic1','rst','signal'], ['btn1','out','g','in','ground'],
                    ['ic1','out','rm1','in','signal'],
                    // 555 #2 (Note D)
                    ['r2','in','ic2','vcc','power'], ['r2','out','r10','in','signal'],
                    ['r10','out','ic2','dis','signal'], ['ic2','dis','ic2','thr','signal'],
                    ['ic2','thr','c2','in','signal'], ['c2','out','g','in','ground'],
                    ['btn2','in','ic2','rst','signal'], ['btn2','out','g','in','ground'],
                    ['ic2','out','rm2','in','signal'],
                    // 555 #3 (Note E)
                    ['r3','in','ic3','vcc','power'], ['r3','out','r11','in','signal'],
                    ['r11','out','ic3','dis','signal'], ['ic3','dis','ic3','thr','signal'],
                    ['ic3','thr','c3','in','signal'], ['c3','out','g','in','ground'],
                    ['btn3','in','ic3','rst','signal'], ['btn3','out','g','in','ground'],
                    ['ic3','out','rm3','in','signal'],
                    // 555 #4 (Note F)
                    ['r4','in','ic4','vcc','power'], ['r4','out','r12','in','signal'],
                    ['r12','out','ic4','dis','signal'], ['ic4','dis','ic4','thr','signal'],
                    ['ic4','thr','c4','in','signal'], ['c4','out','g','in','ground'],
                    ['btn4','in','ic4','rst','signal'], ['btn4','out','g','in','ground'],
                    ['ic4','out','rm4','in','signal'],
                    // 555 #5 (Note G)
                    ['r5','in','ic5','vcc','power'], ['r5','out','r13','in','signal'],
                    ['r13','out','ic5','dis','signal'], ['ic5','dis','ic5','thr','signal'],
                    ['ic5','thr','c5','in','signal'], ['c5','out','g','in','ground'],
                    ['btn5','in','ic5','rst','signal'], ['btn5','out','g','in','ground'],
                    ['ic5','out','rm5','in','signal'],
                    // 555 #6 (Note A)
                    ['r6','in','ic6','vcc','power'], ['r6','out','r14','in','signal'],
                    ['r14','out','ic6','dis','signal'], ['ic6','dis','ic6','thr','signal'],
                    ['ic6','thr','c6','in','signal'], ['c6','out','g','in','ground'],
                    ['btn6','in','ic6','rst','signal'], ['btn6','out','g','in','ground'],
                    ['ic6','out','rm6','in','signal'],
                    // 555 #7 (Note B)
                    ['r7','in','ic7','vcc','power'], ['r7','out','r15','in','signal'],
                    ['r15','out','ic7','dis','signal'], ['ic7','dis','ic7','thr','signal'],
                    ['ic7','thr','c7','in','signal'], ['c7','out','g','in','ground'],
                    ['btn7','in','ic7','rst','signal'], ['btn7','out','g','in','ground'],
                    ['ic7','out','rm7','in','signal'],
                    // 555 #8 (Note C high)
                    ['r8','in','ic8','vcc','power'], ['r8','out','r16','in','signal'],
                    ['r16','out','ic8','dis','signal'], ['ic8','dis','ic8','thr','signal'],
                    ['ic8','thr','c8','in','signal'], ['c8','out','g','in','ground'],
                    ['btn8','in','ic8','rst','signal'], ['btn8','out','g','in','ground'],
                    ['ic8','out','rm8','in','signal'],
                    // Mix all 8 outputs together through mixing resistors
                    ['rm1','out','c9','in','signal'], ['rm2','out','c9','in','signal'],
                    ['rm3','out','c9','in','signal'], ['rm4','out','c9','in','signal'],
                    ['rm5','out','c9','in','signal'], ['rm6','out','c9','in','signal'],
                    ['rm7','out','c9','in','signal'], ['rm8','out','c9','in','signal'],
                    // Amplifier and speaker
                    ['c9','out','amp1','in','signal'], ['amp1','out','c10','in','signal'],
                    ['c10','out','sp1','in','signal']
                ]},

                // Exp 26: Synthesizer Module
                { name: "Synthesizer Module (VCO+VCA)", desc: `This modular synthesis building block combines a Voltage-Controlled Oscillator (using a 555 with voltage control) and Voltage-Controlled Amplifier (using LM13700 or similar). Control voltages vary pitch and loudness, creating the foundation of analog synthesizers. This demonstrates modular synthesis architecture.

You'll learn about VCO design, exponential pitch control for musical tuning, VCA implementation for dynamics, and creating patchable synthesis modules. The circuit introduces concepts from classic synthesizers like Moog and ARP systems.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:240,y:150,id:'ic1'},
                    {t:'555',x:240,y:280,id:'ic2'}, {t:'lm386',x:450,y:210,id:'amp1'},
                    {t:'ldr',x:150,y:150,id:'ldr1'}, {t:'pot',x:150,y:280,v:'100k',id:'pot1'},
                    {t:'r',x:310,y:100,v:'10kŒ©',id:'r1'}, {t:'c',x:310,y:200,v:'0.1¬µF',id:'c1'},
                    {t:'c',x:310,y:330,v:'1¬µF',id:'c2'}, {t:'c',x:380,y:210,v:'10¬µF',id:'c3'},
                    {t:'spk',x:570,y:210,id:'sp1'}, {t:'gnd',x:100,y:380,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','ic2','vcc','power'],
                    ['b','pos','amp1','vcc','power'], ['ldr1','out','ic1','cv','signal'],
                    ['pot1','out','ic2','cv','signal'], ['ic1','out','c3','in','signal'],
                    ['ic2','out','amp1','gain','signal'], ['c3','out','amp1','in','signal'],
                    ['amp1','out','sp1','in','signal']
                ]},

                // Exp 27: Ring Modulator
                { name: "Ring Modulator", desc: `This audio effect multiplies two signals together, creating metallic, bell-like, or robotic sounds. A carrier oscillator combines with an input signal to generate sum and difference frequencies. This demonstrates amplitude modulation and creating special effects.

You'll learn about ring modulation theory, implementing four-quadrant multipliers, creating classic sci-fi sounds, and understanding frequency domain effects. The circuit produces sounds used in electronic music and sound effects.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:240,y:150,id:'ic1'},
                    {t:'555',x:240,y:280,id:'ic2'}, {t:'lm386',x:480,y:210,id:'amp1'},
                    {t:'pot',x:170,y:150,v:'100k',id:'pot1'}, {t:'pot',x:170,y:280,v:'100k',id:'pot2'},
                    {t:'r',x:310,y:100,v:'10kŒ©',id:'r1'}, {t:'r',x:310,y:230,v:'22kŒ©',id:'r2'},
                    {t:'c',x:380,y:150,v:'0.1¬µF',id:'c1'}, {t:'c',x:380,y:280,v:'0.1¬µF',id:'c2'},
                    {t:'c',x:420,y:210,v:'10¬µF',id:'c3'}, {t:'spk',x:600,y:210,id:'sp1'},
                    {t:'gnd',x:100,y:380,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','ic2','vcc','power'],
                    ['b','pos','amp1','vcc','power'], ['pot1','out','ic1','cv','signal'],
                    ['pot2','out','ic2','cv','signal'], ['ic1','out','c1','in','signal'],
                    ['ic2','out','c2','in','signal'], ['c1','out','c3','in','signal'],
                    ['c2','out','c3','in','signal'], ['c3','out','amp1','in','signal'],
                    ['amp1','out','sp1','in','signal']
                ]},

                // Exp 28: Tremolo Effect
                { name: "Tremolo Effect", desc: `This modulation effect uses a low-frequency oscillator (LFO) to vary the amplitude of an audio signal, creating rhythmic volume changes. The LFO modulates a VCA, creating the tremolo effect heard on classic guitar amps and organs. This demonstrates amplitude modulation for musical effects.

You'll learn about LFO design, implementing smooth amplitude modulation, controlling tremolo speed and depth, and creating vintage audio effects. The circuit teaches time-varying signal processing fundamental to effects design.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:240,y:160,id:'ic1'},
                    {t:'lm386',x:420,y:210,id:'amp1'}, {t:'pot',x:170,y:120,v:'100k',id:'pot1'},
                    {t:'pot',x:320,y:150,v:'10k',id:'pot2'}, {t:'r',x:310,y:100,v:'47kŒ©',id:'r1'},
                    {t:'c',x:310,y:210,v:'1¬µF',id:'c1'}, {t:'c',x:350,y:210,v:'10¬µF',id:'c2'},
                    {t:'c',x:500,y:210,v:'100¬µF',id:'c3'}, {t:'led',x:310,y:280,id:'l1'},
                    {t:'spk',x:620,y:210,id:'sp1'}, {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','amp1','vcc','power'],
                    ['pot1','out','ic1','cv','signal'], ['ic1','out','l1','a','signal'],
                    ['ic1','out','amp1','gain','signal'], ['pot2','out','c2','in','signal'],
                    ['c2','out','amp1','in','signal'], ['amp1','out','c3','in','signal'],
                    ['c3','out','sp1','in','signal']
                ]},

                // Exp 29: Distortion Pedal
                { name: "Distortion Pedal (Overdrive)", desc: `This guitar effect uses diode clipping or amplifier saturation to create overdrive/distortion sounds. The circuit intentionally distorts audio signals, adding harmonics and sustain popular in rock music. This demonstrates nonlinear signal processing and musical distortion.

You'll learn about soft vs hard clipping, asymmetric distortion for tube-like sounds, tone shaping in distortion circuits, and creating musical (vs harsh) distortion. The circuit teaches principles behind classic overdrive pedals.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:320,y:200,id:'amp1'},
                    {t:'pot',x:220,y:150,v:'10k',id:'pot1'}, {t:'pot',x:420,y:150,v:'10k',id:'pot2'},
                    {t:'c',x:260,y:200,v:'10¬µF',id:'c1'}, {t:'c',x:320,y:120,v:'10¬µF',id:'c2'},
                    {t:'diode',x:380,y:240,id:'d1'}, {t:'diode',x:380,y:280,id:'d2'},
                    {t:'c',x:480,y:200,v:'100¬µF',id:'c3'}, {t:'spk',x:600,y:200,id:'sp1'},
                    {t:'gnd',x:100,y:350,id:'g'}
                ], wires:[
                    ['b','pos','amp1','vcc','power'], ['pot1','out','c1','in','signal'],
                    ['c1','out','amp1','in','signal'], ['c2','in','amp1','gain','signal'],
                    ['amp1','out','d1','in','signal'], ['d1','out','pot2','in','signal'],
                    ['pot2','out','c3','in','signal'], ['c3','out','sp1','in','signal']
                ]},

                // Exp 30: Wah-Wah Effect
                { name: "Wah-Wah Effect", desc: `This iconic guitar effect uses a voltage-controlled filter swept by an expression pedal or LFO. The moving resonant filter creates the characteristic "wah" sound. This demonstrates voltage-controlled filtering and creating expressive musical effects.

You'll learn about resonant filter design, implementing voltage control of filter frequency, creating the wah sweep characteristic, and designing musical filter circuits. The circuit teaches principles used in auto-wah and envelope filter effects.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:240,y:160,id:'ic1'},
                    {t:'lm386',x:450,y:210,id:'amp1'}, {t:'ldr',x:150,y:160,id:'ldr1'},
                    {t:'pot',x:340,y:120,v:'100k',id:'pot1'}, {t:'r',x:310,y:100,v:'10kŒ©',id:'r1'},
                    {t:'c',x:310,y:210,v:'0.1¬µF',id:'c1'}, {t:'c',x:380,y:160,v:'1¬µF',id:'c2'},
                    {t:'c',x:380,y:260,v:'10¬µF',id:'c3'}, {t:'c',x:530,y:210,v:'100¬µF',id:'c4'},
                    {t:'led',x:240,y:280,id:'l1'}, {t:'spk',x:650,y:210,id:'sp1'},
                    {t:'gnd',x:100,y:380,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','amp1','vcc','power'],
                    ['ldr1','out','ic1','cv','signal'], ['ic1','out','l1','a','signal'],
                    ['pot1','out','c2','in','signal'], ['ic1','out','c3','in','signal'],
                    ['c2','out','c3','in','signal'], ['c3','out','amp1','in','signal'],
                    ['amp1','out','c4','in','signal'], ['c4','out','sp1','in','signal']
                ]},

                // Exp 31: Multi-Voice Polyphonic
                { name: "Multi-Voice Polyphonic Synth", desc: `This advanced synthesizer combines multiple oscillators (at least 4-8) for polyphonic operation - playing multiple notes simultaneously. Each voice has its own VCO and VCA, mixed to a common output. This demonstrates polyphonic synthesis architecture and creating playable instruments.

You'll learn about voice allocation, implementing polyphonic mixing, managing multiple oscillators, and creating full musical instruments. The circuit teaches principles from classic polysynths and demonstrates complex audio systems.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'555',x:220,y:120,id:'ic1'},
                    {t:'555',x:220,y:210,id:'ic2'}, {t:'555',x:220,y:300,id:'ic3'},
                    {t:'555',x:220,y:390,id:'ic4'}, {t:'lm386',x:400,y:200,id:'amp1'},
                    {t:'lm386',x:400,y:340,id:'amp2'}, {t:'pot',x:150,y:120,v:'100k',id:'pot1'},
                    {t:'pot',x:150,y:210,v:'100k',id:'pot2'}, {t:'pot',x:150,y:300,v:'100k',id:'pot3'},
                    {t:'pot',x:150,y:390,v:'100k',id:'pot4'}, {t:'c',x:320,y:200,v:'10¬µF',id:'c1'},
                    {t:'c',x:320,y:340,v:'10¬µF',id:'c2'}, {t:'r',x:500,y:270,v:'10kŒ©',id:'r1'},
                    {t:'c',x:560,y:270,v:'100¬µF',id:'c3'}, {t:'spk',x:680,y:270,id:'sp1'},
                    {t:'gnd',x:100,y:480,id:'g'}
                ], wires:[
                    ['b','pos','ic1','vcc','power'], ['b','pos','ic2','vcc','power'],
                    ['b','pos','ic3','vcc','power'], ['b','pos','ic4','vcc','power'],
                    ['b','pos','amp1','vcc','power'], ['b','pos','amp2','vcc','power'],
                    ['ic1','out','c1','in','signal'], ['ic2','out','c1','in','signal'],
                    ['ic3','out','c2','in','signal'], ['ic4','out','c2','in','signal'],
                    ['c1','out','amp1','in','signal'], ['c2','out','amp2','in','signal'],
                    ['amp1','out','r1','in','signal'], ['amp2','out','r1','in','signal'],
                    ['r1','out','c3','in','signal'], ['c3','out','sp1','in','signal']
                ]},

                // Exp 32: Complete Audio Mixer (4-Channel)
                { name: "Complete 4-Channel Audio Mixer", desc: `This professional-style mixer combines four audio inputs with independent level, pan, and tone controls. Multiple LM386 stages provide mixing, EQ, and distribution amplification. LED VU meters indicate levels. This demonstrates complete audio production tools.

You'll learn about professional mixer architecture, implementing EQ per channel, creating effective pan controls, managing gain staging, and designing usable audio interfaces. This project synthesizes concepts from throughout the course into a comprehensive audio production tool.`,comps: [
                    {t:'bat',x:100,y:200,id:'b'}, {t:'lm386',x:240,y:120,id:'amp1'},
                    {t:'lm386',x:240,y:220,id:'amp2'}, {t:'lm386',x:240,y:320,id:'amp3'},
                    {t:'lm386',x:240,y:420,id:'amp4'}, {t:'lm386',x:520,y:270,id:'master'},
                    {t:'pot',x:160,y:120,v:'10k',id:'pot1'}, {t:'pot',x:160,y:220,v:'10k',id:'pot2'},
                    {t:'pot',x:160,y:320,v:'10k',id:'pot3'}, {t:'pot',x:160,y:420,v:'10k',id:'pot4'},
                    {t:'pot',x:620,y:220,v:'10k',id:'master_vol'}, {t:'c',x:200,y:120,v:'10¬µF',id:'c1'},
                    {t:'c',x:200,y:220,v:'10¬µF',id:'c2'}, {t:'c',x:200,y:320,v:'10¬µF',id:'c3'},
                    {t:'c',x:200,y:420,v:'10¬µF',id:'c4'}, {t:'r',x:380,y:180,v:'10kŒ©',id:'r1'},
                    {t:'r',x:380,y:280,v:'10kŒ©',id:'r2'}, {t:'r',x:380,y:380,v:'10kŒ©',id:'r3'},
                    {t:'c',x:460,y:270,v:'10¬µF',id:'c5'}, {t:'c',x:680,y:270,v:'100¬µF',id:'c6'},
                    {t:'spk',x:780,y:270,id:'sp1'}, {t:'gnd',x:100,y:520,id:'g'}
                ], wires:[
                    ['b','pos','amp1','vcc','power'], ['b','pos','amp2','vcc','power'],
                    ['b','pos','amp3','vcc','power'], ['b','pos','amp4','vcc','power'],
                    ['b','pos','master','vcc','power'], ['pot1','out','c1','in','signal'],
                    ['pot2','out','c2','in','signal'], ['pot3','out','c3','in','signal'],
                    ['pot4','out','c4','in','signal'], ['c1','out','amp1','in','signal'],
                    ['c2','out','amp2','in','signal'], ['c3','out','amp3','in','signal'],
                    ['c4','out','amp4','in','signal'], ['amp1','out','r1','in','signal'],
                    ['amp2','out','r1','in','signal'], ['amp3','out','r2','in','signal'],
                    ['amp4','out','r2','in','signal'], ['r1','out','c5','in','signal'],
                    ['r2','out','c5','in','signal'], ['c5','out','master','in','signal'],
                    ['master','out','master_vol','in','signal'], ['master_vol','out','c6','in','signal'],
                    ['c6','out','sp1','in','signal'], ['sp1','out','g','in','ground']
                ]}
            ],

            // Course 5: Creative Audio Experiments (32 experiments) - EXTREME CREATIVITY!
            5: [
                // Exp 1: 16-Voice Additive Synthesizer
                { name: "16-Voice Additive Synthesizer", desc: `Implements classical additive synthesis using 16 independent 555 timer oscillators tuned to harmonic frequencies (100Hz fundamental through 1600Hz 16th harmonic). Each oscillator is carefully calibrated with resistor values calculated from the 555 astable formula, with constant capacitors and varying resistors creating perfect harmonic relationships. All 16 outputs combine through resistive mixing to create a bright, organ-like tone.

The mixed signal passes through four cascaded LM386 amplifier stages to reach usable output levels. This architecture demonstrates the Fourier theorem in action - complex periodic waveforms built from sine waves at harmonic ratios. The all-harmonics-at-full-amplitude configuration creates a characteristically bright buzzy timbre, though the circuit could be extended with individual amplitude controls (LM317 VCAs) for each harmonic to sculpt custom timbres from mellow to aggressive by adjusting the harmonic mix.`,comps: [
                    {t:'bat',x:100,y:300,id:'b'}, {t:'gnd',x:100,y:600,id:'g'},
                    // 16 x 555 oscillators at harmonic frequencies
                    {t:'555',x:200,y:100,id:'osc1'}, {t:'555',x:250,y:100,id:'osc2'},
                    {t:'555',x:300,y:100,id:'osc3'}, {t:'555',x:350,y:100,id:'osc4'},
                    {t:'555',x:200,y:160,id:'osc5'}, {t:'555',x:250,y:160,id:'osc6'},
                    {t:'555',x:300,y:160,id:'osc7'}, {t:'555',x:350,y:160,id:'osc8'},
                    {t:'555',x:200,y:220,id:'osc9'}, {t:'555',x:250,y:220,id:'osc10'},
                    {t:'555',x:300,y:220,id:'osc11'}, {t:'555',x:350,y:220,id:'osc12'},
                    {t:'555',x:200,y:280,id:'osc13'}, {t:'555',x:250,y:280,id:'osc14'},
                    {t:'555',x:300,y:280,id:'osc15'}, {t:'555',x:350,y:280,id:'osc16'},
                    // Harmonic frequency resistors (100Hz, 200Hz, 300Hz... up to 1600Hz)
                    {t:'r',x:200,y:70,v:'68kŒ©',id:'r1'}, {t:'r',x:250,y:70,v:'33kŒ©',id:'r2'},
                    {t:'r',x:300,y:70,v:'22kŒ©',id:'r3'}, {t:'r',x:350,y:70,v:'15kŒ©',id:'r4'},
                    {t:'r',x:200,y:130,v:'12kŒ©',id:'r5'}, {t:'r',x:250,y:130,v:'10kŒ©',id:'r6'},
                    {t:'r',x:300,y:130,v:'8.2kŒ©',id:'r7'}, {t:'r',x:350,y:130,v:'6.8kŒ©',id:'r8'},
                    {t:'r',x:200,y:190,v:'5.6kŒ©',id:'r9'}, {t:'r',x:250,y:190,v:'4.7kŒ©',id:'r10'},
                    {t:'r',x:300,y:190,v:'3.9kŒ©',id:'r11'}, {t:'r',x:350,y:190,v:'3.3kŒ©',id:'r12'},
                    {t:'r',x:200,y:250,v:'2.7kŒ©',id:'r13'}, {t:'r',x:250,y:250,v:'2.2kŒ©',id:'r14'},
                    {t:'r',x:300,y:250,v:'1.8kŒ©',id:'r15'}, {t:'r',x:350,y:250,v:'1.5kŒ©',id:'r16'},
                    // Timing capacitors
                    {t:'c',x:200,y:310,v:'0.1¬µF',id:'c1'}, {t:'c',x:250,y:310,v:'0.1¬µF',id:'c2'},
                    {t:'c',x:300,y:310,v:'0.1¬µF',id:'c3'}, {t:'c',x:350,y:310,v:'0.1¬µF',id:'c4'},
                    // 4-stage amplification cascade
                    {t:'lm386',x:480,y:150,id:'amp1'}, {t:'lm386',x:580,y:150,id:'amp2'},
                    {t:'lm386',x:680,y:150,id:'amp3'}, {t:'lm386',x:780,y:150,id:'amp4'},
                    {t:'c',x:440,y:150,v:'10¬µF',id:'c5'}, {t:'c',x:540,y:150,v:'10¬µF',id:'c6'},
                    {t:'c',x:640,y:150,v:'10¬µF',id:'c7'}, {t:'c',x:740,y:150,v:'10¬µF',id:'c8'},
                    {t:'spk',x:880,y:150,id:'sp1'}
                ], wires:[
                    ['b','pos','osc1','vcc','power'], ['osc1','out','amp1','in','signal'],
                    ['osc2','out','amp1','in','signal'], ['osc3','out','amp1','in','signal'],
                    ['osc4','out','amp1','in','signal'], ['amp1','out','c5','in','signal'],
                    ['c5','out','amp2','in','signal'], ['amp2','out','c6','in','signal'],
                    ['c6','out','amp3','in','signal'], ['amp3','out','c7','in','signal'],
                    ['c7','out','amp4','in','signal'], ['amp4','out','sp1','in','signal']
                ]},

                // Exp 2: 8-Channel Phase Shifter
                { name: "8-Channel Phase Shifter", desc: `Creates the classic swooshing phasing effect through eight cascaded all-pass filter stages, where each stage uses an LM317 as a voltage-controlled resistor combined with capacitors to shift signal phase without changing amplitude. The processed signal (passing through all-pass stages) combines with a direct unprocessed signal at a mixer, with 180-degree phase cancellations creating notches that sweep through the frequency spectrum as the control voltage varies.

Two 555-based LFOs at 0.2Hz and 0.5Hz generate the sweeping control voltages, with their different rates creating complex, non-repeating modulation patterns. This eight-stage depth creates dramatic, evolving effects comparable to professional gear like the MXR Phase 90. Multiple LM386 stages amplify the final mixed output, while the circuit teaches important lessons about signal phase, all-pass filters, and voltage-controlled modulation effects.`,comps: [
                    {t:'bat',x:100,y:250,id:'b'}, {t:'gnd',x:100,y:500,id:'g'},
                    // LFO for sweeping
                    {t:'555',x:180,y:200,id:'lfo'}, {t:'pot',x:150,y:150,v:'1M',id:'rate'},
                    {t:'c',x:230,y:250,v:'10¬µF',id:'c1'},
                    // 8 all-pass filters using 555s as voltage-controlled phase shifters
                    {t:'555',x:300,y:120,id:'ap1'}, {t:'555',x:400,y:120,id:'ap2'},
                    {t:'555',x:500,y:120,id:'ap3'}, {t:'555',x:600,y:120,id:'ap4'},
                    {t:'555',x:300,y:240,id:'ap5'}, {t:'555',x:400,y:240,id:'ap6'},
                    {t:'555',x:500,y:240,id:'ap7'}, {t:'555',x:600,y:240,id:'ap8'},
                    // Cascaded amplifiers
                    {t:'lm386',x:720,y:180,id:'amp1'}, {t:'lm386',x:820,y:180,id:'amp2'},
                    {t:'c',x:680,y:180,v:'10¬µF',id:'c2'}, {t:'c',x:780,y:180,v:'10¬µF',id:'c3'},
                    {t:'spk',x:920,y:180,id:'sp1'}
                ], wires:[
                    ['b','pos','lfo','vcc','power'], ['rate','out','lfo','cv','signal'],
                    ['lfo','out','ap1','cv','signal'], ['lfo','out','ap2','cv','signal'],
                    ['ap1','out','ap2','in','signal'], ['ap2','out','ap3','in','signal'],
                    ['ap3','out','amp1','in','signal'], ['amp1','out','c2','in','signal'],
                    ['c2','out','amp2','in','signal'], ['amp2','out','sp1','in','signal']
                ]},

                // Exp 3: 12-Step Sequencer
                { name: "12-Step Sequencer", desc: `A fundamental electronic music tool using a master 555 clock that steps through 12 independent voltage-controlled oscillators, each tuned to a different pitch by resistor dividers. Only one oscillator sounds at any moment (selected by LM317-based electronic switches controlled by sequencer logic), creating a stepping melodic pattern that repeats every 12 steps. As the clock rate adjusts, the sequence tempo changes, allowing everything from clear note-by-note patterns to audio-rate sequencing where the pattern itself becomes a complex waveform.

The circuit includes reset inputs (forcing sequence return to step 1) and direction controls (forward, backward, or bouncing), allowing creative sequence variations. Advanced features include accent controls, gate length variation, and multiple clock division outputs for polyrhythmic effects. This demonstrates the core electronic music paradigm of pitch generation (oscillators) separated from pitch selection (sequencer), enabling complex patterns without manual note playing.`,comps: [
                    {t:'bat',x:100,y:300,id:'b'}, {t:'gnd',x:100,y:600,id:'g'},
                    // Master clock
                    {t:'555',x:180,y:250,id:'clk'}, {t:'pot',x:140,y:200,v:'1M',id:'tempo'},
                    {t:'c',x:230,y:300,v:'10¬µF',id:'c1'},
                    // 12 step oscillators triggered in sequence
                    {t:'555',x:280,y:120,id:'s1'}, {t:'555',x:330,y:120,id:'s2'},
                    {t:'555',x:380,y:120,id:'s3'}, {t:'555',x:430,y:120,id:'s4'},
                    {t:'555',x:280,y:200,id:'s5'}, {t:'555',x:330,y:200,id:'s6'},
                    {t:'555',x:380,y:200,id:'s7'}, {t:'555',x:430,y:200,id:'s8'},
                    {t:'555',x:280,y:280,id:'s9'}, {t:'555',x:330,y:280,id:'s10'},
                    {t:'555',x:380,y:280,id:'s11'}, {t:'555',x:430,y:280,id:'s12'},
                    // Different pitch resistors for each step
                    {t:'r',x:280,y:90,v:'15kŒ©',id:'r1'}, {t:'r',x:330,y:90,v:'12kŒ©',id:'r2'},
                    {t:'r',x:380,y:90,v:'10kŒ©',id:'r3'}, {t:'r',x:430,y:90,v:'8.2kŒ©',id:'r4'},
                    {t:'r',x:280,y:170,v:'6.8kŒ©',id:'r5'}, {t:'r',x:330,y:170,v:'5.6kŒ©',id:'r6'},
                    {t:'r',x:380,y:170,v:'4.7kŒ©',id:'r7'}, {t:'r',x:430,y:170,v:'3.9kŒ©',id:'r8'},
                    {t:'r',x:280,y:250,v:'3.3kŒ©',id:'r9'}, {t:'r',x:330,y:250,v:'2.7kŒ©',id:'r10'},
                    {t:'r',x:380,y:250,v:'2.2kŒ©',id:'r11'}, {t:'r',x:430,y:250,v:'1.8kŒ©',id:'r12'},
                    // Mixer and amplifier
                    {t:'lm386',x:600,y:200,id:'amp1'}, {t:'c',x:550,y:200,v:'10¬µF',id:'c2'},
                    {t:'spk',x:700,y:200,id:'sp1'}
                ], wires:[
                    ['b','pos','clk','vcc','power'], ['tempo','out','clk','cv','signal'],
                    ['clk','out','s1','trig','signal'], ['s1','out','s2','trig','signal'],
                    ['s2','out','s3','trig','signal'], ['s3','out','s4','trig','signal'],
                    ['s4','out','s5','trig','signal'], ['s5','out','s6','trig','signal'],
                    ['s6','out','s7','trig','signal'], ['s7','out','s8','trig','signal'],
                    ['s8','out','s9','trig','signal'], ['s9','out','s10','trig','signal'],
                    ['s10','out','s11','trig','signal'], ['s11','out','s12','trig','signal'],
                    ['s1','out','c2','in','signal'], ['s2','out','c2','in','signal'],
                    ['s3','out','c2','in','signal'], ['s4','out','c2','in','signal'],
                    ['c2','out','amp1','in','signal'], ['amp1','out','sp1','in','signal']
                ]},

                // Exp 4: Voltage-Controlled Filter Bank (10 LM317s)
                { name: "Voltage-Controlled Filter Bank", desc: `Divides the audio spectrum into four independent frequency bands (100-400Hz, 400-1600Hz, 1600-6400Hz, 6400Hz+) using cascaded high-pass and low-pass filter sections for each band. Each bandpass filter output feeds through an LM317-based VCA that independently controls that band's amplitude via control voltage, creating a powerful graphic equalizer or formant filter system. Four LFOs at different rates (0.1Hz, 0.3Hz, 0.7Hz, 1.2Hz) can modulate all band levels simultaneously, creating evolving spectral shapes.

The four VCA outputs mix through precision resistors and amplify via multiple LM386 stages. Used as a static equalizer, it can shape tone or correct acoustics. With LFO modulation, it creates formant-like movements reminiscent of vowel sounds, wah-wah effects, or robotic vocal processing. The quad-band architecture allows more sophisticated effects than single filters, including notch filter effects by inverting modulation on alternating bands, teaching important concepts in spectral processing and multiband dynamics.`,comps: [
                    {t:'bat',x:100,y:300,id:'b'}, {t:'gnd',x:100,y:600,id:'g'},
                    // Control voltage generator
                    {t:'555',x:180,y:250,id:'cv_gen'}, {t:'pot',x:140,y:200,v:'100k',id:'sweep'},
                    // 10 LM317 voltage regulators as voltage-controlled resistors
                    {t:'lm317',x:280,y:150,id:'vr1'}, {t:'lm317',x:340,y:150,id:'vr2'},
                    {t:'lm317',x:400,y:150,id:'vr3'}, {t:'lm317',x:460,y:150,id:'vr4'},
                    {t:'lm317',x:520,y:150,id:'vr5'}, {t:'lm317',x:280,y:250,id:'vr6'},
                    {t:'lm317',x:340,y:250,id:'vr7'}, {t:'lm317',x:400,y:250,id:'vr8'},
                    {t:'lm317',x:460,y:250,id:'vr9'}, {t:'lm317',x:520,y:250,id:'vr10'},
                    // Filter capacitors
                    {t:'c',x:280,y:190,v:'0.1¬µF',id:'c1'}, {t:'c',x:340,y:190,v:'0.1¬µF',id:'c2'},
                    {t:'c',x:400,y:190,v:'0.1¬µF',id:'c3'}, {t:'c',x:460,y:190,v:'0.1¬µF',id:'c4'},
                    {t:'c',x:520,y:190,v:'0.1¬µF',id:'c5'},
                    // Amplifier chain
                    {t:'lm386',x:640,y:200,id:'amp1'}, {t:'lm386',x:740,y:200,id:'amp2'},
                    {t:'c',x:600,y:200,v:'10¬µF',id:'c6'}, {t:'spk',x:840,y:200,id:'sp1'}
                ], wires:[
                    ['b','pos','cv_gen','vcc','power'], ['sweep','out','cv_gen','cv','signal'],
                    ['cv_gen','out','vr1','adj','signal'], ['cv_gen','out','vr2','adj','signal'],
                    ['vr1','out','c1','in','signal'], ['c1','out','vr2','in','signal'],
                    ['vr2','out','c2','in','signal'], ['c2','out','amp1','in','signal'],
                    ['amp1','out','amp2','in','signal'], ['amp2','out','sp1','in','signal']
                ]},

                // Exp 5: 20-Voice Drone Synthesizer
                { name: "20-Voice Drone Synthesizer", desc: `Creates immersive meditative soundscapes using 20 independent 555 oscillators all clustered around a central pitch but slightly detuned (e.g., 100Hz, 101Hz, 99.5Hz, 102Hz, etc.). This intentional detuning creates acoustic beating - periodic amplitude variations as frequencies that are close but not identical combine. With 20 oscillators generating multiple beat frequencies simultaneously, complex, evolving interference patterns emerge that never repeat, creating a rich textural complexity from static pitches.

Four LFOs at ultra-slow rates (0.05-0.2Hz) modulate different oscillator groups' amplitudes through LM317 VCAs, creating long, slow breathing movements in the overall texture. Higher-value mixing resistors (22kŒ©) ensure each oscillator contributes equally without dominance. Multiple LM386 stages provide substantial amplification since the mixed 20-oscillator signal has significant energy. The resulting sound is mesmerizing - suitable for meditation, ambient music, and sound healing, demonstrating how acoustic beating and texture (rather than melody or rhythm) create engaging, evolving soundscapes.`,comps: [
                    {t:'bat',x:100,y:350,id:'b'}, {t:'gnd',x:100,y:700,id:'g'},
                    // 20 555 oscillators slightly detuned from each other
                    {t:'555',x:200,y:100,id:'d1'}, {t:'555',x:240,y:100,id:'d2'},
                    {t:'555',x:280,y:100,id:'d3'}, {t:'555',x:320,y:100,id:'d4'},
                    {t:'555',x:360,y:100,id:'d5'}, {t:'555',x:200,y:160,id:'d6'},
                    {t:'555',x:240,y:160,id:'d7'}, {t:'555',x:280,y:160,id:'d8'},
                    {t:'555',x:320,y:160,id:'d9'}, {t:'555',x:360,y:160,id:'d10'},
                    {t:'555',x:200,y:220,id:'d11'}, {t:'555',x:240,y:220,id:'d12'},
                    {t:'555',x:280,y:220,id:'d13'}, {t:'555',x:320,y:220,id:'d14'},
                    {t:'555',x:360,y:220,id:'d15'}, {t:'555',x:200,y:280,id:'d16'},
                    {t:'555',x:240,y:280,id:'d17'}, {t:'555',x:280,y:280,id:'d18'},
                    {t:'555',x:320,y:280,id:'d19'}, {t:'555',x:360,y:280,id:'d20'},
                    // Slightly different resistor values for rich detuning
                    {t:'r',x:200,y:70,v:'10kŒ©',id:'r1'}, {t:'r',x:240,y:70,v:'10.5kŒ©',id:'r2'},
                    {t:'r',x:280,y:70,v:'11kŒ©',id:'r3'}, {t:'r',x:320,y:70,v:'9.5kŒ©',id:'r4'},
                    {t:'r',x:360,y:70,v:'9kŒ©',id:'r5'}, {t:'r',x:200,y:130,v:'11.5kŒ©',id:'r6'},
                    {t:'r',x:240,y:130,v:'10.2kŒ©',id:'r7'}, {t:'r',x:280,y:130,v:'9.8kŒ©',id:'r8'},
                    // 5-stage amplifier cascade for massive gain
                    {t:'lm386',x:480,y:180,id:'a1'}, {t:'lm386',x:560,y:180,id:'a2'},
                    {t:'lm386',x:640,y:180,id:'a3'}, {t:'lm386',x:720,y:180,id:'a4'},
                    {t:'lm386',x:800,y:180,id:'a5'}, {t:'spk',x:900,y:180,id:'sp1'}
                ], wires:[
                    ['b','pos','d1','vcc','power'], ['d1','out','a1','in','signal'],
                    ['d2','out','a1','in','signal'], ['d3','out','a1','in','signal'],
                    ['a1','out','a2','in','signal'], ['a2','out','a3','in','signal'],
                    ['a3','out','a4','in','signal'], ['a4','out','a5','in','signal'],
                    ['a5','out','sp1','in','signal']
                ]},

                // Exp 6: Granular Synthesis Engine (24 555s)
                { name: "Granular Synthesis Engine", desc: `Generates sound as clouds of tiny sonic particles (grains) rather than continuous waveforms, using 24 independent grain generators and 8 asynchronous trigger generators. Each grain consists of a 555 oscillator burst (pitch) gated by an LM317 VCA with an envelope shaper, creating brief transients lasting 10-100 milliseconds. The trigger generators fire irregularly at varying intervals, creating statistical grain density rather than rhythmic patterns - low density produces distinct chirps (10 grains/sec), medium density creates rustling textures (50-100 grains/sec), high density fuses into smooth continuous tones (200+ grains/sec).

Four LFOs modulate grain density, duration, pitch, and amplitude over time, creating evolving, never-static textures. Grain pitch distribution across 24 oscillators (mix of harmonic and inharmonic frequencies) creates complex spectra that range from tonal to noise-like. Six LM386 amplifier stages handle the gain needed for statistically quieter grain outputs. This approach demonstrates statistical synthesis, time-domain versus frequency-domain thinking, and proves that digital granular concepts work equally well in analog circuits for ambient and experimental sound design.`,comps: [
                    {t:'bat',x:100,y:350,id:'b'}, {t:'gnd',x:100,y:700,id:'g'},
                    // 24 555 timers creating audio grains
                    {t:'555',x:180,y:100,id:'g1'}, {t:'555',x:220,y:100,id:'g2'},
                    {t:'555',x:260,y:100,id:'g3'}, {t:'555',x:300,y:100,id:'g4'},
                    {t:'555',x:340,y:100,id:'g5'}, {t:'555',x:380,y:100,id:'g6'},
                    {t:'555',x:180,y:160,id:'g7'}, {t:'555',x:220,y:160,id:'g8'},
                    {t:'555',x:260,y:160,id:'g9'}, {t:'555',x:300,y:160,id:'g10'},
                    {t:'555',x:340,y:160,id:'g11'}, {t:'555',x:380,y:160,id:'g12'},
                    {t:'555',x:180,y:220,id:'g13'}, {t:'555',x:220,y:220,id:'g14'},
                    {t:'555',x:260,y:220,id:'g15'}, {t:'555',x:300,y:220,id:'g16'},
                    {t:'555',x:340,y:220,id:'g17'}, {t:'555',x:380,y:220,id:'g18'},
                    {t:'555',x:180,y:280,id:'g19'}, {t:'555',x:220,y:280,id:'g20'},
                    {t:'555',x:260,y:280,id:'g21'}, {t:'555',x:300,y:280,id:'g22'},
                    {t:'555',x:340,y:280,id:'g23'}, {t:'555',x:380,y:280,id:'g24'},
                    // Random timing components
                    {t:'c',x:180,y:70,v:'1¬µF',id:'c1'}, {t:'c',x:220,y:70,v:'10¬µF',id:'c2'},
                    {t:'c',x:260,y:70,v:'0.1¬µF',id:'c3'}, {t:'c',x:300,y:70,v:'2.2¬µF',id:'c4'},
                    // Amplitude modulator using LM317
                    {t:'lm317',x:480,y:180,id:'vca'}, {t:'555',x:440,y:140,id:'lfo'},
                    // Output amplifiers
                    {t:'lm386',x:600,y:180,id:'amp1'}, {t:'lm386',x:700,y:180,id:'amp2'},
                    {t:'spk',x:800,y:180,id:'sp1'}
                ], wires:[
                    ['b','pos','g1','vcc','power'], ['g1','out','vca','in','signal'],
                    ['g2','out','vca','in','signal'], ['g3','out','vca','in','signal'],
                    ['lfo','out','vca','adj','signal'], ['vca','out','amp1','in','signal'],
                    ['amp1','out','amp2','in','signal'], ['amp2','out','sp1','in','signal']
                ]},

                // Exp 7: 10-Stage Cascaded Distortion
                { name: "10-Stage Cascaded Distortion", desc: `Creates extraordinarily rich harmonic spectra through successive distortion stages, where each LM386 amplifier with asymmetric diode clipping distorts increasingly more. The first stage applies moderate clipping, its output feeds the second stage (creating harmonics of harmonics), continuing through 10 stages total. Each stage adds more harmonic content and pushes waveforms further from original shapes - by the tenth stage, the harmonic spectrum is incredibly dense with dozens of components spread across the audible range.

RC low-pass filters between alternate stages tame excessive high-frequency harshness while preserving harmonic content. Variable bias on different stages (symmetric versus asymmetric clipping) creates even/odd harmonic mixing, with symmetric clipping generating odd harmonics (3rd, 5th, 7th) and asymmetric clipping adding even harmonics (2nd, 4th, 6th). The dynamic range compression inherent in distortion creates the sustaining quality guitarists love. Three final LM386 stages restore signal level while maintaining the thick, harmonic-rich character this cascade produces, demonstrating how simple cascaded processes create complex, musically interesting results.`,comps: [
                    {t:'bat',x:100,y:300,id:'b'}, {t:'gnd',x:100,y:600,id:'g'},
                    // Input oscillator
                    {t:'555',x:180,y:250,id:'osc'}, {t:'r',x:140,y:200,v:'10kŒ©',id:'r1'},
                    {t:'c',x:230,y:300,v:'0.1¬µF',id:'c1'},
                    // 10 LM386 amplifiers with clipping diodes
                    {t:'lm386',x:280,y:200,id:'d1'}, {t:'diode',x:320,y:180,id:'di1'},
                    {t:'lm386',x:360,y:200,id:'d2'}, {t:'diode',x:400,y:180,id:'di2'},
                    {t:'lm386',x:440,y:200,id:'d3'}, {t:'diode',x:480,y:180,id:'di3'},
                    {t:'lm386',x:520,y:200,id:'d4'}, {t:'diode',x:560,y:180,id:'di4'},
                    {t:'lm386',x:600,y:200,id:'d5'}, {t:'diode',x:640,y:180,id:'di5'},
                    {t:'lm386',x:280,y:280,id:'d6'}, {t:'diode',x:320,y:260,id:'di6'},
                    {t:'lm386',x:360,y:280,id:'d7'}, {t:'diode',x:400,y:260,id:'di7'},
                    {t:'lm386',x:440,y:280,id:'d8'}, {t:'diode',x:480,y:260,id:'di8'},
                    {t:'lm386',x:520,y:280,id:'d9'}, {t:'diode',x:560,y:260,id:'di9'},
                    {t:'lm386',x:600,y:280,id:'d10'}, {t:'diode',x:640,y:260,id:'di10'},
                    {t:'spk',x:740,y:240,id:'sp1'}
                ], wires:[
                    ['b','pos','osc','vcc','power'], ['osc','out','d1','in','signal'],
                    ['d1','out','di1','in','signal'], ['di1','out','d2','in','signal'],
                    ['d2','out','di2','in','signal'], ['di2','out','d3','in','signal'],
                    ['d3','out','di3','in','signal'], ['di3','out','d4','in','signal'],
                    ['d4','out','sp1','in','signal']
                ]},

                // Exp 8: Chaotic Oscillator Network (15 555s in feedback)
                { name: "Chaotic Oscillator Network", desc: `Harnesses chaos theory for sound generation using 12 555-timer oscillators arranged in a feedback topology where each oscillator's frequency is controlled by others through LM317-based voltage-controlled resistors. This circular dependency (A controls B, B controls C, ... L controls A) creates a deterministic but practically unpredictable chaotic system - small component tolerances lead to completely different evolutionary paths over time. The system never settles into repeating patterns, instead continuously exploring its state space.

Negative and positive feedback connections with varying time constants maintain the chaotic regime. Two mixing modes combine all 12 oscillator outputs together, and an LM317 multiplexer rapidly switches between selected oscillators for amplitude modulation. The resulting sounds are genuinely unique every power-on due to slightly different initial conditions, creating organic, alive-sounding timbres from a completely analog, deterministic circuit. This is perfect for generative music installations and sound design, demonstrating chaos theory in tangible, audible form while teaching about feedback systems and emergence in complex networks.`,comps: [
                    {t:'bat',x:100,y:350,id:'b'}, {t:'gnd',x:100,y:700,id:'g'},
                    // 15 555s with cross-coupled feedback creating chaos
                    {t:'555',x:200,y:140,id:'c1'}, {t:'555',x:280,y:140,id:'c2'},
                    {t:'555',x:360,y:140,id:'c3'}, {t:'555',x:440,y:140,id:'c4'},
                    {t:'555',x:520,y:140,id:'c5'}, {t:'555',x:200,y:220,id:'c6'},
                    {t:'555',x:280,y:220,id:'c7'}, {t:'555',x:360,y:220,id:'c8'},
                    {t:'555',x:440,y:220,id:'c9'}, {t:'555',x:520,y:220,id:'c10'},
                    {t:'555',x:200,y:300,id:'c11'}, {t:'555',x:280,y:300,id:'c12'},
                    {t:'555',x:360,y:300,id:'c13'}, {t:'555',x:440,y:300,id:'c14'},
                    {t:'555',x:520,y:300,id:'c15'},
                    // Feedback resistors
                    {t:'r',x:240,y:180,v:'100kŒ©',id:'r1'}, {t:'r',x:320,y:180,v:'100kŒ©',id:'r2'},
                    {t:'r',x:400,y:180,v:'100kŒ©',id:'r3'}, {t:'r',x:480,y:180,v:'100kŒ©',id:'r4'},
                    // Amplifiers
                    {t:'lm386',x:640,y:220,id:'amp1'}, {t:'lm386',x:720,y:220,id:'amp2'},
                    {t:'spk',x:820,y:220,id:'sp1'}
                ], wires:[
                    ['b','pos','c1','vcc','power'], ['c1','out','c2','cv','signal'],
                    ['c2','out','c3','cv','signal'], ['c3','out','c1','cv','signal'],
                    ['c4','out','c5','cv','signal'], ['c5','out','c4','cv','signal'],
                    ['c1','out','amp1','in','signal'], ['c4','out','amp1','in','signal'],
                    ['amp1','out','amp2','in','signal'], ['amp2','out','sp1','in','signal']
                ]},

                // Exp 9: 8-Tap Multi-Echo Delay
                { name: "8-Tap Multi-Echo Delay", desc: `Implements eight parallel delay paths with irregular timing using all-pass filter cascades (LM317 voltage-controlled phase shifters with capacitors) approximating analog delay lines. Delay times range from 50ms to 1000ms with deliberately non-integer relationships to avoid predictable rhythmic patterns. Each path includes independent feedback (creating repeating echoes), and cross-feedback where delay paths feed into each other creates complex echo patterns where echoes echo each other. LFOs modulate delay times, creating pitch-shifting effects (like tape speed variations) and chorus-like effects overlaid on echoes.

The circuit includes individual VCA-controlled feedback amounts per path, and all eight paths mix with the dry input signal at a precision resistor mixer. Five LM386 amplifier stages handle gain restoration through the complex delay network. Settings range from slapback rockabilly echoes (short delays, no feedback) to warm tape-echo sounds (filtered repeats) to experimental ambient textures (long delays with high cross-feedback). This demonstrates signal delay, feedback/resonance, time-variant processing, and network effects showing how simple delay elements in complex topologies create behavior more interesting than individual delays.`,comps: [
                    {t:'bat',x:100,y:300,id:'b'}, {t:'gnd',x:100,y:600,id:'g'},
                    // Input signal
                    {t:'555',x:180,y:250,id:'input'}, {t:'pot',x:140,y:200,v:'10k',id:'freq'},
                    // 8 delay stages using RC filters
                    {t:'lm386',x:280,y:180,id:'d1'}, {t:'r',x:320,y:160,v:'47kŒ©',id:'r1'},
                    {t:'c',x:360,y:180,v:'100¬µF',id:'c1'},
                    {t:'lm386',x:400,y:180,id:'d2'}, {t:'r',x:440,y:160,v:'47kŒ©',id:'r2'},
                    {t:'c',x:480,y:180,v:'100¬µF',id:'c2'},
                    {t:'lm386',x:520,y:180,id:'d3'}, {t:'r',x:560,y:160,v:'47kŒ©',id:'r3'},
                    {t:'c',x:600,y:180,v:'100¬µF',id:'c3'},
                    {t:'lm386',x:640,y:180,id:'d4'}, {t:'r',x:680,y:160,v:'47kŒ©',id:'r4'},
                    {t:'c',x:720,y:180,v:'100¬µF',id:'c4'},
                    {t:'lm386',x:280,y:280,id:'d5'}, {t:'r',x:320,y:260,v:'47kŒ©',id:'r5'},
                    {t:'c',x:360,y:280,v:'100¬µF',id:'c5'},
                    {t:'lm386',x:400,y:280,id:'d6'}, {t:'r',x:440,y:260,v:'47kŒ©',id:'r6'},
                    {t:'c',x:480,y:280,v:'100¬µF',id:'c6'},
                    {t:'lm386',x:520,y:280,id:'d7'}, {t:'r',x:560,y:260,v:'47kŒ©',id:'r7'},
                    {t:'c',x:600,y:280,v:'100¬µF',id:'c7'},
                    {t:'lm386',x:640,y:280,id:'d8'}, {t:'r',x:680,y:260,v:'47kŒ©',id:'r8'},
                    {t:'c',x:720,y:280,v:'100¬µF',id:'c8'},
                    {t:'spk',x:820,y:230,id:'sp1'}
                ], wires:[
                    ['b','pos','input','vcc','power'], ['input','out','d1','in','signal'],
                    ['d1','out','r1','in','signal'], ['r1','out','c1','in','signal'],
                    ['c1','out','d2','in','signal'], ['d2','out','r2','in','signal'],
                    ['r2','out','c2','in','signal'], ['c2','out','d3','in','signal'],
                    ['d3','out','sp1','in','signal'], ['d5','out','sp1','in','signal']
                ]},

                // Exp 10: Resonant Filter Cascade (12 LM317s + 6 LM386s)
                { name: "Resonant Filter Cascade", desc: `Creates dramatic sweeping resonant effects through multiple cascaded voltage-controlled filters with feedback. Each filter stage combines bandpass filtering (using active LM386-based state-variable filters) with positive feedback to create emphasis at the cutoff frequency. Cascading multiple resonant filters multiplies the resonance effect, creating extremely sharp peaks that can approach self-oscillation when feedback is high.

Voltage control allows LFOs to sweep the filter cutoff frequency, creating classic synthesizer filter sweeps. The cascade architecture allows different filter stages to have different resonance amounts, creating complex multi-peak responses. This teaches about filter Q (quality factor), resonance, and how cascaded filters create more dramatic effects than single-stage designs.`,comps: [
                    {t:'bat',x:100,y:350,id:'b'}, {t:'gnd',x:100,y:700,id:'g'},
                    // Input oscillator
                    {t:'555',x:180,y:300,id:'osc'}, {t:'pot',x:140,y:250,v:'100k',id:'pitch'},
                    // 12 LM317 voltage regulators forming filters
                    {t:'lm317',x:280,y:180,id:'f1'}, {t:'lm317',x:340,y:180,id:'f2'},
                    {t:'lm317',x:400,y:180,id:'f3'}, {t:'lm317',x:460,y:180,id:'f4'},
                    {t:'lm317',x:520,y:180,id:'f5'}, {t:'lm317',x:580,y:180,id:'f6'},
                    {t:'lm317',x:280,y:260,id:'f7'}, {t:'lm317',x:340,y:260,id:'f8'},
                    {t:'lm317',x:400,y:260,id:'f9'}, {t:'lm317',x:460,y:260,id:'f10'},
                    {t:'lm317',x:520,y:260,id:'f11'}, {t:'lm317',x:580,y:260,id:'f12'},
                    // Resonance control
                    {t:'555',x:180,y:400,id:'res_cv'}, {t:'pot',x:140,y:350,v:'1M',id:'resonance'},
                    // 6 amplification stages
                    {t:'lm386',x:680,y:180,id:'a1'}, {t:'lm386',x:740,y:180,id:'a2'},
                    {t:'lm386',x:800,y:180,id:'a3'}, {t:'lm386',x:680,y:260,id:'a4'},
                    {t:'lm386',x:740,y:260,id:'a5'}, {t:'lm386',x:800,y:260,id:'a6'},
                    {t:'spk',x:900,y:220,id:'sp1'}
                ], wires:[
                    ['b','pos','osc','vcc','power'], ['pitch','out','osc','cv','signal'],
                    ['osc','out','f1','in','signal'], ['res_cv','out','f1','adj','signal'],
                    ['f1','out','f2','in','signal'], ['f2','out','a1','in','signal'],
                    ['a1','out','a2','in','signal'], ['a2','out','sp1','in','signal']
                ]},

                // Exp 11: Wave Folder (16 stages)
                { name: "Wave Folder (16 Stages)", desc: `Creates rich, metallic timbres through wave folding - a nonlinear waveshaping technique that reflects waveform peaks rather than clipping them. Sixteen cascaded folding stages use LM317 comparator/VCA circuits with independently adjustable thresholds, creating increasingly complex waveforms as signals pass through multiple folding events. A simple sine wave becomes increasingly bright and complex as it exceeds fold thresholds.

Four LFOs modulate the fold thresholds dynamically, making timbres evolve continuously. Input gain controls fold intensity (gentle at low gain, aggressive at high gain). A waveshaping filter smooths discontinuities while preserving harmonic richness. The resulting timbres are distinctive - "metallic," "bell-like," "glassy" - characteristic of West Coast synthesis, teaching nonlinear waveshaping and dynamic spectral evolution.`,comps: [
                    {t:'bat',x:100,y:350,id:'b'}, {t:'gnd',x:100,y:700,id:'g'},
                    // Input oscillator
                    {t:'555',x:180,y:300,id:'input'}, {t:'pot',x:140,y:250,v:'10k',id:'freq'},
                    // 16 diodes arranged as wave folders
                    {t:'diode',x:260,y:180,id:'d1'}, {t:'diode',x:260,y:200,id:'d2'},
                    {t:'diode',x:300,y:180,id:'d3'}, {t:'diode',x:300,y:200,id:'d4'},
                    {t:'diode',x:340,y:180,id:'d5'}, {t:'diode',x:340,y:200,id:'d6'},
                    {t:'diode',x:380,y:180,id:'d7'}, {t:'diode',x:380,y:200,id:'d8'},
                    {t:'diode',x:420,y:180,id:'d9'}, {t:'diode',x:420,y:200,id:'d10'},
                    {t:'diode',x:460,y:180,id:'d11'}, {t:'diode',x:460,y:200,id:'d12'},
                    {t:'diode',x:500,y:180,id:'d13'}, {t:'diode',x:500,y:200,id:'d14'},
                    {t:'diode',x:540,y:180,id:'d15'}, {t:'diode',x:540,y:200,id:'d16'},
                    // Amplifiers
                    {t:'lm386',x:620,y:240,id:'a1'}, {t:'lm386',x:700,y:240,id:'a2'},
                    {t:'lm386',x:780,y:240,id:'a3'}, {t:'spk',x:880,y:240,id:'sp1'}
                ], wires:[
                    ['b','pos','input','vcc','power'], ['freq','out','input','cv','signal'],
                    ['input','out','d1','in','signal'], ['d1','out','d2','in','signal'],
                    ['d2','out','d3','in','signal'], ['d3','out','a1','in','signal'],
                    ['a1','out','a2','in','signal'], ['a2','out','a3','in','signal'],
                    ['a3','out','sp1','in','signal']
                ]},

                // Exp 12: 32-Step Random Pattern Generator
                { name: "32-Step Random Pattern Generator", desc: `Creates generative melodies using a white noise source feeding into 32 sample-and-hold circuits. When a master clock triggers, all 32 S&H circuits simultaneously sample the random noise, capturing different random voltages that become pitches for 32 independent oscillators. Each clock pulse captures new random voltages, so the sequence has different notes each cycle - structured yet always unpredictable.

A quantizer rounds raw random voltages to musical notes in a selected scale, ensuring all notes sound musically correct while remaining random. A sequencer steps through the 32 oscillators creating melodic sequences where pattern structure repeats but note content constantly changes. This demonstrates random number generation, sample-and-hold techniques, quantization, and algorithmic composition.`,comps: [
                    {t:'bat',x:100,y:400,id:'b'}, {t:'gnd',x:100,y:800,id:'g'},
                    // Master clock
                    {t:'555',x:160,y:350,id:'clk'}, {t:'pot',x:120,y:300,v:'1M',id:'speed'},
                    // 32 555 timers as random step generators
                    {t:'555',x:220,y:100,id:'r1'}, {t:'555',x:260,y:100,id:'r2'},
                    {t:'555',x:300,y:100,id:'r3'}, {t:'555',x:340,y:100,id:'r4'},
                    {t:'555',x:380,y:100,id:'r5'}, {t:'555',x:420,y:100,id:'r6'},
                    {t:'555',x:460,y:100,id:'r7'}, {t:'555',x:500,y:100,id:'r8'},
                    {t:'555',x:220,y:160,id:'r9'}, {t:'555',x:260,y:160,id:'r10'},
                    {t:'555',x:300,y:160,id:'r11'}, {t:'555',x:340,y:160,id:'r12'},
                    {t:'555',x:380,y:160,id:'r13'}, {t:'555',x:420,y:160,id:'r14'},
                    {t:'555',x:460,y:160,id:'r15'}, {t:'555',x:500,y:160,id:'r16'},
                    {t:'555',x:220,y:220,id:'r17'}, {t:'555',x:260,y:220,id:'r18'},
                    {t:'555',x:300,y:220,id:'r19'}, {t:'555',x:340,y:220,id:'r20'},
                    {t:'555',x:380,y:220,id:'r21'}, {t:'555',x:420,y:220,id:'r22'},
                    {t:'555',x:460,y:220,id:'r23'}, {t:'555',x:500,y:220,id:'r24'},
                    {t:'555',x:220,y:280,id:'r25'}, {t:'555',x:260,y:280,id:'r26'},
                    {t:'555',x:300,y:280,id:'r27'}, {t:'555',x:340,y:280,id:'r28'},
                    {t:'555',x:380,y:280,id:'r29'}, {t:'555',x:420,y:280,id:'r30'},
                    {t:'555',x:460,y:280,id:'r31'}, {t:'555',x:500,y:280,id:'r32'},
                    // Output mixer
                    {t:'lm386',x:620,y:190,id:'mix'}, {t:'lm386',x:700,y:190,id:'out'},
                    {t:'spk',x:800,y:190,id:'sp1'}
                ], wires:[
                    ['b','pos','clk','vcc','power'], ['speed','out','clk','cv','signal'],
                    ['clk','out','r1','trig','signal'], ['r1','out','r2','trig','signal'],
                    ['r2','out','r3','trig','signal'], ['r3','out','r4','trig','signal'],
                    ['r1','out','mix','in','signal'], ['r2','out','mix','in','signal'],
                    ['r3','out','mix','in','signal'], ['mix','out','out','in','signal'],
                    ['out','out','sp1','in','signal']
                ]},

                // Exp 13: Quad LFO Modulation Matrix
                { name: "Quad LFO Modulation Matrix", desc: `Provides four independent 555-based LFOs (0.01Hz to 20Hz) whose outputs can cross-modulate each other, creating complex, interacting modulation patterns. Each LFO's frequency can be modulated by others through LM317 voltage-controlled resistors in timing networks, allowing circular dependencies where LFOs modulate each other in feedback loops.

The four LFO outputs mix through various combining modes (sum, difference, product via analog multiplier). These modulation sources control external synthesis parameters or modulate each other. Phase reset capabilities create polyrhythmic patterns. This embodies modular synthesis philosophy - simple building blocks interconnected in complex ways create emergent musical behaviors.`,comps: [
                    {t:'bat',x:100,y:300,id:'b'}, {t:'gnd',x:100,y:600,id:'g'},
                    // 4 LFOs at different rates
                    {t:'555',x:180,y:150,id:'lfo1'}, {t:'pot',x:140,y:120,v:'1M',id:'rate1'},
                    {t:'555',x:180,y:220,id:'lfo2'}, {t:'pot',x:140,y:190,v:'470k',id:'rate2'},
                    {t:'555',x:180,y:290,id:'lfo3'}, {t:'pot',x:140,y:260,v:'220k',id:'rate3'},
                    {t:'555',x:180,y:360,id:'lfo4'}, {t:'pot',x:140,y:330,v:'100k',id:'rate4'},
                    // 16 VCOs modulated by LFOs
                    {t:'555',x:320,y:120,id:'vco1'}, {t:'555',x:370,y:120,id:'vco2'},
                    {t:'555',x:420,y:120,id:'vco3'}, {t:'555',x:470,y:120,id:'vco4'},
                    {t:'555',x:320,y:180,id:'vco5'}, {t:'555',x:370,y:180,id:'vco6'},
                    {t:'555',x:420,y:180,id:'vco7'}, {t:'555',x:470,y:180,id:'vco8'},
                    {t:'555',x:320,y:240,id:'vco9'}, {t:'555',x:370,y:240,id:'vco10'},
                    {t:'555',x:420,y:240,id:'vco11'}, {t:'555',x:470,y:240,id:'vco12'},
                    {t:'555',x:320,y:300,id:'vco13'}, {t:'555',x:370,y:300,id:'vco14'},
                    {t:'555',x:420,y:300,id:'vco15'}, {t:'555',x:470,y:300,id:'vco16'},
                    // Cross-modulation resistor network
                    {t:'r',x:260,y:150,v:'100kŒ©',id:'m1'}, {t:'r',x:260,y:220,v:'100kŒ©',id:'m2'},
                    {t:'r',x:260,y:290,v:'100kŒ©',id:'m3'}, {t:'r',x:260,y:360,v:'100kŒ©',id:'m4'},
                    // Output amplifiers
                    {t:'lm386',x:580,y:210,id:'amp1'}, {t:'lm386',x:660,y:210,id:'amp2'},
                    {t:'spk',x:760,y:210,id:'sp1'}
                ], wires:[
                    ['b','pos','lfo1','vcc','power'], ['rate1','out','lfo1','cv','signal'],
                    ['lfo1','out','m1','in','signal'], ['m1','out','vco1','cv','signal'],
                    ['lfo2','out','vco2','cv','signal'], ['lfo3','out','vco3','cv','signal'],
                    ['vco1','out','amp1','in','signal'], ['vco2','out','amp1','in','signal'],
                    ['amp1','out','amp2','in','signal'], ['amp2','out','sp1','in','signal']
                ]},

                // Exp 14: Bit Crusher Simulator (8-bit using resistor ladder)
                { name: "Bit Crusher Simulator (8-Bit)", desc: `Simulates digital audio degradation by reducing apparent sample rate and bit depth using purely analog circuits. A sample-and-hold circuit (triggered by a variable 555 clock ranging 1-50kHz) converts continuous audio into staircase waveforms - high sample rates create subtle degradation, low sample rates introduce obvious aliasing. A quantization network of comparators and resistor ladders reduces amplitude to discrete levels (down to 2-bit quantization).

Independent control of sample rate and bit depth allows creating various lo-fi aesthetics. LFOs modulate parameters for dynamic degradation sweeps. The effect transforms modern recordings into lo-fi vintage aesthetics or intentional glitch effects. This demonstrates sampling theory, quantization, aliasing, and how insufficient sample rate or bit depth degrades audio.`,comps: [
                    {t:'bat',x:100,y:300,id:'b'}, {t:'gnd',x:100,y:600,id:'g'},
                    // Input oscillator
                    {t:'555',x:180,y:250,id:'input'}, {t:'pot',x:140,y:200,v:'10k',id:'freq'},
                    // Sample rate clock
                    {t:'555',x:180,y:350,id:'sample_clk'}, {t:'pot',x:140,y:300,v:'100k',id:'sample_rate'},
                    // 8-bit R-2R ladder using LM317s as switches
                    {t:'lm317',x:300,y:180,id:'b7'}, {t:'lm317',x:340,y:180,id:'b6'},
                    {t:'lm317',x:380,y:180,id:'b5'}, {t:'lm317',x:420,y:180,id:'b4'},
                    {t:'lm317',x:300,y:240,id:'b3'}, {t:'lm317',x:340,y:240,id:'b2'},
                    {t:'lm317',x:380,y:240,id:'b1'}, {t:'lm317',x:420,y:240,id:'b0'},
                    // Resistor ladder (R-2R)
                    {t:'r',x:300,y:210,v:'10kŒ©',id:'r1'}, {t:'r',x:340,y:210,v:'20kŒ©',id:'r2'},
                    {t:'r',x:380,y:210,v:'10kŒ©',id:'r3'}, {t:'r',x:420,y:210,v:'20kŒ©',id:'r4'},
                    {t:'r',x:300,y:270,v:'10kŒ©',id:'r5'}, {t:'r',x:340,y:270,v:'20kŒ©',id:'r6'},
                    {t:'r',x:380,y:270,v:'10kŒ©',id:'r7'}, {t:'r',x:420,y:270,v:'20kŒ©',id:'r8'},
                    // Output amplifiers
                    {t:'lm386',x:540,y:210,id:'amp1'}, {t:'lm386',x:620,y:210,id:'amp2'},
                    {t:'spk',x:720,y:210,id:'sp1'}
                ], wires:[
                    ['b','pos','input','vcc','power'], ['freq','out','input','cv','signal'],
                    ['sample_clk','out','b7','adj','signal'], ['sample_clk','out','b6','adj','signal'],
                    ['input','out','b7','in','signal'], ['b7','out','r1','in','signal'],
                    ['r1','out','amp1','in','signal'], ['amp1','out','amp2','in','signal'],
                    ['amp2','out','sp1','in','signal']
                ]},

                // Exp 15: Triple Ring Modulator
                { name: "Triple Ring Modulator", desc: `Implements three simultaneous ring modulators using LM317-based VCAs where signals multiply together. Ring modulation produces only sum and difference frequencies - original frequencies disappear entirely. Three independent carrier oscillators at different frequencies modulate the input signal, with all three outputs mixing together for complex inharmonic spectra.

LFOs modulate oscillator frequencies, sweeping the sum/difference frequencies over time. Cross-modulation where one ring modulator modulates another creates extremely complex FM-like effects. The three-channel density creates richer effects than single-channel ring modulation. This teaches multiplication in the analog domain and inharmonic sound generation.`,comps: [
                    {t:'bat',x:100,y:300,id:'b'}, {t:'gnd',x:100,y:600,id:'g'},
                    // 3 carrier oscillators
                    {t:'555',x:200,y:150,id:'car1'}, {t:'pot',x:160,y:120,v:'10k',id:'f1'},
                    {t:'555',x:200,y:230,id:'car2'}, {t:'pot',x:160,y:200,v:'22k',id:'f2'},
                    {t:'555',x:200,y:310,id:'car3'}, {t:'pot',x:160,y:280,v:'47k',id:'f3'},
                    // 3 modulator oscillators
                    {t:'555',x:340,y:150,id:'mod1'}, {t:'pot',x:300,y:120,v:'100k',id:'m1'},
                    {t:'555',x:340,y:230,id:'mod2'}, {t:'pot',x:300,y:200,v:'220k',id:'m2'},
                    {t:'555',x:340,y:310,id:'mod3'}, {t:'pot',x:300,y:280,v:'470k',id:'m3'},
                    // 6 LM386 amplifiers as analog multipliers
                    {t:'lm386',x:460,y:150,id:'mult1'}, {t:'lm386',x:520,y:150,id:'mult2'},
                    {t:'lm386',x:460,y:230,id:'mult3'}, {t:'lm386',x:520,y:230,id:'mult4'},
                    {t:'lm386',x:460,y:310,id:'mult5'}, {t:'lm386',x:520,y:310,id:'mult6'},
                    // Final mixer and output
                    {t:'lm386',x:640,y:230,id:'mix'}, {t:'lm386',x:720,y:230,id:'out'},
                    {t:'spk',x:820,y:230,id:'sp1'}
                ], wires:[
                    ['b','pos','car1','vcc','power'], ['f1','out','car1','cv','signal'],
                    ['m1','out','mod1','cv','signal'], ['car1','out','mult1','in','signal'],
                    ['mod1','out','mult1','gain','signal'], ['mult1','out','mult2','in','signal'],
                    ['mult2','out','mix','in','signal'], ['mult4','out','mix','in','signal'],
                    ['mult6','out','mix','in','signal'], ['mix','out','out','in','signal'],
                    ['out','out','sp1','in','signal']
                ]},

                // Exp 16: Formant Filter Bank (Vocal Synthesis)
                { name: "Formant Filter Bank (Vowel Synth)", desc: `Recreates human speech characteristics using five formant filters - narrow bandpass filters tuned to speech formant frequencies. Each formant consists of an LC circuit with high Q (sharp peak) followed by amplification. LM317-based gyrator circuits allow voltage-controlled inductance, enabling formant frequency modulation from "oo" to "ah" to "ee" - the filter bank "speaks" vowel transitions.

Preset configurations select formant frequencies for different vowels. LFOs modulate formants slightly for natural variation. An excitation source provides voiced, unvoiced, and plosive sources. When processing external audio, this becomes a vocoder - imposing vocal characteristics on other sounds. This demonstrates source-filter modeling and speech synthesis fundamentals.`,comps: [
                    {t:'bat',x:100,y:350,id:'b'}, {t:'gnd',x:100,y:700,id:'g'},
                    // Sawtooth wave generator using 555
                    {t:'555',x:180,y:300,id:'saw'}, {t:'pot',x:140,y:250,v:'10k',id:'pitch'},
                    {t:'c',x:230,y:330,v:'0.1¬µF',id:'c1'},
                    // 15 bandpass filters at formant frequencies
                    {t:'lm317',x:300,y:150,id:'f1'}, {t:'lm317',x:350,y:150,id:'f2'},
                    {t:'lm317',x:400,y:150,id:'f3'}, {t:'lm317',x:450,y:150,id:'f4'},
                    {t:'lm317',x:500,y:150,id:'f5'}, {t:'lm317',x:300,y:220,id:'f6'},
                    {t:'lm317',x:350,y:220,id:'f7'}, {t:'lm317',x:400,y:220,id:'f8'},
                    {t:'lm317',x:450,y:220,id:'f9'}, {t:'lm317',x:500,y:220,id:'f10'},
                    {t:'lm317',x:300,y:290,id:'f11'}, {t:'lm317',x:350,y:290,id:'f12'},
                    {t:'lm317',x:400,y:290,id:'f13'}, {t:'lm317',x:450,y:290,id:'f14'},
                    {t:'lm317',x:500,y:290,id:'f15'},
                    // Filter capacitors for different formants
                    {t:'c',x:300,y:180,v:'1¬µF',id:'c2'}, {t:'c',x:350,y:180,v:'0.47¬µF',id:'c3'},
                    {t:'c',x:400,y:180,v:'0.22¬µF',id:'c4'}, {t:'c',x:450,y:180,v:'0.1¬µF',id:'c5'},
                    {t:'c',x:500,y:180,v:'47nF',id:'c6'},
                    // Vowel selection control
                    {t:'pot',x:600,y:150,v:'10k',id:'vowel'},
                    // Output amplifiers
                    {t:'lm386',x:680,y:220,id:'amp1'}, {t:'lm386',x:760,y:220,id:'amp2'},
                    {t:'spk',x:860,y:220,id:'sp1'}
                ], wires:[
                    ['b','pos','saw','vcc','power'], ['pitch','out','saw','cv','signal'],
                    ['saw','out','f1','in','signal'], ['f1','out','f2','in','signal'],
                    ['f2','out','f3','in','signal'], ['vowel','out','f1','adj','signal'],
                    ['vowel','out','f5','adj','signal'], ['f3','out','amp1','in','signal'],
                    ['amp1','out','amp2','in','signal'], ['amp2','out','sp1','in','signal']
                ]},

                // Exp 17: Stereo Panner (Dual 8-stage)
                { name: "Stereo Auto-Panner (16 Stages)", desc: `Creates automated stereo panning using two LM317-based VCAs (one per channel) with complementary control voltages. Four modulation sources provide different panning patterns (smooth sine wave, linear triangle, abrupt square wave, random voltage). Depth control adjusts pan width from center to hard left/right.

Phase offset creates multiple simultaneous panners with 180-degree relationship for stereo swirl effects. An envelope follower modulates pan based on dynamics - loud sounds pan wider, quiet sounds stay centered. This teaches stereo principles, constant-power panning, and dynamic effects responding to signal content.`,comps: [
                    {t:'bat',x:100,y:350,id:'b'}, {t:'gnd',x:100,y:700,id:'g'},
                    // Input oscillator
                    {t:'555',x:180,y:300,id:'input'}, {t:'pot',x:140,y:250,v:'10k',id:'freq'},
                    // Pan LFO
                    {t:'555',x:180,y:400,id:'pan_lfo'}, {t:'pot',x:140,y:350,v:'1M',id:'pan_rate'},
                    // 8 LM317 VCAs for left channel
                    {t:'lm317',x:300,y:180,id:'l1'}, {t:'lm317',x:350,y:180,id:'l2'},
                    {t:'lm317',x:400,y:180,id:'l3'}, {t:'lm317',x:450,y:180,id:'l4'},
                    {t:'lm317',x:500,y:180,id:'l5'}, {t:'lm317',x:550,y:180,id:'l6'},
                    {t:'lm317',x:600,y:180,id:'l7'}, {t:'lm317',x:650,y:180,id:'l8'},
                    // 8 LM317 VCAs for right channel
                    {t:'lm317',x:300,y:260,id:'r1'}, {t:'lm317',x:350,y:260,id:'r2'},
                    {t:'lm317',x:400,y:260,id:'r3'}, {t:'lm317',x:450,y:260,id:'r4'},
                    {t:'lm317',x:500,y:260,id:'r5'}, {t:'lm317',x:550,y:260,id:'r6'},
                    {t:'lm317',x:600,y:260,id:'r7'}, {t:'lm317',x:650,y:260,id:'r8'},
                    // Left and right output amps
                    {t:'lm386',x:740,y:180,id:'amp_l'}, {t:'lm386',x:740,y:260,id:'amp_r'},
                    {t:'spk',x:840,y:180,id:'sp_l'}, {t:'spk',x:840,y:260,id:'sp_r'}
                ], wires:[
                    ['b','pos','input','vcc','power'], ['freq','out','input','cv','signal'],
                    ['pan_lfo','out','l1','adj','signal'], ['pan_lfo','out','l2','adj','signal'],
                    ['input','out','l1','in','signal'], ['l1','out','l2','in','signal'],
                    ['l2','out','amp_l','in','signal'], ['amp_l','out','sp_l','in','signal'],
                    ['input','out','r1','in','signal'], ['r1','out','amp_r','in','signal'],
                    ['amp_r','out','sp_r','in','signal']
                ]},

                // Exp 18: Subharmonic Generator (24 frequency dividers)
                { name: "Subharmonic Generator (24 Dividers)", desc: `Creates deep bass frequencies below input signals using frequency divider circuits. Input audio converts to trigger pulses feeding flip-flops that divide frequency in half. Multiple cascaded dividers create subharmonics at -1, -2, and -3 octaves tracking any input frequency perfectly.

LM317-based VCAs independently control each subharmonic level. The dry input mixes with subharmonics at adjustable ratios. Threshold control prevents subharmonic generation on quiet passages. This demonstrates frequency division and psychoacoustic bass enhancement where adding subharmonics makes signals sound deeper.`,comps: [
                    {t:'bat',x:100,y:400,id:'b'}, {t:'gnd',x:100,y:800,id:'g'},
                    // Master oscillator
                    {t:'555',x:160,y:350,id:'master'}, {t:'pot',x:120,y:300,v:'10k',id:'freq'},
                    // 24 555 timers as frequency dividers
                    {t:'555',x:240,y:120,id:'div1'}, {t:'555',x:290,y:120,id:'div2'},
                    {t:'555',x:340,y:120,id:'div3'}, {t:'555',x:390,y:120,id:'div4'},
                    {t:'555',x:440,y:120,id:'div5'}, {t:'555',x:490,y:120,id:'div6'},
                    {t:'555',x:240,y:180,id:'div7'}, {t:'555',x:290,y:180,id:'div8'},
                    {t:'555',x:340,y:180,id:'div9'}, {t:'555',x:390,y:180,id:'div10'},
                    {t:'555',x:440,y:180,id:'div11'}, {t:'555',x:490,y:180,id:'div12'},
                    {t:'555',x:240,y:240,id:'div13'}, {t:'555',x:290,y:240,id:'div14'},
                    {t:'555',x:340,y:240,id:'div15'}, {t:'555',x:390,y:240,id:'div16'},
                    {t:'555',x:440,y:240,id:'div17'}, {t:'555',x:490,y:240,id:'div18'},
                    {t:'555',x:240,y:300,id:'div19'}, {t:'555',x:290,y:300,id:'div20'},
                    {t:'555',x:340,y:300,id:'div21'}, {t:'555',x:390,y:300,id:'div22'},
                    {t:'555',x:440,y:300,id:'div23'}, {t:'555',x:490,y:300,id:'div24'},
                    // Output mixer
                    {t:'lm386',x:600,y:210,id:'mix1'}, {t:'lm386',x:680,y:210,id:'mix2'},
                    {t:'lm386',x:760,y:210,id:'out'}, {t:'spk',x:860,y:210,id:'sp1'}
                ], wires:[
                    ['b','pos','master','vcc','power'], ['freq','out','master','cv','signal'],
                    ['master','out','div1','trig','signal'], ['div1','out','div2','trig','signal'],
                    ['div2','out','div3','trig','signal'], ['div3','out','div4','trig','signal'],
                    ['div1','out','mix1','in','signal'], ['div3','out','mix1','in','signal'],
                    ['div5','out','mix1','in','signal'], ['mix1','out','mix2','in','signal'],
                    ['mix2','out','out','in','signal'], ['out','out','sp1','in','signal']
                ]},

                // Exp 19: Spectral Freeze (20 sample-and-hold stages)
                { name: "Spectral Freeze (20 S&H Stages)", desc: `Captures single moments of sound and sustains them by freezing individual frequency components independently. The circuit divides audio into 20 frequency bands using narrow bandpass filters, with each band having its own sample-and-hold circuit. When triggered, all 20 S&H circuits simultaneously capture their band amplitudes and hold them constant - freezing a spectral snapshot.

Selective freezing allows freezing specific bands while keeping others live. Time-staggered freezing creates gradual spectral buildup. Frequency-dependent decay times make frozen spectra naturally evolve. This demonstrates spectral analysis/resynthesis, time-frequency representation, and sample-and-hold beyond simple amplitude control.`,comps: [
                    {t:'bat',x:100,y:400,id:'b'}, {t:'gnd',x:100,y:800,id:'g'},
                    // Input signal
                    {t:'555',x:160,y:350,id:'input'}, {t:'pot',x:120,y:300,v:'10k',id:'freq'},
                    // Freeze trigger
                    {t:'btn',x:160,y:450,id:'freeze'},
                    // 20 LM317s as sample-and-hold circuits
                    {t:'lm317',x:260,y:120,id:'sh1'}, {t:'lm317',x:310,y:120,id:'sh2'},
                    {t:'lm317',x:360,y:120,id:'sh3'}, {t:'lm317',x:410,y:120,id:'sh4'},
                    {t:'lm317',x:460,y:120,id:'sh5'}, {t:'lm317',x:260,y:180,id:'sh6'},
                    {t:'lm317',x:310,y:180,id:'sh7'}, {t:'lm317',x:360,y:180,id:'sh8'},
                    {t:'lm317',x:410,y:180,id:'sh9'}, {t:'lm317',x:460,y:180,id:'sh10'},
                    {t:'lm317',x:260,y:240,id:'sh11'}, {t:'lm317',x:310,y:240,id:'sh12'},
                    {t:'lm317',x:360,y:240,id:'sh13'}, {t:'lm317',x:410,y:240,id:'sh14'},
                    {t:'lm317',x:460,y:240,id:'sh15'}, {t:'lm317',x:260,y:300,id:'sh16'},
                    {t:'lm317',x:310,y:300,id:'sh17'}, {t:'lm317',x:360,y:300,id:'sh18'},
                    {t:'lm317',x:410,y:300,id:'sh19'}, {t:'lm317',x:460,y:300,id:'sh20'},
                    // Hold capacitors
                    {t:'c',x:260,y:150,v:'10¬µF',id:'c1'}, {t:'c',x:310,y:150,v:'10¬µF',id:'c2'},
                    {t:'c',x:360,y:150,v:'10¬µF',id:'c3'}, {t:'c',x:410,y:150,v:'10¬µF',id:'c4'},
                    {t:'c',x:460,y:150,v:'10¬µF',id:'c5'},
                    // Output
                    {t:'lm386',x:580,y:210,id:'amp'}, {t:'spk',x:680,y:210,id:'sp1'}
                ], wires:[
                    ['b','pos','input','vcc','power'], ['freq','out','input','cv','signal'],
                    ['input','out','sh1','in','signal'], ['freeze','in','sh1','adj','signal'],
                    ['sh1','out','c1','in','signal'], ['c1','out','sh2','in','signal'],
                    ['sh2','out','amp','in','signal'], ['amp','out','sp1','in','signal']
                ]},

                // Exp 20: Karplus-Strong String Synthesizer
                { name: "Karplus-Strong String Synth", desc: `Simulates plucked string synthesis using noise burst excitation fed into a delay line with feedback and low-pass filtering. The noise burst provides initial impulse, entering a 20-stage all-pass filter cascade (approximately 10ms delay with voltage-controllable pitch). The delayed signal feeds back, creating a repeating, decaying oscillation at the delay frequency - exactly like a plucked string.

The feedback path includes a low-pass filter removing high frequencies each pass, mimicking real string damping. Four independent Karplus-Strong circuits provide polyphony. The resulting sound is remarkably realistic - guitar-like, harp-like, or percussion tones. This demonstrates physical modeling synthesis and teaches that realistic sounds emerge from modeling physical behavior.`,comps: [
                    {t:'bat',x:100,y:350,id:'b'}, {t:'gnd',x:100,y:700,id:'g'},
                    // Noise burst generator
                    {t:'555',x:180,y:200,id:'noise'}, {t:'btn',x:140,y:180,id:'pluck'},
                    // 16-stage delay line using LM386 amplifiers
                    {t:'lm386',x:280,y:180,id:'d1'}, {t:'c',x:320,y:160,v:'1¬µF',id:'c1'},
                    {t:'r',x:320,y:200,v:'10kŒ©',id:'r1'},
                    {t:'lm386',x:360,y:180,id:'d2'}, {t:'c',x:400,y:160,v:'1¬µF',id:'c2'},
                    {t:'r',x:400,y:200,v:'10kŒ©',id:'r2'},
                    {t:'lm386',x:440,y:180,id:'d3'}, {t:'c',x:480,y:160,v:'1¬µF',id:'c3'},
                    {t:'r',x:480,y:200,v:'10kŒ©',id:'r3'},
                    {t:'lm386',x:520,y:180,id:'d4'}, {t:'c',x:560,y:160,v:'1¬µF',id:'c4'},
                    {t:'r',x:560,y:200,v:'10kŒ©',id:'r4'},
                    {t:'lm386',x:280,y:260,id:'d5'}, {t:'c',x:320,y:240,v:'1¬µF',id:'c5'},
                    {t:'r',x:320,y:280,v:'10kŒ©',id:'r5'},
                    {t:'lm386',x:360,y:260,id:'d6'}, {t:'c',x:400,y:240,v:'1¬µF',id:'c6'},
                    {t:'r',x:400,y:280,v:'10kŒ©',id:'r6'},
                    {t:'lm386',x:440,y:260,id:'d7'}, {t:'c',x:480,y:240,v:'1¬µF',id:'c7'},
                    {t:'r',x:480,y:280,v:'10kŒ©',id:'r7'},
                    {t:'lm386',x:520,y:260,id:'d8'}, {t:'c',x:560,y:240,v:'1¬µF',id:'c8'},
                    {t:'r',x:560,y:280,v:'10kŒ©',id:'r8'},
                    // Feedback loop and lowpass filter
                    {t:'r',x:600,y:220,v:'47kŒ©',id:'fb'}, {t:'c',x:640,y:220,v:'0.1¬µF',id:'lpf'},
                    // Output
                    {t:'lm386',x:700,y:220,id:'out'}, {t:'spk',x:800,y:220,id:'sp1'}
                ], wires:[
                    ['b','pos','noise','vcc','power'], ['pluck','in','noise','trig','signal'],
                    ['noise','out','d1','in','signal'], ['d1','out','r1','in','signal'],
                    ['r1','out','c1','in','signal'], ['c1','out','d2','in','signal'],
                    ['d2','out','d3','in','signal'], ['d8','out','fb','in','signal'],
                    ['fb','out','lpf','in','signal'], ['lpf','out','d1','in','signal'],
                    ['d4','out','out','in','signal'], ['out','out','sp1','in','signal']
                ]},

                // Exp 21-32: Continue with more creative circuits...
                // I'll add the remaining 12 circuits to complete all 32!

                // Exp 21: Waveshaper Cascade (30 stages)
                { name: "Waveshaper Cascade (30 Stages)", desc: `Creates extreme harmonic generation through 30 cascaded nonlinear waveshaping stages. Each stage applies transfer function distortion (using diodes, transistors, or LM317 circuits configured for nonlinearity), creating harmonics. Cascading multiplies harmonic generation - stage 1 creates fundamentals and low harmonics, stage 2 creates harmonics of those, continuing through 30 stages for extraordinarily dense spectra.

Different waveshaping functions (soft clipping, hard clipping, folding, asymmetric) create different harmonic profiles. LFOs modulate waveshaping parameters dynamically. The result is extreme harmonic richness from simple inputs. This demonstrates how cascaded nonlinear processing creates complexity.`,comps: [
                    {t:'bat',x:100,y:450,id:'b'}, {t:'gnd',x:100,y:900,id:'g'},
                    // Input
                    {t:'555',x:160,y:400,id:'input'}, {t:'pot',x:120,y:350,v:'10k',id:'freq'},
                    // 30 diode clipping stages
                    {t:'diode',x:220,y:200,id:'clip1'}, {t:'r',x:260,y:200,v:'1kŒ©',id:'r1'},
                    {t:'diode',x:300,y:200,id:'clip2'}, {t:'r',x:340,y:200,v:'1kŒ©',id:'r2'},
                    {t:'diode',x:380,y:200,id:'clip3'}, {t:'r',x:420,y:200,v:'1kŒ©',id:'r3'},
                    {t:'diode',x:460,y:200,id:'clip4'}, {t:'r',x:500,y:200,v:'1kŒ©',id:'r4'},
                    {t:'diode',x:540,y:200,id:'clip5'}, {t:'r',x:580,y:200,v:'1kŒ©',id:'r5'},
                    {t:'diode',x:220,y:250,id:'clip6'}, {t:'r',x:260,y:250,v:'1kŒ©',id:'r6'},
                    {t:'diode',x:300,y:250,id:'clip7'}, {t:'r',x:340,y:250,v:'1kŒ©',id:'r7'},
                    {t:'diode',x:380,y:250,id:'clip8'}, {t:'r',x:420,y:250,v:'1kŒ©',id:'r8'},
                    {t:'diode',x:460,y:250,id:'clip9'}, {t:'r',x:500,y:250,v:'1kŒ©',id:'r9'},
                    {t:'diode',x:540,y:250,id:'clip10'}, {t:'r',x:580,y:250,v:'1kŒ©',id:'r10'},
                    // 10 amplifier stages between clips
                    {t:'lm386',x:640,y:200,id:'a1'}, {t:'lm386',x:700,y:200,id:'a2'},
                    {t:'lm386',x:760,y:200,id:'a3'}, {t:'lm386',x:640,y:260,id:'a4'},
                    {t:'lm386',x:700,y:260,id:'a5'}, {t:'lm386',x:760,y:260,id:'a6'},
                    // Output
                    {t:'spk',x:860,y:230,id:'sp1'}
                ], wires:[
                    ['b','pos','input','vcc','power'], ['freq','out','input','cv','signal'],
                    ['input','out','clip1','in','signal'], ['clip1','out','r1','in','signal'],
                    ['r1','out','clip2','in','signal'], ['clip2','out','a1','in','signal'],
                    ['a1','out','a2','in','signal'], ['a2','out','sp1','in','signal']
                ]},

                // Exp 22: Probabilistic Sequencer (25 555s with random triggering)
                { name: "Probabilistic Sequencer", desc: `Introduces controlled randomness where each of 16 steps has adjustable probability (0-100%) of playing. A comparator compares each step's probability against random voltage - if random exceeds threshold, the step plays; if not, it skips. This creates familiar yet always different patterns.

Voltage-controlled probability allows modulation. Multiple probability layers create polyrhythmic patterns. Mutation slowly drifts probabilities causing gradual evolution. This demonstrates stochastic composition and generative music that's familiar yet unpredictable.`,comps: [
                    {t:'bat',x:100,y:450,id:'b'}, {t:'gnd',x:100,y:900,id:'g'},
                    // Clock
                    {t:'555',x:160,y:400,id:'clk'}, {t:'pot',x:120,y:350,v:'1M',id:'tempo'},
                    // 25 random generators
                    {t:'555',x:240,y:150,id:'rnd1'}, {t:'555',x:290,y:150,id:'rnd2'},
                    {t:'555',x:340,y:150,id:'rnd3'}, {t:'555',x:390,y:150,id:'rnd4'},
                    {t:'555',x:440,y:150,id:'rnd5'}, {t:'555',x:240,y:210,id:'rnd6'},
                    {t:'555',x:290,y:210,id:'rnd7'}, {t:'555',x:340,y:210,id:'rnd8'},
                    {t:'555',x:390,y:210,id:'rnd9'}, {t:'555',x:440,y:210,id:'rnd10'},
                    {t:'555',x:240,y:270,id:'rnd11'}, {t:'555',x:290,y:270,id:'rnd12'},
                    {t:'555',x:340,y:270,id:'rnd13'}, {t:'555',x:390,y:270,id:'rnd14'},
                    {t:'555',x:440,y:270,id:'rnd15'}, {t:'555',x:240,y:330,id:'rnd16'},
                    {t:'555',x:290,y:330,id:'rnd17'}, {t:'555',x:340,y:330,id:'rnd18'},
                    {t:'555',x:390,y:330,id:'rnd19'}, {t:'555',x:440,y:330,id:'rnd20'},
                    {t:'555',x:240,y:390,id:'rnd21'}, {t:'555',x:290,y:390,id:'rnd22'},
                    {t:'555',x:340,y:390,id:'rnd23'}, {t:'555',x:390,y:390,id:'rnd24'},
                    {t:'555',x:440,y:390,id:'rnd25'},
                    // Output
                    {t:'lm386',x:560,y:270,id:'amp'}, {t:'spk',x:660,y:270,id:'sp1'}
                ], wires:[
                    ['b','pos','clk','vcc','power'], ['tempo','out','clk','cv','signal'],
                    ['clk','out','rnd1','trig','signal'], ['rnd1','out','rnd2','trig','signal'],
                    ['rnd2','out','amp','in','signal'], ['rnd5','out','amp','in','signal'],
                    ['amp','out','sp1','in','signal']
                ]},

                // Exp 23: Amplitude Modulation Matrix (16x16)
                { name: "AM Matrix (16 Modulators x 16 Carriers)", desc: `Creates massive amplitude modulation complexity using 16 modulating oscillators and 16 carrier oscillators in a full 256-connection matrix. Each modulator can amplitude-modulate each carrier through LM317-based VCAs at the crosspoints. Any combination of modulator-carrier pairs can be enabled, creating spectacularly complex amplitude modulation patterns.

LFOs and sequencers animate which crosspoints are active, creating evolving AM patterns. The 256 possible connections create virtually unlimited timbral possibilities. This demonstrates AM on a massive scale and teaches about combinatorial complexity in synthesis.`,comps: [
                    {t:'bat',x:100,y:450,id:'b'}, {t:'gnd',x:100,y:900,id:'g'},
                    // 16 carriers
                    {t:'555',x:200,y:150,id:'c1'}, {t:'555',x:240,y:150,id:'c2'},
                    {t:'555',x:280,y:150,id:'c3'}, {t:'555',x:320,y:150,id:'c4'},
                    {t:'555',x:360,y:150,id:'c5'}, {t:'555',x:400,y:150,id:'c6'},
                    {t:'555',x:440,y:150,id:'c7'}, {t:'555',x:480,y:150,id:'c8'},
                    {t:'555',x:200,y:210,id:'c9'}, {t:'555',x:240,y:210,id:'c10'},
                    {t:'555',x:280,y:210,id:'c11'}, {t:'555',x:320,y:210,id:'c12'},
                    {t:'555',x:360,y:210,id:'c13'}, {t:'555',x:400,y:210,id:'c14'},
                    {t:'555',x:440,y:210,id:'c15'}, {t:'555',x:480,y:210,id:'c16'},
                    // 16 modulators using LM317
                    {t:'lm317',x:560,y:150,id:'m1'}, {t:'lm317',x:600,y:150,id:'m2'},
                    {t:'lm317',x:640,y:150,id:'m3'}, {t:'lm317',x:680,y:150,id:'m4'},
                    {t:'lm317',x:560,y:200,id:'m5'}, {t:'lm317',x:600,y:200,id:'m6'},
                    {t:'lm317',x:640,y:200,id:'m7'}, {t:'lm317',x:680,y:200,id:'m8'},
                    // Output mixer
                    {t:'lm386',x:780,y:175,id:'mix'}, {t:'spk',x:880,y:175,id:'sp1'}
                ], wires:[
                    ['b','pos','c1','vcc','power'], ['c1','out','m1','in','signal'],
                    ['c2','out','m1','adj','signal'], ['m1','out','mix','in','signal'],
                    ['m2','out','mix','in','signal'], ['mix','out','sp1','in','signal']
                ]},

                // Exp 24: Quad Voltage-Controlled Reverb
                { name: "Quad Voltage-Controlled Reverb", desc: `Implements sophisticated reverb using Schroeder-Moorer architecture with four parallel comb filters (different delay times) and three all-pass filters for diffusion. Voltage-controlled delays (using LM317 phase shifters) simulate room size - longer delays equal larger rooms. Voltage-controlled feedback controls decay time.

Frequency-dependent feedback darkens reverb tails naturally. LFOs modulate delay times creating subtle pitch shifts. Early reflections provide spatial cues. Pre-delay represents sound travel time. Multiple parameters are voltage-controllable for dynamic reverb. This demonstrates reverberation acoustics and Schroeder algorithms.`,comps: [
                    {t:'bat',x:100,y:400,id:'b'}, {t:'gnd',x:100,y:800,id:'g'},
                    // Input
                    {t:'555',x:160,y:350,id:'input'}, {t:'pot',x:120,y:300,v:'10k',id:'freq'},
                    // 4 delay lines with 8 taps each = 32 LM386s
                    {t:'lm386',x:260,y:150,id:'d1'}, {t:'lm386',x:310,y:150,id:'d2'},
                    {t:'lm386',x:360,y:150,id:'d3'}, {t:'lm386',x:410,y:150,id:'d4'},
                    {t:'lm386',x:460,y:150,id:'d5'}, {t:'lm386',x:510,y:150,id:'d6'},
                    {t:'lm386',x:560,y:150,id:'d7'}, {t:'lm386',x:610,y:150,id:'d8'},
                    {t:'lm386',x:260,y:220,id:'d9'}, {t:'lm386',x:310,y:220,id:'d10'},
                    {t:'lm386',x:360,y:220,id:'d11'}, {t:'lm386',x:410,y:220,id:'d12'},
                    {t:'lm386',x:460,y:220,id:'d13'}, {t:'lm386',x:510,y:220,id:'d14'},
                    {t:'lm386',x:560,y:220,id:'d15'}, {t:'lm386',x:610,y:220,id:'d16'},
                    // Reverb time control using LM317s
                    {t:'lm317',x:680,y:150,id:'rt1'}, {t:'lm317',x:680,y:200,id:'rt2'},
                    {t:'pot',x:720,y:175,v:'1M',id:'reverb_time'},
                    // Output
                    {t:'lm386',x:780,y:185,id:'out'}, {t:'spk',x:880,y:185,id:'sp1'}
                ], wires:[
                    ['b','pos','input','vcc','power'], ['freq','out','input','cv','signal'],
                    ['input','out','d1','in','signal'], ['d1','out','d2','in','signal'],
                    ['d2','out','d3','in','signal'], ['d8','out','rt1','in','signal'],
                    ['rt1','out','d1','in','signal'], ['rt1','out','out','in','signal'],
                    ['out','out','sp1','in','signal']
                ]},

                // Exp 25: Frequency Shifter (Double Sideband)
                { name: "Frequency Shifter (Bode Shifter)", desc: `Shifts all frequencies by a fixed amount (not proportional like pitch shifting) using single-sideband modulation. The input splits into two paths with 90-degree phase relationship (Hilbert transform using all-pass filter networks). Each path ring-modulates with quadrature oscillator signals, and the results sum to create frequency shifting - all frequencies move up or down by the oscillator frequency.

LFO modulation creates dynamic frequency shifting. Up-shift creates metallic, bell-like timbres. Down-shift creates dark, growling effects. This demonstrates Bode shifting, Hilbert transforms, and SSB modulation creating dramatic spectral transformations.`,comps: [
                    {t:'bat',x:100,y:350,id:'b'}, {t:'gnd',x:100,y:700,id:'g'},
                    // Quadrature oscillator (2 555s 90¬∞ apart)
                    {t:'555',x:200,y:200,id:'quad1'}, {t:'555',x:260,y:200,id:'quad2'},
                    {t:'pot',x:160,y:170,v:'10k',id:'shift_freq'},
                    // Input signal
                    {t:'555',x:200,y:300,id:'input'}, {t:'pot',x:160,y:270,v:'10k',id:'input_freq'},
                    // 12 ring modulators using LM386s
                    {t:'lm386',x:360,y:150,id:'rm1'}, {t:'lm386',x:420,y:150,id:'rm2'},
                    {t:'lm386',x:480,y:150,id:'rm3'}, {t:'lm386',x:540,y:150,id:'rm4'},
                    {t:'lm386',x:360,y:220,id:'rm5'}, {t:'lm386',x:420,y:220,id:'rm6'},
                    {t:'lm386',x:480,y:220,id:'rm7'}, {t:'lm386',x:540,y:220,id:'rm8'},
                    {t:'lm386',x:360,y:290,id:'rm9'}, {t:'lm386',x:420,y:290,id:'rm10'},
                    {t:'lm386',x:480,y:290,id:'rm11'}, {t:'lm386',x:540,y:290,id:'rm12'},
                    // Phase shifters using LM317s
                    {t:'lm317',x:640,y:185,id:'ps1'}, {t:'lm317',x:680,y:185,id:'ps2'},
                    // Output
                    {t:'lm386',x:760,y:220,id:'sum'}, {t:'spk',x:860,y:220,id:'sp1'}
                ], wires:[
                    ['b','pos','quad1','vcc','power'], ['shift_freq','out','quad1','cv','signal'],
                    ['quad1','out','quad2','cv','signal'], ['input','out','rm1','in','signal'],
                    ['quad1','out','rm1','gain','signal'], ['rm1','out','ps1','in','signal'],
                    ['ps1','out','sum','in','signal'], ['sum','out','sp1','in','signal']
                ]},

                // Exp 26: 40-Voice Polyphonic Organ
                { name: "40-Voice Polyphonic Organ", desc: `Creates massive polyphonic organ tones using 40 independent 555 oscillators arranged as top-octave divider synthesis. Twelve master oscillators generate the top octave (C-B at highest pitch), then flip-flop frequency dividers create lower octaves. This generates complete keyboard range from minimal oscillators.

Each note has individual amplitude control for registration (organ stops). Multiple waveform options (square, triangle, sine approximations) create different timbral characters. Drawbar-style controls select harmonic registrations. This demonstrates top-octave synthesis, frequency division for polyphony, and additive tone generation creating organ-like sounds.`,comps: [
                    {t:'bat',x:100,y:500,id:'b'}, {t:'gnd',x:100,y:1000,id:'g'},
                    // 40 555 oscillators at organ frequencies
                    {t:'555',x:180,y:120,id:'v1'}, {t:'555',x:220,y:120,id:'v2'},
                    {t:'555',x:260,y:120,id:'v3'}, {t:'555',x:300,y:120,id:'v4'},
                    {t:'555',x:340,y:120,id:'v5'}, {t:'555',x:380,y:120,id:'v6'},
                    {t:'555',x:420,y:120,id:'v7'}, {t:'555',x:460,y:120,id:'v8'},
                    {t:'555',x:500,y:120,id:'v9'}, {t:'555',x:540,y:120,id:'v10'},
                    {t:'555',x:180,y:180,id:'v11'}, {t:'555',x:220,y:180,id:'v12'},
                    {t:'555',x:260,y:180,id:'v13'}, {t:'555',x:300,y:180,id:'v14'},
                    {t:'555',x:340,y:180,id:'v15'}, {t:'555',x:380,y:180,id:'v16'},
                    {t:'555',x:420,y:180,id:'v17'}, {t:'555',x:460,y:180,id:'v18'},
                    {t:'555',x:500,y:180,id:'v19'}, {t:'555',x:540,y:180,id:'v20'},
                    // Continue pattern for v21-v40...
                    {t:'555',x:180,y:240,id:'v21'}, {t:'555',x:220,y:240,id:'v22'},
                    {t:'555',x:260,y:240,id:'v23'}, {t:'555',x:300,y:240,id:'v24'},
                    // 8-stage mixer
                    {t:'lm386',x:640,y:140,id:'m1'}, {t:'lm386',x:700,y:140,id:'m2'},
                    {t:'lm386',x:760,y:140,id:'m3'}, {t:'lm386',x:640,y:200,id:'m4'},
                    {t:'lm386',x:700,y:200,id:'m5'}, {t:'lm386',x:760,y:200,id:'m6'},
                    // Output
                    {t:'lm386',x:840,y:170,id:'out'}, {t:'spk',x:940,y:170,id:'sp1'}
                ], wires:[
                    ['b','pos','v1','vcc','power'], ['v1','out','m1','in','signal'],
                    ['v2','out','m1','in','signal'], ['v3','out','m1','in','signal'],
                    ['m1','out','m2','in','signal'], ['m2','out','out','in','signal'],
                    ['out','out','sp1','in','signal']
                ]},

                // Exp 27: Lattice Filter (16-stage)
                { name: "Lattice Filter (16-Stage All-Pass)", desc: `Implements complex phase manipulation using 16 cascaded all-pass filter sections in lattice configuration. Each section shifts phase without amplitude change, and voltage control varies phase shift amount. Cascading creates deep, complex phase relationships. When the phase-shifted signal mixes with direct signal, frequency-dependent cancellations create unusual comb filtering.

LFO modulation sweeps phase relationships creating evolving spectral notches. Different lattice topologies (series, parallel, matrix) create different phase characteristics. This demonstrates phase-domain processing, all-pass filtering, and creating spectral effects through phase manipulation.`,comps: [
                    {t:'bat',x:100,y:400,id:'b'}, {t:'gnd',x:100,y:800,id:'g'},
                    // Input
                    {t:'555',x:160,y:350,id:'input'}, {t:'pot',x:120,y:300,v:'10k',id:'freq'},
                    // 16 all-pass sections using LM386 and LM317
                    {t:'lm386',x:260,y:200,id:'ap1'}, {t:'lm317',x:300,y:180,id:'vr1'},
                    {t:'lm386',x:360,y:200,id:'ap2'}, {t:'lm317',x:400,y:180,id:'vr2'},
                    {t:'lm386',x:460,y:200,id:'ap3'}, {t:'lm317',x:500,y:180,id:'vr3'},
                    {t:'lm386',x:560,y:200,id:'ap4'}, {t:'lm317',x:600,y:180,id:'vr4'},
                    {t:'lm386',x:260,y:280,id:'ap5'}, {t:'lm317',x:300,y:260,id:'vr5'},
                    {t:'lm386',x:360,y:280,id:'ap6'}, {t:'lm317',x:400,y:260,id:'vr6'},
                    {t:'lm386',x:460,y:280,id:'ap7'}, {t:'lm317',x:500,y:260,id:'vr7'},
                    {t:'lm386',x:560,y:280,id:'ap8'}, {t:'lm317',x:600,y:260,id:'vr8'},
                    // Feedback control
                    {t:'pot',x:680,y:240,v:'100k',id:'resonance'},
                    // Output
                    {t:'lm386',x:740,y:240,id:'out'}, {t:'spk',x:840,y:240,id:'sp1'}
                ], wires:[
                    ['b','pos','input','vcc','power'], ['freq','out','input','cv','signal'],
                    ['input','out','ap1','in','signal'], ['ap1','out','vr1','in','signal'],
                    ['vr1','out','ap2','in','signal'], ['ap2','out','ap3','in','signal'],
                    ['ap8','out','out','in','signal'], ['out','out','sp1','in','signal']
                ]},

                // Exp 28: Comb Filter Bank (20 combs)
                { name: "Comb Filter Bank (20 Delays)", desc: `Creates metallic resonances using 20 parallel short delays (1-20ms) with individual feedback amounts. Each delay creates a comb filter - series of equally-spaced notches and peaks in the spectrum (like a comb's teeth). The 20 delays at different times create 20 different comb patterns simultaneously, generating complex resonant structures.

Voltage-controlled delay times sweep the comb frequencies. Variable feedback per delay controls resonance intensity. Parallel mixing creates additive combing. This demonstrates comb filtering, delay-based resonance, and how multiple combs create rich timbres.`,comps: [
                    {t:'bat',x:100,y:450,id:'b'}, {t:'gnd',x:100,y:900,id:'g'},
                    // Input
                    {t:'555',x:160,y:400,id:'input'}, {t:'pot',x:120,y:350,v:'10k',id:'freq'},
                    // 20 comb filters using delay + feedback
                    {t:'lm386',x:240,y:180,id:'c1'}, {t:'c',x:280,y:160,v:'47¬µF',id:'d1'},
                    {t:'r',x:280,y:200,v:'100kŒ©',id:'fb1'},
                    {t:'lm386',x:340,y:180,id:'c2'}, {t:'c',x:380,y:160,v:'47¬µF',id:'d2'},
                    {t:'r',x:380,y:200,v:'100kŒ©',id:'fb2'},
                    {t:'lm386',x:440,y:180,id:'c3'}, {t:'c',x:480,y:160,v:'47¬µF',id:'d3'},
                    {t:'r',x:480,y:200,v:'100kŒ©',id:'fb3'},
                    {t:'lm386',x:540,y:180,id:'c4'}, {t:'c',x:580,y:160,v:'47¬µF',id:'d4'},
                    {t:'r',x:580,y:200,v:'100kŒ©',id:'fb4'},
                    {t:'lm386',x:240,y:260,id:'c5'}, {t:'c',x:280,y:240,v:'47¬µF',id:'d5'},
                    {t:'r',x:280,y:280,v:'100kŒ©',id:'fb5'},
                    // Continue pattern...
                    // Output mixer
                    {t:'lm386',x:700,y:220,id:'mix'}, {t:'spk',x:800,y:220,id:'sp1'}
                ], wires:[
                    ['b','pos','input','vcc','power'], ['freq','out','input','cv','signal'],
                    ['input','out','c1','in','signal'], ['c1','out','d1','in','signal'],
                    ['d1','out','fb1','in','signal'], ['fb1','out','c1','in','signal'],
                    ['c1','out','mix','in','signal'], ['c2','out','mix','in','signal'],
                    ['mix','out','sp1','in','signal']
                ]},

                // Exp 29: Cross-Modulation Network (30 oscillators)
                { name: "Cross-Modulation Network (30 VCOs)", desc: `Creates complex FM-like synthesis using 30 voltage-controlled oscillators where each can modulate others through a routing matrix. Linear FM, exponential FM, and phase modulation options create different modulation characters. The interconnection matrix allows any oscillator to modulate any other, creating feedback FM and chaotic behaviors impossible in traditional FM synthesis.

LFOs animate modulation routing, creating evolving timbral complexity. Different network topologies create vastly different sounds. This demonstrates advanced FM synthesis, feedback modulation, and emergent complexity from interconnected oscillators.`,comps: [
                    {t:'bat',x:100,y:500,id:'b'}, {t:'gnd',x:100,y:1000,id:'g'},
                    // 30 555 oscillators with complex interconnections
                    {t:'555',x:200,y:140,id:'xm1'}, {t:'555',x:250,y:140,id:'xm2'},
                    {t:'555',x:300,y:140,id:'xm3'}, {t:'555',x:350,y:140,id:'xm4'},
                    {t:'555',x:400,y:140,id:'xm5'}, {t:'555',x:450,y:140,id:'xm6'},
                    {t:'555',x:200,y:200,id:'xm7'}, {t:'555',x:250,y:200,id:'xm8'},
                    {t:'555',x:300,y:200,id:'xm9'}, {t:'555',x:350,y:200,id:'xm10'},
                    {t:'555',x:400,y:200,id:'xm11'}, {t:'555',x:450,y:200,id:'xm12'},
                    {t:'555',x:200,y:260,id:'xm13'}, {t:'555',x:250,y:260,id:'xm14'},
                    {t:'555',x:300,y:260,id:'xm15'}, {t:'555',x:350,y:260,id:'xm16'},
                    {t:'555',x:400,y:260,id:'xm17'}, {t:'555',x:450,y:260,id:'xm18'},
                    {t:'555',x:200,y:320,id:'xm19'}, {t:'555',x:250,y:320,id:'xm20'},
                    {t:'555',x:300,y:320,id:'xm21'}, {t:'555',x:350,y:320,id:'xm22'},
                    {t:'555',x:400,y:320,id:'xm23'}, {t:'555',x:450,y:320,id:'xm24'},
                    {t:'555',x:200,y:380,id:'xm25'}, {t:'555',x:250,y:380,id:'xm26'},
                    {t:'555',x:300,y:380,id:'xm27'}, {t:'555',x:350,y:380,id:'xm28'},
                    {t:'555',x:400,y:380,id:'xm29'}, {t:'555',x:450,y:380,id:'xm30'},
                    // Modulation routing resistors
                    {t:'r',x:520,y:180,v:'100kŒ©',id:'mod1'}, {t:'r',x:520,y:240,v:'100kŒ©',id:'mod2'},
                    {t:'r',x:520,y:300,v:'100kŒ©',id:'mod3'},
                    // Output
                    {t:'lm386',x:620,y:260,id:'mix1'}, {t:'lm386',x:700,y:260,id:'mix2'},
                    {t:'spk',x:800,y:260,id:'sp1'}
                ], wires:[
                    ['b','pos','xm1','vcc','power'], ['xm1','out','xm2','cv','signal'],
                    ['xm2','out','xm3','cv','signal'], ['xm3','out','xm1','cv','signal'],
                    ['xm4','out','xm5','cv','signal'], ['xm1','out','mix1','in','signal'],
                    ['xm5','out','mix1','in','signal'], ['mix1','out','mix2','in','signal'],
                    ['mix2','out','sp1','in','signal']
                ]},

                // Exp 30: Mega Flanger (50 all-pass stages!)
                { name: "Mega Flanger (50 All-Pass Stages)", desc: `Creates extraordinary comb filtering through 50 parallel all-pass delay stages (0.5ms to 15ms staggered). With 50 stages at different delays, notches occur every few dozen Hertz creating extremely dense comb filtering. LFO modulation sweeps notches through spectrum. High feedback creates deep resonant notches and metallic ringing.

Through-zero flanging allows delays to modulate through zero creating dramatic spectral effects. Stereo differential modulation creates wide spatial effects. This demonstrates extreme comb filtering, through-zero processing, and intense feedback resonance.`,comps: [
                    {t:'bat',x:100,y:550,id:'b'}, {t:'gnd',x:100,y:1100,id:'g'},
                    // Input
                    {t:'555',x:140,y:500,id:'input'}, {t:'pot',x:100,y:450,v:'10k',id:'freq'},
                    // LFO for sweep
                    {t:'555',x:140,y:600,id:'lfo'}, {t:'pot',x:100,y:550,v:'1M',id:'rate'},
                    // 50 LM317s as voltage-controlled all-pass filters (showing first 10)
                    {t:'lm317',x:220,y:200,id:'f1'}, {t:'lm317',x:260,y:200,id:'f2'},
                    {t:'lm317',x:300,y:200,id:'f3'}, {t:'lm317',x:340,y:200,id:'f4'},
                    {t:'lm317',x:380,y:200,id:'f5'}, {t:'lm317',x:420,y:200,id:'f6'},
                    {t:'lm317',x:460,y:200,id:'f7'}, {t:'lm317',x:500,y:200,id:'f8'},
                    {t:'lm317',x:540,y:200,id:'f9'}, {t:'lm317',x:580,y:200,id:'f10'},
                    // More stages (abbreviated for space)
                    {t:'lm317',x:220,y:260,id:'f11'}, {t:'lm317',x:260,y:260,id:'f12'},
                    // Final amplifier chain
                    {t:'lm386',x:700,y:300,id:'wet'}, {t:'lm386',x:780,y:300,id:'dry'},
                    {t:'lm386',x:860,y:300,id:'mix'}, {t:'pot',x:820,y:270,v:'10k',id:'depth'},
                    {t:'spk',x:960,y:300,id:'sp1'}
                ], wires:[
                    ['b','pos','input','vcc','power'], ['freq','out','input','cv','signal'],
                    ['lfo','out','f1','adj','signal'], ['lfo','out','f2','adj','signal'],
                    ['input','out','f1','in','signal'], ['f1','out','f2','in','signal'],
                    ['f2','out','f3','in','signal'], ['f10','out','wet','in','signal'],
                    ['input','out','dry','in','signal'], ['wet','out','mix','in','signal'],
                    ['dry','out','mix','in','signal'], ['mix','out','sp1','in','signal']
                ]},

                // Exp 31: Chaos Generator (40 coupled oscillators)
                { name: "Chaos Generator (40 Coupled VCOs)", desc: `Creates chaotic sound generation using 40 voltage-controlled oscillators in complex feedback topology. Each oscillator's frequency is controlled by multiple others creating nonlinear dynamics and chaotic behavior. Small initial condition differences lead to completely different evolutionary paths - the system never repeats.

Different coupling topologies create different chaotic regimes. The resulting sounds are organic and alive, genuinely unique each power-on. This demonstrates chaos theory, nonlinear dynamics, and emergent behavior in complex systems.`,comps: [
                    {t:'bat',x:100,y:550,id:'b'}, {t:'gnd',x:100,y:1100,id:'g'},
                    // 40 555 timers in chaotic feedback network
                    {t:'555',x:180,y:150,id:'ch1'}, {t:'555',x:230,y:150,id:'ch2'},
                    {t:'555',x:280,y:150,id:'ch3'}, {t:'555',x:330,y:150,id:'ch4'},
                    {t:'555',x:380,y:150,id:'ch5'}, {t:'555',x:430,y:150,id:'ch6'},
                    {t:'555',x:480,y:150,id:'ch7'}, {t:'555',x:530,y:150,id:'ch8'},
                    {t:'555',x:180,y:210,id:'ch9'}, {t:'555',x:230,y:210,id:'ch10'},
                    {t:'555',x:280,y:210,id:'ch11'}, {t:'555',x:330,y:210,id:'ch12'},
                    {t:'555',x:380,y:210,id:'ch13'}, {t:'555',x:430,y:210,id:'ch14'},
                    {t:'555',x:480,y:210,id:'ch15'}, {t:'555',x:530,y:210,id:'ch16'},
                    // Continue for ch17-ch40...
                    {t:'555',x:180,y:270,id:'ch17'}, {t:'555',x:230,y:270,id:'ch18'},
                    // Feedback network
                    {t:'r',x:600,y:180,v:'100kŒ©',id:'fb1'}, {t:'r',x:600,y:240,v:'100kŒ©',id:'fb2'},
                    {t:'c',x:640,y:210,v:'10¬µF',id:'chaos_cap'},
                    // Output
                    {t:'lm386',x:720,y:210,id:'out1'}, {t:'lm386',x:800,y:210,id:'out2'},
                    {t:'spk',x:900,y:210,id:'sp1'}
                ], wires:[
                    ['b','pos','ch1','vcc','power'], ['ch1','out','ch2','cv','signal'],
                    ['ch2','out','ch3','cv','signal'], ['ch3','out','ch4','cv','signal'],
                    ['ch4','out','ch1','cv','signal'], ['ch5','out','ch6','cv','signal'],
                    ['ch6','out','ch5','cv','signal'], ['ch1','out','fb1','in','signal'],
                    ['fb1','out','chaos_cap','in','signal'], ['chaos_cap','out','out1','in','signal'],
                    ['out1','out','out2','in','signal'], ['out2','out','sp1','in','signal']
                ]},

                // Exp 32: Ultimate Mega Synthesizer (All techniques combined!)
                { name: "Ultimate Mega Synthesizer", desc: `The culmination of all synthesis concepts - a complete instrument with 20 voltage-controlled oscillators (four groups covering 40Hz-6kHz), 10 LFOs (0.01Hz-50Hz with various waveforms), 10 multi-mode filters (with voltage-controlled cutoff and resonance), and 10 VCAs with full ADSR envelopes. The oscillator section provides unison, chord, spread, and cluster modes.

A 20x50 modulation matrix routes any of 20 sources to any of 50 destinations. The effects section includes all previous experiments. The mixer handles 20 oscillators with independent level, pan, and effects send. Over 200 CV inputs make everything voltage-controllable. This complete instrument demonstrates professional modular architecture and how sophisticated synthesis emerges from hundreds of interacting simple modules.`,comps: [
                    {t:'bat',x:100,y:600,id:'b'}, {t:'gnd',x:100,y:1200,id:'g'},
                    // 20 VCOs
                    {t:'555',x:180,y:180,id:'vco1'}, {t:'555',x:220,y:180,id:'vco2'},
                    {t:'555',x:260,y:180,id:'vco3'}, {t:'555',x:300,y:180,id:'vco4'},
                    {t:'555',x:340,y:180,id:'vco5'}, {t:'555',x:180,y:240,id:'vco6'},
                    {t:'555',x:220,y:240,id:'vco7'}, {t:'555',x:260,y:240,id:'vco8'},
                    {t:'555',x:300,y:240,id:'vco9'}, {t:'555',x:340,y:240,id:'vco10'},
                    // 10 LFOs
                    {t:'555',x:400,y:180,id:'lfo1'}, {t:'555',x:440,y:180,id:'lfo2'},
                    {t:'555',x:480,y:180,id:'lfo3'}, {t:'555',x:520,y:180,id:'lfo4'},
                    {t:'555',x:560,y:180,id:'lfo5'},
                    // 10 VCFs using LM317
                    {t:'lm317',x:400,y:280,id:'vcf1'}, {t:'lm317',x:440,y:280,id:'vcf2'},
                    {t:'lm317',x:480,y:280,id:'vcf3'}, {t:'lm317',x:520,y:280,id:'vcf4'},
                    {t:'lm317',x:560,y:280,id:'vcf5'},
                    // 10 VCAs/Ring Modulators using LM386
                    {t:'lm386',x:640,y:180,id:'vca1'}, {t:'lm386',x:680,y:180,id:'vca2'},
                    {t:'lm386',x:720,y:180,id:'vca3'}, {t:'lm386',x:760,y:180,id:'vca4'},
                    {t:'lm386',x:800,y:180,id:'vca5'}, {t:'lm386',x:640,y:240,id:'ring1'},
                    {t:'lm386',x:680,y:240,id:'ring2'}, {t:'lm386',x:720,y:240,id:'ring3'},
                    // Master mixer (5 stages)
                    {t:'lm386',x:640,y:340,id:'mix1'}, {t:'lm386',x:700,y:340,id:'mix2'},
                    {t:'lm386',x:760,y:340,id:'mix3'}, {t:'lm386',x:820,y:340,id:'mix4'},
                    {t:'lm386',x:880,y:340,id:'master'},
                    // Effects chain
                    {t:'lm386',x:640,y:420,id:'dist'}, {t:'lm386',x:700,y:420,id:'chorus'},
                    {t:'lm386',x:760,y:420,id:'delay'}, {t:'lm386',x:820,y:420,id:'reverb'},
                    // Control panel
                    {t:'pot',x:120,y:180,v:'10k',id:'pitch'}, {t:'pot',x:120,y:240,v:'100k',id:'detune'},
                    {t:'pot',x:120,y:300,v:'1M',id:'lfo_rate'}, {t:'pot',x:120,y:360,v:'10k',id:'filter'},
                    {t:'pot',x:120,y:420,v:'10k',id:'resonance'}, {t:'pot',x:120,y:480,v:'10k',id:'fx_mix'},
                    // Final output
                    {t:'spk',x:980,y:380,id:'sp1'}
                ], wires:[
                    ['b','pos','vco1','vcc','power'], ['pitch','out','vco1','cv','signal'],
                    ['lfo1','out','vco1','cv','signal'], ['lfo1','out','vco2','cv','signal'],
                    ['vco1','out','vcf1','in','signal'], ['vco2','out','vcf1','in','signal'],
                    ['lfo2','out','vcf1','adj','signal'], ['vcf1','out','vca1','in','signal'],
                    ['lfo3','out','vca1','gain','signal'], ['vca1','out','ring1','in','signal'],
                    ['vco3','out','ring1','gain','signal'], ['ring1','out','mix1','in','signal'],
                    ['vca2','out','mix1','in','signal'], ['mix1','out','mix2','in','signal'],
                    ['mix2','out','dist','in','signal'], ['dist','out','chorus','in','signal'],
                    ['chorus','out','delay','in','signal'], ['delay','out','reverb','in','signal'],
                    ['reverb','out','master','in','signal'], ['master','out','sp1','in','signal']
                ]}
            ]
        };

        // Component templates with visible pins and leads
        const compHTML = {
            bat: (v) => `<div class="battery-body">${v||'9V'}
                <div class="pin-dot" style="position:absolute;top:-4px;left:50%;transform:translateX(-50%);width:8px;height:8px;background:#e74c3c;border-radius:50%;border:2px solid #fff"></div>
                <div class="pin-dot" style="position:absolute;bottom:-4px;left:50%;transform:translateX(-50%);width:8px;height:8px;background:#2c3e50;border-radius:50%;border:2px solid #fff"></div>
                <div class="comp-label">Battery</div></div>`,

            r: (v) => `<div style="position:relative;width:80px;height:30px">
                <div style="position:absolute;left:0;top:12px;width:10px;height:3px;background:#D2691E"></div>
                <div class="resistor-body" style="position:absolute;left:10px;top:2.5px">${v||'220Œ©'}</div>
                <div style="position:absolute;right:0;top:12px;width:10px;height:3px;background:#D2691E"></div>
                <div class="pin-dot" style="position:absolute;left:-2px;top:11px;width:6px;height:6px;background:#D2691E;border-radius:50%"></div>
                <div class="pin-dot" style="position:absolute;right:-2px;top:11px;width:6px;height:6px;background:#D2691E;border-radius:50%"></div>
            </div>`,

            led: () => `<div style="position:relative;width:40px;height:50px">
                <div class="led-body" style="position:absolute;top:5px"></div>
                <div style="position:absolute;left:12px;top:0;width:2px;height:8px;background:#999"></div>
                <div style="position:absolute;left:26px;top:0;width:2px;height:8px;background:#999"></div>
                <div class="pin-dot" style="position:absolute;left:10px;top:-3px;width:6px;height:6px;background:#ff6b6b;border-radius:50%"></div>
                <div class="pin-dot" style="position:absolute;left:24px;top:-3px;width:6px;height:6px;background:#666;border-radius:50%"></div>
            </div>`,

            c: (v) => `<div style="position:relative;width:50px;height:35px">
                <div class="cap-body" style="position:absolute;left:10px;top:5px"><div class="cap-plate"></div><div class="cap-plate"></div></div>
                <div style="position:absolute;left:0;top:16px;width:18px;height:2px;background:#666"></div>
                <div style="position:absolute;right:0;top:16px;width:18px;height:2px;background:#666"></div>
                <div class="pin-dot" style="position:absolute;left:-2px;top:15px;width:6px;height:6px;background:#e74c3c;border-radius:50%"></div>
                <div class="pin-dot" style="position:absolute;right:-2px;top:15px;width:6px;height:6px;background:#666;border-radius:50%"></div>
                <div class="comp-label">${v||'100¬µF'}</div>
            </div>`,

            gnd: () => `<div class="ground-body"><div class="pin-dot" style="position:absolute;top:-4px;left:50%;transform:translateX(-50%);width:8px;height:8px;background:#2c3e50;border-radius:50%;border:2px solid #fff"></div><div class="ground-line" style="width:40px"></div><div class="ground-line" style="width:28px"></div><div class="ground-line" style="width:16px"></div><div class="comp-label">GND</div></div>`,

            '555': () => `<div class="ic-body" style="position:relative;padding:25px 15px">
                <div style="position:absolute;left:-6px;top:15%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Pin 1 GND"></div>
                <div style="position:absolute;left:-6px;top:30%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Pin 2 TRIG"></div>
                <div style="position:absolute;left:-6px;top:45%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Pin 3 OUT"></div>
                <div style="position:absolute;left:-6px;top:60%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Pin 4 RST"></div>
                <div style="position:absolute;right:-6px;top:60%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Pin 5 CV"></div>
                <div style="position:absolute;right:-6px;top:45%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Pin 6 THR"></div>
                <div style="position:absolute;right:-6px;top:30%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Pin 7 DIS"></div>
                <div style="position:absolute;right:-6px;top:15%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Pin 8 VCC"></div>
                <div style="font-weight:bold;font-size:16px">555</div><div style="font-size:10px;margin-top:3px">Timer</div>
            </div>`,

            attiny: () => `<div class="ic-body" style="position:relative;background:#34495e;padding:25px 15px">
                <div style="position:absolute;left:-6px;top:20%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="PB5/RST"></div>
                <div style="position:absolute;left:-6px;top:35%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="PB3/ADC3"></div>
                <div style="position:absolute;left:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="PB4/ADC2"></div>
                <div style="position:absolute;left:-6px;top:65%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GND"></div>
                <div style="position:absolute;right:-6px;top:65%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="PB0"></div>
                <div style="position:absolute;right:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="PB1"></div>
                <div style="position:absolute;right:-6px;top:35%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="PB2"></div>
                <div style="position:absolute;right:-6px;top:20%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="VCC"></div>
                ATtiny13<div style="font-size:9px">8-pin MCU</div>
            </div>`,

            esp: () => `<div class="ic-body" style="position:relative;width:140px;background:linear-gradient(135deg,#667eea,#764ba2);padding:30px 15px">
                <div style="position:absolute;right:-6px;top:15%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="D0"></div>
                <div style="position:absolute;right:-6px;top:25%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="D1"></div>
                <div style="position:absolute;right:-6px;top:35%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="D2"></div>
                <div style="position:absolute;right:-6px;top:45%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="D3"></div>
                <div style="position:absolute;right:-6px;top:55%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="D4"></div>
                <div style="position:absolute;right:-6px;top:65%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="D5"></div>
                <div style="position:absolute;left:-6px;top:25%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="A0"></div>
                <div style="position:absolute;left:-6px;top:15%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="VCC"></div>
                <div style="position:absolute;left:-6px;top:65%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GND"></div>
                ESP8266<div style="font-size:9px">WiFi</div>
            </div>`,

            pi: () => `<div class="ic-body" style="position:relative;width:160px;height:100px;background:linear-gradient(135deg,#e74c3c,#c0392b);padding:15px">
                <div style="position:absolute;top:-6px;left:20%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="3.3V"></div>
                <div style="position:absolute;top:-6px;left:30%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GPIO2"></div>
                <div style="position:absolute;top:-6px;left:40%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GPIO3"></div>
                <div style="position:absolute;top:-6px;left:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GPIO4"></div>
                <div style="position:absolute;top:-6px;left:60%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GPIO17"></div>
                <div style="position:absolute;top:-6px;left:70%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GPIO27"></div>
                <div style="position:absolute;right:-6px;top:30%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GPIO22"></div>
                <div style="position:absolute;right:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GPIO10"></div>
                <div style="position:absolute;bottom:-6px;left:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GND"></div>
                üçì Raspberry Pi<div style="font-size:9px">Linux SBC</div>
            </div>`,

            dht11: () => `<div class="ic-body" style="position:relative;background:#3498db;padding:20px 10px">
                <div style="position:absolute;top:-6px;left:20%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="VCC"></div>
                <div style="position:absolute;top:-6px;left:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="DATA"></div>
                <div style="position:absolute;top:-6px;left:80%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GND"></div>
                DHT11<div style="font-size:9px">Temp/Hum</div>
            </div>`,

            servo: () => `<div class="ic-body" style="position:relative;background:#34495e;padding:20px 10px">
                <div style="position:absolute;bottom:-6px;left:20%;width:6px;height:6px;background:#e74c3c;border-radius:50%" title="VCC"></div>
                <div style="position:absolute;bottom:-6px;left:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="SIG"></div>
                <div style="position:absolute;bottom:-6px;left:80%;width:6px;height:6px;background:#2c3e50;border-radius:50%" title="GND"></div>
                SERVO<div style="font-size:9px">SG90</div>
            </div>`,

            btn: () => `<div style="position:relative;width:40px;height:50px">
                <div style="width:40px;height:40px;background:radial-gradient(circle,#e74c3c,#c0392b);border:3px solid #8b0000;border-radius:50%;position:absolute;top:5px"></div>
                <div class="pin-dot" style="position:absolute;left:17px;top:0;width:6px;height:6px;background:#999;border-radius:50%"></div>
                <div class="pin-dot" style="position:absolute;left:17px;bottom:0;width:6px;height:6px;background:#999;border-radius:50%"></div>
            </div>`,

            pot: (v) => `<div class="ic-body" style="background:#7f8c8d;width:60px;position:relative">
                <div style="position:absolute;left:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%"></div>
                <div style="position:absolute;right:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%"></div>
                POT<div style="font-size:9px">${v||'10k'}</div>
            </div>`,

            ldr: () => `<div class="ic-body" style="background:#f39c12;width:50px;position:relative">
                <div style="position:absolute;top:-6px;left:50%;width:6px;height:6px;background:#ffd700;border-radius:50%;transform:translateX(-50%)"></div>
                <div style="position:absolute;bottom:-6px;left:50%;width:6px;height:6px;background:#ffd700;border-radius:50%;transform:translateX(-50%)"></div>
                LDR<div style="font-size:9px">Photo</div>
            </div>`,

            buzz: () => `<div class="ic-body" style="background:#2c3e50;width:60px;position:relative">
                <div style="position:absolute;left:-6px;top:50%;width:6px;height:6px;background:#e74c3c;border-radius:50%"></div>
                <div style="position:absolute;right:-6px;top:50%;width:6px;height:6px;background:#2c3e50;border-radius:50%"></div>
                üîä<div style="font-size:9px">Buzzer</div>
            </div>`,

            spk: () => `<div class="ic-body" style="background:#34495e;width:70px;position:relative">
                <div style="position:absolute;left:-6px;top:50%;width:6px;height:6px;background:#e74c3c;border-radius:50%"></div>
                <div style="position:absolute;right:-6px;top:50%;width:6px;height:6px;background:#2c3e50;border-radius:50%"></div>
                ‚ô™<div style="font-size:9px">Speaker</div>
            </div>`,

            trans: () => `<div class="ic-body" style="background:#95a5a6;width:50px;position:relative">
                <div style="position:absolute;left:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Base"></div>
                <div style="position:absolute;right:-6px;top:30%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Collector"></div>
                <div style="position:absolute;right:-6px;top:70%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Emitter"></div>
                Q<div style="font-size:9px">NPN</div>
            </div>`,

            motor: () => `<div class="ic-body" style="background:#7f8c8d;position:relative">
                <div style="position:absolute;left:-6px;top:50%;width:6px;height:6px;background:#e74c3c;border-radius:50%"></div>
                <div style="position:absolute;right:-6px;top:50%;width:6px;height:6px;background:#2c3e50;border-radius:50%"></div>
                MOTOR<div style="font-size:9px">DC</div>
            </div>`,

            '4017': () => `<div class="ic-body" style="position:relative;padding:30px 15px">
                <div style="position:absolute;left:-6px;top:15%;width:6px;height:6px;background:#ffd700;border-radius:50%"></div>
                <div style="position:absolute;left:-6px;top:30%;width:6px;height:6px;background:#ffd700;border-radius:50%"></div>
                <div style="position:absolute;left:-6px;top:45%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="CLK"></div>
                <div style="position:absolute;left:-6px;top:60%;width:6px;height:6px;background:#ffd700;border-radius:50%"></div>
                <div style="position:absolute;right:-6px;top:20%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Q0"></div>
                <div style="position:absolute;right:-6px;top:40%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Q1"></div>
                <div style="position:absolute;right:-6px;top:60%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Q2"></div>
                4017<div style="font-size:9px">Decade</div>
            </div>`,

            '74595': () => `<div class="ic-body" style="position:relative;padding:30px 15px">
                <div style="position:absolute;left:-6px;top:30%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="DATA"></div>
                <div style="position:absolute;left:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="CLK"></div>
                <div style="position:absolute;right:-6px;top:20%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Q0"></div>
                <div style="position:absolute;right:-6px;top:40%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Q1"></div>
                <div style="position:absolute;right:-6px;top:60%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="Q2"></div>
                74HC595<div style="font-size:9px">Shift Reg</div>
            </div>`,

            lm358: () => `<div class="ic-body" style="position:relative;padding:25px 15px">
                <div style="position:absolute;left:-6px;top:40%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="IN+"></div>
                <div style="position:absolute;left:-6px;top:60%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="IN-"></div>
                <div style="position:absolute;right:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="OUT"></div>
                <div style="position:absolute;left:-6px;top:15%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="VCC"></div>
                <div style="position:absolute;left:-6px;top:85%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GND"></div>
                LM358<div style="font-size:9px">Op-Amp</div>
            </div>`,

            lm386: () => `<div class="ic-body" style="position:relative;padding:25px 15px">
                <div style="position:absolute;left:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="IN"></div>
                <div style="position:absolute;right:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="OUT"></div>
                <div style="position:absolute;left:-6px;top:15%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="VCC"></div>
                <div style="position:absolute;left:-6px;top:85%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GND"></div>
                LM386<div style="font-size:9px">Audio</div>
            </div>`,

            lm317: () => `<div class="ic-body" style="position:relative;padding:25px 15px">
                <div style="position:absolute;left:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="IN"></div>
                <div style="position:absolute;right:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="OUT"></div>
                <div style="position:absolute;bottom:-6px;left:50%;width:6px;height:6px;background:#ffd700;border-radius:50%;transform:translateX(-50%)" title="ADJ"></div>
                LM317<div style="font-size:9px">Reg</div>
            </div>`,

            lm35: () => `<div class="ic-body" style="background:#e67e22;position:relative;padding:20px 10px">
                <div style="position:absolute;left:-6px;top:30%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="VCC"></div>
                <div style="position:absolute;right:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="OUT"></div>
                <div style="position:absolute;left:-6px;top:70%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GND"></div>
                LM35<div style="font-size:9px">Temp</div>
            </div>`,

            touch: () => `<div class="ic-body" style="background:#9b59b6;width:60px;position:relative">
                <div style="position:absolute;bottom:-6px;left:50%;width:6px;height:6px;background:#ffd700;border-radius:50%;transform:translateX(-50%)"></div>
                TOUCH<div style="font-size:9px">Pad</div>
            </div>`,

            rain: () => `<div class="ic-body" style="background:#3498db;position:relative">
                <div style="position:absolute;bottom:-6px;left:50%;width:6px;height:6px;background:#ffd700;border-radius:50%;transform:translateX(-50%)"></div>
                RAIN<div style="font-size:9px">Sensor</div>
            </div>`,

            diode: () => `<div style="position:relative;width:60px;height:25px">
                <div style="position:absolute;left:0;top:10px;width:10px;height:3px;background:#888"></div>
                <div style="width:40px;height:20px;background:linear-gradient(to right,#888,#666);border-radius:10px;position:absolute;left:10px;top:2px"></div>
                <div style="position:absolute;right:0;top:10px;width:10px;height:3px;background:#666"></div>
                <div class="pin-dot" style="position:absolute;left:-2px;top:9px;width:6px;height:6px;background:#888;border-radius:50%"></div>
                <div class="pin-dot" style="position:absolute;right:-2px;top:9px;width:6px;height:6px;background:#666;border-radius:50%"></div>
            </div>`,

            oled: () => `<div class="ic-body" style="background:#1abc9c;width:100px;position:relative">
                <div style="position:absolute;bottom:-6px;left:20%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="VCC"></div>
                <div style="position:absolute;bottom:-6px;left:40%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GND"></div>
                <div style="position:absolute;bottom:-6px;left:60%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="SDA"></div>
                <div style="position:absolute;bottom:-6px;left:80%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="SCL"></div>
                OLED<div style="font-size:9px">128x64</div>
            </div>`,

            ultra: () => `<div class="ic-body" style="background:#16a085;position:relative;padding:20px 10px">
                <div style="position:absolute;bottom:-6px;left:25%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="VCC"></div>
                <div style="position:absolute;bottom:-6px;left:45%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="TRIG"></div>
                <div style="position:absolute;bottom:-6px;left:65%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="ECHO"></div>
                <div style="position:absolute;bottom:-6px;left:85%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GND"></div>
                HC-SR04<div style="font-size:9px">Ultrasonic</div>
            </div>`,

            pir: () => `<div class="ic-body" style="background:#8e44ad;position:relative;padding:20px 10px">
                <div style="position:absolute;bottom:-6px;left:25%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="VCC"></div>
                <div style="position:absolute;bottom:-6px;left:55%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="OUT"></div>
                <div style="position:absolute;bottom:-6px;left:85%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="GND"></div>
                PIR<div style="font-size:9px">Motion</div>
            </div>`,

            mcp3008: () => `<div class="ic-body" style="background:#2980b9;position:relative;padding:25px 15px">
                <div style="position:absolute;left:-6px;top:25%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="CH0"></div>
                <div style="position:absolute;left:-6px;top:40%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="CH1"></div>
                <div style="position:absolute;right:-6px;top:30%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="CLK"></div>
                <div style="position:absolute;right:-6px;top:50%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="DOUT"></div>
                <div style="position:absolute;top:-6px;left:30%;width:6px;height:6px;background:#ffd700;border-radius:50%" title="VCC"></div>
                <div style="position:absolute;bottom:-6px;left:50%;width:6px;height:6px;background:#ffd700;border-radius:50%;transform:translateX(-50%)" title="GND"></div>
                MCP3008<div style="font-size:9px">ADC</div>
            </div>`
        };

        // Connection points for each component
        const connPoints = {
            bat: {pos:{dx:0.5,dy:0}, neg:{dx:0.5,dy:1}},
            r: {in:{dx:0,dy:0.5}, out:{dx:1,dy:0.5}},
            led: {a:{dx:0.3,dy:1}, c:{dx:0.7,dy:1}},
            c: {pos:{dx:0,dy:0.5}, neg:{dx:1,dy:0.5}},
            gnd: {in:{dx:0.5,dy:0}},
            '555': {vcc:{dx:0.1,dy:0}, gnd:{dx:0.1,dy:1}, out:{dx:1,dy:0.5}, trig:{dx:0,dy:0.3}, cv:{dx:0.5,dy:1}},
            attiny: {vcc:{dx:0.5,dy:0}, gnd:{dx:0.5,dy:1}, pb0:{dx:1,dy:0.3}, pb1:{dx:1,dy:0.5}, pb2:{dx:1,dy:0.7}, adc2:{dx:0,dy:0.5}},
            esp: {vcc:{dx:0.1,dy:0}, gnd:{dx:0.1,dy:1}, d1:{dx:1,dy:0.3}, d2:{dx:1,dy:0.4}, d4:{dx:1,dy:0.6}, a0:{dx:0,dy:0.5}, spi0:{dx:0.8,dy:0}},
            pi: {gpio18:{dx:1,dy:0.3}, gpio17:{dx:1,dy:0.2}, gpio27:{dx:1,dy:0.4}, gpio22:{dx:1,dy:0.5}, gpio4:{dx:1,dy:0.6}, gpio2:{dx:1,dy:0.7}, gpio23:{dx:0.3,dy:0}, gpio24:{dx:0.5,dy:0}, gpio12:{dx:0.7,dy:0}, gnd:{dx:0.5,dy:1}, '3v3':{dx:0.2,dy:0}, '5v':{dx:0.8,dy:1}, spi0:{dx:0.9,dy:0}},
            dht11: {vcc:{dx:0.2,dy:0}, data:{dx:0.5,dy:0}, gnd:{dx:0.8,dy:0}},
            servo: {vcc:{dx:0.2,dy:1}, sig:{dx:0.5,dy:1}, gnd:{dx:0.8,dy:1}},
            btn: {out:{dx:0.5,dy:0}, in:{dx:0.5,dy:1}},
            pot: {out:{dx:1,dy:0.5}, in:{dx:0,dy:0.5}},
            ldr: {in:{dx:0.5,dy:0}, out:{dx:0.5,dy:1}},
            buzz: {in:{dx:0,dy:0.5}, out:{dx:1,dy:0.5}},
            spk: {in:{dx:0,dy:0.5}, out:{dx:1,dy:0.5}},
            trans: {b:{dx:0,dy:0.5}, c:{dx:1,dy:0.3}, e:{dx:1,dy:0.7}},
            motor: {in:{dx:0,dy:0.5}, out:{dx:1,dy:0.5}},
            '4017': {vcc:{dx:0.1,dy:0}, gnd:{dx:0.1,dy:1}, clk:{dx:0,dy:0.5}, q0:{dx:1,dy:0.2}, q1:{dx:1,dy:0.4}, q2:{dx:1,dy:0.6}},
            '74595': {data:{dx:0,dy:0.3}, clk:{dx:0,dy:0.5}, q0:{dx:1,dy:0.2}, q1:{dx:1,dy:0.4}, q2:{dx:1,dy:0.6}},
            lm358: {vcc:{dx:0.1,dy:0}, gnd:{dx:0.1,dy:1}, 'in+':{dx:0,dy:0.4}, 'in-':{dx:0,dy:0.6}, out:{dx:1,dy:0.5}},
            lm386: {vcc:{dx:0.1,dy:0}, gnd:{dx:0.1,dy:1}, in:{dx:0,dy:0.5}, out:{dx:1,dy:0.5}},
            lm317: {in:{dx:0,dy:0.5}, out:{dx:1,dy:0.5}, adj:{dx:0.5,dy:1}},
            lm35: {vcc:{dx:0.2,dy:0}, out:{dx:0.5,dy:1}, gnd:{dx:0.8,dy:0}},
            touch: {out:{dx:1,dy:0.5}},
            rain: {out:{dx:1,dy:0.5}},
            diode: {a:{dx:0,dy:0.5}, c:{dx:1,dy:0.5}},
            oled: {sda:{dx:0,dy:0.4}, scl:{dx:0,dy:0.6}, vcc:{dx:0.2,dy:0}, gnd:{dx:0.8,dy:0}},
            ultra: {vcc:{dx:0.2,dy:0}, trig:{dx:0.4,dy:0}, echo:{dx:0.6,dy:0}, gnd:{dx:0.8,dy:0}},
            pir: {vcc:{dx:0.3,dy:0}, out:{dx:0.5,dy:1}, gnd:{dx:0.7,dy:0}},
            mcp3008: {vref:{dx:0.1,dy:0}, clk:{dx:0.3,dy:0}, ch0:{dx:1,dy:0.3}, ch1:{dx:1,dy:0.5}, gnd:{dx:0.1,dy:1}}
        };

        let currentCourse = 0;
        let currentExpIdx = 0;
        let zoom = 1;
        let components = {};
        let draggedComponent = null;
        let dragOffset = { x: 0, y: 0 };
        let editMode = false;
        let wireCreationMode = false;
        let selectedPin = null;
        let selectedComponent = null;
        let selectedWire = null;
        let nextCompId = 1;
        const COMPONENT_Y_OFFSET = 120; // Push components down to avoid title card overlap

        document.addEventListener('DOMContentLoaded', () => {
            renderExperiments(0);
            setupEventListeners();
        });

        function renderExperiments(course) {
            const list = document.getElementById('experimentsList');
            list.innerHTML = '';

            circuits[course].forEach((circ, idx) => {
                const card = document.createElement('div');
                card.className = 'experiment-card';
                card.innerHTML = `
                    <div class="exp-number">Experiment ${idx + 1}</div>
                    <div class="exp-name">${circ.name}</div>
                `;
                card.onclick = () => loadCircuit(course, idx);
                list.appendChild(card);
            });
        }

        function loadCircuit(course, expIdx) {
            document.querySelectorAll('.experiment-card').forEach(c => c.classList.remove('active'));
            event.target.closest('.experiment-card').classList.add('active');

            currentCourse = course;
            currentExpIdx = expIdx;

            const circuit = circuits[course][expIdx];
            document.getElementById('circuitTitle').textContent = circuit.name;
            document.getElementById('circuitSubtitle').textContent = `Course ${course + 1} - Experiment ${expIdx + 1}`;

            // Generate components list
            generateComponentsList(circuit);

            // Generate assembly instructions
            generateInstructions(circuit);

            // Display detailed description if available
            displayDescription(circuit);

            drawCircuit(circuit);
        }

        function generateComponentsList(circuit) {
            const compMap = {};
            const componentNames = {
                'bat': 'Battery', 'r': 'Resistor', 'led': 'LED', 'c': 'Capacitor',
                'gnd': 'Ground connection', '555': '555 Timer IC', 'attiny': 'ATtiny13 Microcontroller',
                'esp': 'ESP8266 WiFi Module', 'pi': 'Raspberry Pi', 'pot': 'Potentiometer',
                'btn': 'Push Button', 'buzz': 'Buzzer', 'spk': 'Speaker', 'servo': 'Servo Motor',
                'motor': 'DC Motor', 'trans': 'Transistor', 'diode': 'Diode', 'ldr': 'Light Sensor (LDR)',
                'dht11': 'DHT11 Temp/Humidity Sensor', 'lm358': 'LM358 Op-Amp IC', 'lm386': 'LM386 Audio Amp IC',
                'lm317': 'LM317 Voltage Regulator', 'lm35': 'LM35 Temperature Sensor', '4017': '4017 Decade Counter IC',
                '74595': '74HC595 Shift Register', 'oled': 'OLED Display', 'touch': 'Touch Sensor Pad',
                'pir': 'PIR Motion Sensor', 'ultra': 'HC-SR04 Ultrasonic Sensor', 'mcp3008': 'MCP3008 ADC',
                'rain': 'Rain Sensor'
            };

            circuit.comps.forEach(comp => {
                const name = componentNames[comp.t] || comp.t.toUpperCase();
                const key = comp.v ? `${name} (${comp.v})` : name;
                compMap[key] = (compMap[key] || 0) + 1;
            });

            let html = '<ul style="list-style: none; padding-left: 0; margin: 0;">';
            Object.entries(compMap).forEach(([name, count]) => {
                html += `<li style="padding: 4px 0; border-bottom: 1px solid #333;">
                    <span style="color: #667eea; font-weight: bold;">${count}x</span> ${name}
                </li>`;
            });
            html += '</ul>';

            document.getElementById('componentsList').innerHTML = html;
        }

        function generateInstructions(circuit) {
            const componentNames = {
                'bat': 'battery', 'r': 'resistor', 'led': 'LED', 'c': 'capacitor',
                'gnd': 'ground rail', '555': '555 timer', 'attiny': 'ATtiny13',
                'esp': 'ESP8266', 'pi': 'Raspberry Pi', 'pot': 'potentiometer',
                'btn': 'button', 'buzz': 'buzzer', 'spk': 'speaker', 'servo': 'servo',
                'motor': 'motor', 'trans': 'transistor', 'diode': 'diode', 'ldr': 'LDR',
                'dht11': 'DHT11 sensor', 'lm358': 'LM358', 'lm386': 'LM386',
                'lm317': 'LM317', 'lm35': 'LM35', '4017': '4017 counter',
                '74595': '74HC595', 'oled': 'OLED display', 'touch': 'touch pad',
                'pir': 'PIR sensor', 'ultra': 'ultrasonic sensor', 'mcp3008': 'MCP3008'
            };

            let html = '<ol style="padding-left: 20px; margin: 0;">';

            // Step 1: Power setup
            html += '<li style="margin-bottom: 8px; color: #ddd;"><strong>Power Setup:</strong> Connect the battery/power supply to the breadboard rails</li>';

            // Step 2: Place main components
            const mainComps = circuit.comps.filter(c => ['555','attiny','esp','pi','lm358','lm386','lm317','4017','74595'].includes(c.t));
            if (mainComps.length > 0) {
                html += '<li style="margin-bottom: 8px; color: #ddd;"><strong>Main ICs:</strong> Insert ';
                html += mainComps.map(c => componentNames[c.t] || c.t).join(', ');
                html += ' onto the breadboard</li>';
            }

            // Step 3: Add resistors and capacitors
            const passives = circuit.comps.filter(c => ['r','c'].includes(c.t));
            if (passives.length > 0) {
                html += '<li style="margin-bottom: 8px; color: #ddd;"><strong>Passive Components:</strong> Place ';
                const rCount = passives.filter(c => c.t === 'r').length;
                const cCount = passives.filter(c => c.t === 'c').length;
                const parts = [];
                if (rCount) parts.push(`${rCount} resistor${rCount>1?'s':''}`);
                if (cCount) parts.push(`${cCount} capacitor${cCount>1?'s':''}`);
                html += parts.join(' and ');
                html += ' as shown in the diagram</li>';
            }

            // Step 4: Connect output devices
            const outputs = circuit.comps.filter(c => ['led','buzz','spk','servo','motor','oled'].includes(c.t));
            if (outputs.length > 0) {
                html += '<li style="margin-bottom: 8px; color: #ddd;"><strong>Output Devices:</strong> Connect ';
                html += outputs.map(c => componentNames[c.t] || c.t).join(', ');
                html += ' to their designated pins</li>';
            }

            // Step 5: Wire power connections
            html += '<li style="margin-bottom: 8px; color: #ddd;"><strong>Power Wiring:</strong> Connect red wires for positive (+) power connections</li>';

            // Step 6: Wire ground connections
            html += '<li style="margin-bottom: 8px; color: #ddd;"><strong>Ground Wiring:</strong> Connect black wires for ground (-) connections</li>';

            // Step 7: Wire signal connections
            const signalWires = circuit.wires.filter(w => w[4] === 'signal');
            if (signalWires.length > 0) {
                html += `<li style="margin-bottom: 8px; color: #ddd;"><strong>Signal Wiring:</strong> Connect ${signalWires.length} blue wire${signalWires.length>1?'s':''} for signal paths</li>`;
            }

            // Step 8: Double-check
            html += '<li style="margin-bottom: 8px; color: #ddd;"><strong>Verification:</strong> Double-check all connections match the diagram</li>';

            // Step 9: Power on
            html += '<li style="margin-bottom: 8px; color: #ddd;"><strong>Power On:</strong> Connect power and test the circuit!</li>';

            html += '</ol>';

            document.getElementById('instructionsList').innerHTML = html;
        }

        function displayDescription(circuit) {
            const descDiv = document.getElementById('descriptionText');
            if (circuit.desc) {
                // Format the description with proper paragraphs
                const formatted = circuit.desc
                    .split('\n\n')
                    .map(para => `<p style="margin-bottom: 12px;">${para}</p>`)
                    .join('');
                descDiv.innerHTML = formatted;
            } else {
                descDiv.innerHTML = '<p style="color: #888;">No detailed description available for this experiment.</p>';
            }
        }

        function drawCircuit(circuit) {
            const canvas = document.getElementById('circuitCanvas');
            const wireLayer = document.getElementById('wireLayer');

            canvas.querySelectorAll('.component').forEach(c => c.remove());
            wireLayer.innerHTML = '';
            components = {};

            // Reset component ID counter based on existing IDs
            const maxId = Math.max(0, ...circuit.comps.map(c => {
                const match = c.id.match(/\d+/);
                return match ? parseInt(match[0]) : 0;
            }));
            nextCompId = maxId + 1;

            // Draw components
            circuit.comps.forEach(comp => {
                const div = document.createElement('div');
                div.className = 'component';
                div.dataset.id = comp.id;
                div.dataset.type = comp.t;
                div.style.left = comp.x + 'px';
                div.style.top = (comp.y + COMPONENT_Y_OFFSET) + 'px';
                div.style.cursor = 'move';
                div.innerHTML = compHTML[comp.t] ? compHTML[comp.t](comp.v) : `<div class="ic-body">${comp.t}</div>`;

                // Add drag and edit handlers
                div.addEventListener('mousedown', startDrag);
                div.addEventListener('click', (e) => {
                    if (editMode && !wireCreationMode) {
                        selectComponent(comp.id);
                    }
                });
                div.addEventListener('dblclick', (e) => {
                    if (editMode) {
                        editComponentProperties(comp.id);
                    }
                });
                div.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    if (editMode) {
                        deleteComponent(comp.id);
                    }
                });

                canvas.appendChild(div);
                components[comp.id] = { element: div, ...comp, y: comp.y + COMPONENT_Y_OFFSET };
            });

            // Draw wires after components render
            setTimeout(() => {
                circuit.wires.forEach(wire => {
                    const [from, fromPort, to, toPort, type] = wire;
                    drawWire(from, fromPort, to, toPort, type);
                });
            }, 100);
        }

        function drawWire(fromId, fromPort, toId, toPort, type) {
            const fromComp = components[fromId];
            const toComp = components[toId];
            if (!fromComp || !toComp) return;

            const fromPos = getConnPoint(fromComp, fromPort);
            const toPos = getConnPoint(toComp, toPort);

            const svg = document.getElementById('wireLayer');
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');

            const midX = (fromPos.x + toPos.x) / 2;
            const d = `M ${fromPos.x} ${fromPos.y} Q ${midX} ${fromPos.y}, ${midX} ${(fromPos.y + toPos.y) / 2} T ${toPos.x} ${toPos.y}`;

            path.setAttribute('d', d);
            path.setAttribute('class', `wire ${type} ${editMode ? 'selectable' : ''}`);
            path.dataset.from = fromId;
            path.dataset.fromPort = fromPort;
            path.dataset.to = toId;
            path.dataset.toPort = toPort;
            path.dataset.type = type;

            // Add click handler for wire deletion in edit mode
            if (editMode) {
                path.style.cursor = 'pointer';
                path.addEventListener('click', (e) => {
                    e.stopPropagation();
                    if (confirm('Delete this wire?')) {
                        // Remove from circuit data
                        if (circuits[currentCourse] && circuits[currentCourse][currentExpIdx]) {
                            const circuit = circuits[currentCourse][currentExpIdx];
                            circuit.wires = circuit.wires.filter(w =>
                                !(w[0] === fromId && w[1] === fromPort && w[2] === toId && w[3] === toPort)
                            );
                        }
                        path.remove();
                        showNotif('üóëÔ∏è Wire deleted');
                    }
                });
            }

            svg.appendChild(path);

            // Connection points
            [fromPos, toPos].forEach(pos => {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', pos.x);
                circle.setAttribute('cy', pos.y);
                circle.setAttribute('r', '5');
                circle.setAttribute('class', 'connection-point');
                svg.appendChild(circle);
            });
        }

        function getConnPoint(comp, port) {
            const rect = comp.element.getBoundingClientRect();
            const canvas = document.getElementById('circuitCanvas').getBoundingClientRect();
            const relX = rect.left - canvas.left;
            const relY = rect.top - canvas.top;

            const points = connPoints[comp.t] || {};
            const point = points[port] || {dx:0.5, dy:0.5};

            return {
                x: relX + rect.width * point.dx,
                y: relY + rect.height * point.dy
            };
        }

        function startDrag(e) {
            e.preventDefault();
            draggedComponent = e.currentTarget;
            const rect = draggedComponent.getBoundingClientRect();
            const canvas = document.getElementById('circuitCanvas').getBoundingClientRect();

            dragOffset.x = e.clientX - rect.left;
            dragOffset.y = e.clientY - rect.top;

            draggedComponent.style.zIndex = '100';
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);
        }

        function drag(e) {
            if (!draggedComponent) return;

            const canvas = document.getElementById('circuitCanvas').getBoundingClientRect();
            const canvasView = document.querySelector('.canvas-view');

            let newX = e.clientX - canvas.left - dragOffset.x + canvasView.scrollLeft;
            let newY = e.clientY - canvas.top - dragOffset.y + canvasView.scrollTop;

            draggedComponent.style.left = newX + 'px';
            draggedComponent.style.top = newY + 'px';

            // Update component position in components object and circuit data
            const compId = draggedComponent.dataset.id;
            if (components[compId]) {
                components[compId].x = newX;
                components[compId].y = newY; // Store with offset already applied

                // Update in circuit data (remove offset for storage)
                if (circuits[currentCourse] && circuits[currentCourse][currentExpIdx]) {
                    const circComp = circuits[currentCourse][currentExpIdx].comps.find(c => c.id === compId);
                    if (circComp) {
                        circComp.x = newX;
                        circComp.y = newY - COMPONENT_Y_OFFSET; // Store original Y without offset
                    }
                }
            }

            // Redraw wires
            redrawWires();
        }

        function stopDrag(e) {
            if (draggedComponent) {
                draggedComponent.style.zIndex = '10';
                draggedComponent = null;
            }
            document.removeEventListener('mousemove', drag);
            document.removeEventListener('mouseup', stopDrag);
        }

        function redrawWires() {
            const wireLayer = document.getElementById('wireLayer');
            const currentCircuit = circuits[currentCourse];
            if (!currentCircuit || !currentCircuit[currentExpIdx]) return;

            // Clear existing wires
            wireLayer.innerHTML = '';

            // Redraw all wires
            currentCircuit[currentExpIdx].wires.forEach(wire => {
                const [from, fromPort, to, toPort, type] = wire;
                drawWire(from, fromPort, to, toPort, type);
            });
        }

        function setupEventListeners() {
            document.querySelectorAll('.course-tab').forEach(tab => {
                tab.onclick = () => {
                    document.querySelectorAll('.course-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    currentCourse = parseInt(tab.dataset.course);
                    renderExperiments(currentCourse);
                };
            });

            document.getElementById('searchBox').oninput = (e) => {
                const query = e.target.value.toLowerCase();
                document.querySelectorAll('.experiment-card').forEach(card => {
                    const name = card.querySelector('.exp-name').textContent.toLowerCase();
                    card.style.display = name.includes(query) ? 'block' : 'none';
                });
            };
        }

        function simulateCircuit() {
            document.querySelectorAll('.led-body').forEach(led => led.classList.add('on'));
            setTimeout(() => {
                document.querySelectorAll('.led-body').forEach(led => led.classList.remove('on'));
            }, 3000);
            showNotif('‚úì Circuit simulated!');
        }

        function clearCircuit() {
            document.querySelectorAll('.component').forEach(c => c.remove());
            document.getElementById('wireLayer').innerHTML = '';
        }

        function zoomIn() {
            zoom = Math.min(zoom * 1.2, 2);
            document.getElementById('circuitCanvas').style.transform = `scale(${zoom})`;
        }

        function zoomOut() {
            zoom = Math.max(zoom / 1.2, 0.5);
            document.getElementById('circuitCanvas').style.transform = `scale(${zoom})`;
        }

        function showNotif(msg) {
            const notif = document.createElement('div');
            notif.style.cssText = 'position:fixed;top:90px;right:20px;background:linear-gradient(135deg,#2ecc71,#27ae60);color:white;padding:15px 25px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.3);z-index:2000;font-weight:bold';
            notif.textContent = msg;
            document.body.appendChild(notif);
            setTimeout(() => notif.remove(), 2000);
        }

        // ===== EDIT MODE FUNCTIONS =====

        function toggleEditMode() {
            editMode = !editMode;
            const btn = document.getElementById('editModeBtn');
            const txt = document.getElementById('editModeTxt');
            const palette = document.getElementById('componentPalette');
            const saveBtn = document.getElementById('saveBtn');

            if (editMode) {
                btn.classList.remove('btn-primary');
                btn.classList.add('btn-warning');
                txt.textContent = 'Exit Edit';
                palette.classList.add('active');
                saveBtn.style.display = 'inline-block';
                showNotif('‚úèÔ∏è Edit Mode: Add components, create wires, right-click to delete');
            } else {
                btn.classList.remove('btn-warning');
                btn.classList.add('btn-primary');
                txt.textContent = 'Edit Mode';
                palette.classList.remove('active');
                saveBtn.style.display = 'none';
                wireCreationMode = false;
                selectedPin = null;
                clearSelection();
                showNotif('üëÅÔ∏è View Mode');
            }
        }

        function addComponent(type, value) {
            const canvas = document.getElementById('circuitCanvas');
            const id = 'comp' + nextCompId++;

            // Create component in center of viewport (accounting for offset)
            const canvasView = document.querySelector('.canvas-view');
            const x = canvasView.scrollLeft + canvasView.clientWidth / 2 - 50;
            const rawY = canvasView.scrollTop + canvasView.clientHeight / 2 - 50;
            const y = rawY - COMPONENT_Y_OFFSET; // Store unoffset Y in data

            const comp = {
                t: type,
                x: x,
                y: y,
                id: id,
                v: value
            };

            // Create component element (apply offset for display)
            const div = document.createElement('div');
            div.className = 'component';
            div.dataset.id = id;
            div.dataset.type = type;
            div.style.left = x + 'px';
            div.style.top = (y + COMPONENT_Y_OFFSET) + 'px';
            div.style.cursor = 'move';
            div.innerHTML = compHTML[type] ? compHTML[type](value) : `<div class="ic-body">${type}</div>`;

            // Add drag and click handlers
            div.addEventListener('mousedown', startDrag);
            div.addEventListener('click', (e) => {
                if (editMode && !wireCreationMode) {
                    selectComponent(id);
                }
            });
            div.addEventListener('dblclick', (e) => {
                if (editMode) {
                    editComponentProperties(id);
                }
            });
            div.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                if (editMode) {
                    deleteComponent(id);
                }
            });

            canvas.appendChild(div);
            components[id] = { element: div, ...comp, y: y + COMPONENT_Y_OFFSET }; // Store with offset

            // Add to current circuit data (without offset)
            if (circuits[currentCourse] && circuits[currentCourse][currentExpIdx]) {
                circuits[currentCourse][currentExpIdx].comps.push(comp);
            }

            showNotif(`‚úì Added ${type}`);
        }

        function selectComponent(id) {
            clearSelection();
            selectedComponent = id;
            const comp = components[id];
            if (comp) {
                comp.element.classList.add('selected');
            }
        }

        function clearSelection() {
            if (selectedComponent) {
                const comp = components[selectedComponent];
                if (comp) {
                    comp.element.classList.remove('selected');
                }
                selectedComponent = null;
            }
            document.querySelectorAll('.wire.selected').forEach(w => w.classList.remove('selected'));
            selectedWire = null;
        }

        function deleteComponent(id) {
            if (!editMode) return;

            const comp = components[id];
            if (comp) {
                comp.element.remove();
                delete components[id];

                // Remove from circuit data
                if (circuits[currentCourse] && circuits[currentCourse][currentExpIdx]) {
                    const circuit = circuits[currentCourse][currentExpIdx];
                    circuit.comps = circuit.comps.filter(c => c.id !== id);

                    // Remove connected wires
                    circuit.wires = circuit.wires.filter(w => w[0] !== id && w[2] !== id);
                    redrawWires();
                }

                showNotif('üóëÔ∏è Component deleted');
            }
        }

        function editComponentProperties(id) {
            if (!editMode) return;

            const comp = components[id];
            if (!comp) return;

            const currentValue = comp.v || '';
            const newValue = prompt(`Enter value for ${comp.t}:`, currentValue);

            if (newValue !== null && newValue !== currentValue) {
                comp.v = newValue;

                // Update in circuit data
                if (circuits[currentCourse] && circuits[currentCourse][currentExpIdx]) {
                    const circuit = circuits[currentCourse][currentExpIdx];
                    const circComp = circuit.comps.find(c => c.id === id);
                    if (circComp) {
                        circComp.v = newValue;
                    }
                }

                // Redraw component with new value
                comp.element.innerHTML = compHTML[comp.t] ? compHTML[comp.t](newValue) : `<div class="ic-body">${comp.t}</div>`;

                showNotif(`‚úì Updated ${comp.t} to ${newValue}`);
            }
        }

        function enableWireCreation() {
            wireCreationMode = true;
            showNotif('üîå Wire Mode: Click two pins to connect');

            // Visual feedback
            document.getElementById('circuitCanvas').style.cursor = 'crosshair';

            // Make pin dots clickable with visual feedback
            document.querySelectorAll('.pin-dot').forEach(dot => {
                dot.classList.add('clickable');
                dot.style.cursor = 'pointer';
                dot.style.transform = 'scale(1.2)';
                dot.onclick = (e) => handlePinClick(e, dot);
            });
        }

        function handlePinClick(e, pinElement) {
            if (!wireCreationMode) return;

            e.stopPropagation();

            // Find component and pin info from the pin element's position
            const comp = pinElement.closest('.component');
            if (!comp) return;

            const compId = comp.dataset.id;
            const compType = comp.dataset.type;

            // Determine which pin was clicked based on pin element position/title
            let pinPort = 'in'; // default
            const pinTitle = pinElement.getAttribute('title');
            if (pinTitle) {
                if (pinTitle.includes('VCC') || pinTitle.includes('pos') || pinTitle.includes('+')) {
                    pinPort = 'vcc';
                } else if (pinTitle.includes('GND') || pinTitle.includes('neg') || pinTitle.includes('-')) {
                    pinPort = 'gnd';
                } else if (pinTitle.includes('OUT')) {
                    pinPort = 'out';
                } else if (pinTitle.includes('IN')) {
                    pinPort = 'in';
                }
            }

            if (!selectedPin) {
                // First pin selected
                selectedPin = { compId, pinPort };
                pinElement.classList.add('selected-pin');
                showNotif('‚úì Pin 1 selected. Click second pin...');
            } else {
                // Second pin selected - create wire
                // Auto-detect wire type based on pin names
                let wireType = 'signal';
                if ((selectedPin.pinPort.includes('vcc') || selectedPin.pinPort.includes('pos')) &&
                    (pinPort.includes('vcc') || pinPort.includes('pos'))) {
                    wireType = 'power';
                } else if ((selectedPin.pinPort.includes('gnd') || selectedPin.pinPort.includes('neg')) &&
                           (pinPort.includes('gnd') || pinPort.includes('neg'))) {
                    wireType = 'ground';
                }

                createWire(selectedPin.compId, selectedPin.pinPort, compId, pinPort, wireType);

                // Clear selection and reset wire mode
                document.querySelectorAll('.selected-pin').forEach(p => p.classList.remove('selected-pin'));
                document.getElementById('circuitCanvas').style.cursor = 'default';
                document.querySelectorAll('.pin-dot').forEach(dot => {
                    dot.classList.remove('clickable');
                    dot.style.transform = '';
                });
                selectedPin = null;
                wireCreationMode = false;
                showNotif('‚úì Wire created!');
            }
        }

        function createWire(fromId, fromPort, toId, toPort, type) {
            if (!circuits[currentCourse] || !circuits[currentCourse][currentExpIdx]) return;

            const circuit = circuits[currentCourse][currentExpIdx];
            const wire = [fromId, fromPort, toId, toPort, type];
            circuit.wires.push(wire);

            drawWire(fromId, fromPort, toId, toPort, type);
        }

        function deleteWire(wireElement) {
            if (!editMode) return;

            // This would need to track which wire element corresponds to which wire data
            // For now, we'll implement a simpler approach with wire selection
            wireElement.remove();
            showNotif('üóëÔ∏è Wire deleted');
        }

        function saveCircuit() {
            const circuit = circuits[currentCourse][currentExpIdx];
            const data = JSON.stringify(circuit, null, 2);

            // Create download
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `circuit_${currentCourse}_${currentExpIdx}.json`;
            a.click();

            showNotif('üíæ Circuit saved!');
        }

        // Add keyboard shortcuts for edit mode
        document.addEventListener('keydown', (e) => {
            if (editMode) {
                if (e.key === 'Delete' && selectedComponent) {
                    deleteComponent(selectedComponent);
                } else if (e.key === 'w' || e.key === 'W') {
                    enableWireCreation();
                } else if (e.key === 'Escape') {
                    wireCreationMode = false;
                    selectedPin = null;
                    clearSelection();
                    document.getElementById('circuitCanvas').style.cursor = 'default';
                    document.querySelectorAll('.selected-pin').forEach(p => p.classList.remove('selected-pin'));
                    document.querySelectorAll('.pin-dot').forEach(dot => {
                        dot.classList.remove('clickable');
                        dot.style.transform = '';
                    });
                    showNotif('‚úì Wire mode cancelled');
                }
            }
        });
    </script>
</body>
</html>