<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dodge the Falling Objects</title>
<style>
  /* Basic styles for responsiveness and visual clarity */
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    width: 100%;
    height: 100%;
    font-family: Arial, sans-serif;
  }
  #gameCanvas {
    display: block;
    width: 100%;
    height: 100%;
  }
  /* Overlay UI styles */
  #uiOverlay {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    color: white;
    font-size: 1.2em;
    z-index: 10;
    text-shadow: 1px 1px 2px #000;
  }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="uiOverlay">
  <div id="score">Score: 0</div>
  <div id="gameOver" style="display:none;">
    Game Over!<br />Final Score: <span id="finalScore"></span><br />Press R to Restart
  </div>
</div>
<script>
// Initialize game variables
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
let score = 0;
let gameOver = false;
let items = [];
let spawnInterval = 1500; // milliseconds
let lastSpawnTime = 0;
// Player properties
const player = {
  x: 0,
  y: 0,
  radius: 20,
  color: "#00ff00"
};
// Resize canvas to fit window
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  player.x = canvas.width / 2;
  player.y = canvas.height - 30;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();
// Handle input
window.addEventListener("mousemove", (e) => {
  player.x = e.clientX;
  player.y = e.clientY;
});
window.addEventListener("touchmove", (e) => {
  if(e.touches.length > 0){
    player.x = e.touches[0].clientX;
    player.y = e.touches[0].clientY;
  }
});
// Spawn falling objects
function spawnItem() {
  const size = 20 + Math.random() * 10;
  const x = Math.random() * (canvas.width - size);
  const y = -size;
  const speed = 1 + Math.random() * 2;
  items.push({ x, y, size, speed, caught: false });
}
// Collision detection between player (circle) and object (circle)
function checkCollision(item) {
  const dx = item.x - player.x;
  const dy = item.y - player.y;
  const distance = Math.sqrt(dx * dx + dy * dy);
  return distance < player.radius + item.size / 2;
}
// Game loop
function gameLoop() {
  const now = Date.now();
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  // Draw background gradient resembling sky
  const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
  gradient.addColorStop(0, '#87CEFA'); // Sky Blue
  gradient.addColorStop(1, '#E0FFFF'); // Light Cyan
  ctx.fillStyle = gradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  // Update and draw falling objects
  for (let i = items.length - 1; i >= 0; i--) {
    const item = items[i];
    item.y += item.speed;
    if (checkCollision(item)) {
      score += 10;
      items.splice(i, 1);
    } else if (item.y > canvas.height + item.size) {
      // Object missed, decrease score or handle as needed
      score = Math.max(0, score - 5);
      items.splice(i, 1);
    } else {
      // Draw falling object
      ctx.fillStyle = 'tomato';
      ctx.beginPath();
      ctx.arc(item.x, item.y, item.size / 2, 0, Math.PI * 2);
      ctx.fill();
    }
  }
  // Spawn new object at intervals
  if (now - lastSpawnTime > spawnInterval) {
    spawnItem();
    lastSpawnTime = now;
  }
  // Draw player (as circle)
  ctx.fillStyle = "#00FF00";
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
  ctx.fill();
  // Update score display
  document.getElementById("score").textContent = `Score: ${score}`;
  if (!gameOver) {
    requestAnimationFrame(gameLoop);
  } else {
    // Show game over overlay
    document.getElementById("gameOver").style.display = "block";
    document.getElementById("finalScore").textContent = score;
  }
}
// Start or restart game
function startGame() {
  score = 0;
  gameOver = false;
  items = [];
  lastSpawnTime = 0;
  resizeCanvas();
  document.getElementById("gameOver").style.display = "none";
  requestAnimationFrame(gameLoop);
}
// Restart game on R key
window.addEventListener("keydown", (e) => {
  if (e.key === "r" || e.key === "R") {
    startGame();
  }
});
// Initialize game
startGame();
</script>
</body>
</html>