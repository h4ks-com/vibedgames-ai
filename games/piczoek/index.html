<!DOCTYPE html>
<html>
<head>
<title>Pixel Map Search</title>
<style>
body {
  font-family: sans-serif;
  margin: 20px;
}
.pixel-map {
  width: 50px;
  height: 50px;
  border: 1px solid #ccc;
  margin: 5px;
  display: inline-block;
}
#results {
  margin-top: 20px;
}
</style>
</head>
<body>

<h1>Pixel Map Search</h1>

<label for="functionSelect">Select Function:</label>
<select id="functionSelect">
  <option value="avgRed">Average Red</option>
  <option value="avgGreen">Average Green</option>
  <option value="avgBlue">Average Blue</option>
  <option value="totalPixels">Total Pixels</option>
  <option value="redPixelCount">Red Pixel Count</option>
  <option value="greenPixelCount">Green Pixel Count</option>
  <option value="bluePixelCount">Blue Pixel Count</option>
  <option value="brightness">Brightness</option>
  <option value="contrast">Contrast (simple)</option>
  <option value="randomValue">Random Value</option>
</select>

<button onclick="searchPixelMaps()">Search</button>

<div id="results">
  <h2>Results:</h2>
  <div id="pixelMapContainer"></div>
</div>

<script>
// Test Data (20 Random Pixel Maps)
const pixelMaps = [];
for (let i = 0; i < 20; i++) {
  const map = [];
  for (let j = 0; j < 25; j++) { // 5x5 = 25 pixels
    map.push([
      Math.floor(Math.random() * 256), // Red
      Math.floor(Math.random() * 256), // Green
      Math.floor(Math.random() * 256)  // Blue
    ]);
  }
  pixelMaps.push(map);
}

// Function Definitions
const functions = {
  avgRed: (map) => map.reduce((sum, pixel) => sum + pixel[0], 0) / map.length,
  avgGreen: (map) => map.reduce((sum, pixel) => sum + pixel[1], 0) / map.length,
  avgBlue: (map) => map.reduce((sum, pixel) => sum + pixel[2], 0) / map.length,
  totalPixels: (map) => map.length,
  redPixelCount: (map) => map.filter(pixel => pixel[0] > 128).length, // Example: Count red pixels > 128
  greenPixelCount: (map) => map.filter(pixel => pixel[1] > 128).length,
  bluePixelCount: (map) => map.filter(pixel => pixel[2] > 128).length,
  brightness: (map) => map.reduce((sum, pixel) => sum + (pixel[0] + pixel[1] + pixel[2]) / 3, 0) / map.length,
  contrast: (map) => { //Simple contrast calculation, not perfect
      const avgBrightness = functions.brightness(map);
      return map.reduce((sum, pixel) => sum + Math.abs((pixel[0] + pixel[1] + pixel[2]) / 3 - avgBrightness), 0) / map.length;
  },
  randomValue: (map) => Math.random() // Just for testing
};

function searchPixelMaps() {
  const selectedFunction = document.getElementById("functionSelect").value;
  const searchFunction = functions[selectedFunction];

  if (!searchFunction) {
    alert("Invalid function selected.");
    return;
  }

  const resultsContainer = document.getElementById("pixelMapContainer");
  resultsContainer.innerHTML = ""; // Clear previous results

  pixelMaps.forEach((map, index) => {
    const value = searchFunction(map);

    const mapElement = document.createElement("div");
    mapElement.classList.add("pixel-map");
    mapElement.title = `Value: ${value.toFixed(2)}`; // Show the value as a tooltip

    // Draw the pixel map (simplified for demonstration)
    map.forEach(pixel => {
      const pixelDiv = document.createElement("div");
      pixelDiv.style.width = "8px";
      pixelDiv.style.height = "8px";
      pixelDiv.style.backgroundColor = `rgb(${pixel[0]}, ${pixel[1]}, ${pixel[2]})`;
      pixelDiv.style.display = "inline-block"; // Display pixels horizontally
      mapElement.appendChild(pixelDiv);
    });


    resultsContainer.appendChild(mapElement);
  });
}


</script>

</body>
</html>
