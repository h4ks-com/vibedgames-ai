<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FrogQuak: German Learning Jump Quest</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Accessibility presets and lightweight UI polish (inline to ensure baseline UX without extra files) */
    :root{
      --bg: #101316;
      --surface: #1e232a;
      --text: #e9f0f7;
      --accent: #7bd389;
      --high-contrast: #000;
      --card-edge:#2d2d2d;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;line-height:1.4}
    .sr-only{position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0 0 0 0);clip-path:inset(50%);white-space:nowrap;border:0;padding:0;margin:-1px}
    .topbar{display:flex;align-items:stretch;justify-content:space-between;gap:12px;padding:10px 14px;background:#1a1f26;border-bottom:1px solid #2c2c2c}
    .topbar .left{display:flex;align-items:baseline;gap:6px}
    .topbar .right{display:flex;gap:8px;align-items:center}
    .btn{background:#2f3640;color:white;border:1px solid #3a3a3a;border-radius:8px;padding:10px 14px;cursor:pointer;font-weight:600}
    .btn[disabled]{opacity:.5;cursor:not-allowed}
    .pitch{font-size:14px;opacity:.95;letter-spacing:.2px}
    #game{display:block; width:100%; height:auto; max-width:100%; aspect-ratio: 16 / 9; background:#111; border:1px solid #333; margin:12px auto; display:block}

    /* Card panel styles */
    .card-panel{position:fixed; right:20px; bottom:20px; width:360px; max-width:90vw; background:#111; border:1px solid #333; border-radius:12px; padding:12px; box-shadow:0 6px 20px rgba(0,0,0,.4)}
    .card-face{display:flex;gap:12px;align-items:center}
    .cat-ring{background:var(--card-edge);border:2px solid #555}
    .card-content{flex:1}
    .card-word{font-size:28px;font-weight:800;letter-spacing:.5px}
    .card-translation{color:#cbd8e1;margin-top:6px}
    .card-pron{font-size:12px;color:#9fb4c8;margin-top:6px}
    .card-example{font-size:13px;color:#cbd8e1;margin-top:6px}

    #cardPanel{display:block}
    #cardClose{margin-top:6px;width:100%}

    /* World map overlay */
    .map-overlay{position:fixed; inset:0; background:rgba(0,0,0,.5); display:flex; align-items:center; justify-content:center}
    .map-panel{width:min(520px,90vw); background:#0e1117; border:1px solid #3a3a3a;border-radius:12px;padding:20px; box-shadow:0 12px 40px rgba(0,0,0,.5)}
    .map-panel h2{margin:0 0 8px 0}
    .map-panel .btn{ margin-right:8px }

    /* Mobile on-screen joystick/jump button styling */
    #jumpBtn{ display:inline-block; /* default inline on large screens; positioned via media query for mobile */ }
    @media (max-width: 700px){
      #jumpBtn{ position: fixed; bottom: 20px; right: 20px; padding: 12px 14px; font-size:16px; z-index: 5; }
      .card-panel{ right: 10px; bottom: 84px; width: 86vw; }
    }

    /* Subtle idle foliage animation hints (no motion sickness) */
    .idle{ animation: idlePulse 6s ease-in-out infinite; }
    @keyframes idlePulse { 0%,100%{ transform: scale(1) translateY(0);} 50%{ transform: scale(1.02) translateY(-1px);} }

    /* WCAG-friendly focus outlines */
    :focus-visible{ outline: 3px solid #ffd54f; outline-offset: 2px; border-radius:4px }
  </style>
</head>
<body>
  <a href="#main" class="sr-only">Skip to main content</a>
  <header class="topbar" aria-label="Main UI bar">
    <section class="left" aria-label="Progress summary">
      <span class="label">Cards collected:</span>
      <span id="card-count" class="value">0</span>
      <span class="sep">/</span>
      <span id="card-total" class="value">4</span>
    </section>
    <section class="pitch" aria-label="Elevator pitch" style="margin-left: auto; margin-right: auto; font-size:0; height:0; overflow:hidden;">
      FrogQuak: A vibe-coded 2D platformer where a cheerful frog quaks through colorful levels to learn German via collectible vocabulary cards.
    </section>
    <div class="left" style="flex:1; display:flex;gap:8px;justify-content:flex-end; align-items:center;">
      <button id="mapBtn" class="btn" aria-label="Open World Map">World Map</button>
      <button id="settingsBtn" class="btn" aria-label="Open Settings">Settings</button>
    </div>
  </header>

  <main id="main" role="main" aria-label="Main game area">
    <section id="play-area" aria-label="Game area">
      <canvas id="game" aria-label="Game canvas showing the frog and levels" width="960" height="540"></canvas>
    </section>

    <!-- Card panel (hidden by default) -->
    <aside id="cardPanel" class="card-panel" role="dialog" aria-label="Card details" aria-modal="true" hidden>
      <div class="card-face">
        <div class="cat-ring" id="card-category" aria-label="Card category" style="width:28px;height:28px;border-radius:50%;"></div>
        <div class="card-content">
          <div id="card-word" class="card-word">German Word</div>
          <div id="card-translation" class="card-translation">English translation</div>
          <div id="card-pron" class="card-pron">Pronunciation hints</div>
          <div id="card-example" class="card-example">Beispielsatz / Example sentence</div>
        </div>
      </div>
      <button id="cardClose" class="btn" aria-label="Close card details">Close</button>
    </aside>

    <!-- World map overlay -->
    <section id="world-map" class="map-overlay" aria-label="World map overlay" hidden>
      <div class="map-panel" role="dialog" aria-label="World map panel">
        <h2>World Map</h2>
        <p>Region 1: Beginner Grove — Unlocked</p>
        <p>Region 2: Riverfjord — Locked until you collect more cards</p>
        <button id="goRegion2" class="btn" disabled aria-label="Enter Region 2">Enter Region 2</button>
        <button id="closeMap" class="btn" aria-label="Close Map">Close Map</button>
        <p class="map-hints" aria-live="polite">Tip: Use arrow keys or swipe to pan. Levels gate behind vocabulary card goals.</p>
      </div>
    </section>

    <!-- Mobile Jump Button (static) -->
    <button id="jumpBtn" class="btn jump" aria-label="Jump">Jump</button>

    <!-- Tutorial/Help anchor area -->
    <section id="tutorial" aria-label="Tutorial" hidden>
      <h2>Tutorial</h2>
      <p>Step-by-step onboarding for controls, card interactions, and learning prompts.</p>
    </section>

    <!-- Master vocabulary deck (non-executing data for editor/preview) -->
    <script id="vocab-data" type="application/json" aria-label="Master vocabulary deck (sample)">
    {
      "version": "1.0",
      "cards": [
        {"id":"greet_hello","GermanWord":"Hallo","EnglishTranslation":"Hello","PartOfSpeech":"Interjection","Gender":"","categories":["greetings"],"pronunciationHints":"haˈloː","exampleGerman":"Hallo, wie geht es dir?","exampleEnglish":"Hello, how are you?","categoryColor":"#4CAF50","difficulty":1,"audioFilePath":"audio/hallo.mp3"},
        {"id":"numbers_one","GermanWord":"eins","EnglishTranslation":"one","PartOfSpeech":"Numeral","Gender":"","categories":["numbers"],"pronunciationHints":"aɪns","exampleGerman":"Ich habe eins Apfel.","exampleEnglish":"I have one apple.","categoryColor":"#3F51B5","difficulty":1,"audioFilePath":"audio/eins.mp3"},
        {"id":"colors_blue","GermanWord":"blau","EnglishTranslation":"blue","PartOfSpeech":"Adjective","Gender":"","categories":["colors"],"pronunciationHints":"blaʊ","exampleGerman":"Der Himmel ist blau.","exampleEnglish":"The sky is blue.","categoryColor":"#f44336","difficulty":1,"audioFilePath":"audio/blau.mp3"},
        {"id":"classroom_please","GermanWord":"bitte","EnglishTranslation":"please / you're welcome","PartOfSpeech":"Phrase","Gender":"","categories":["classroom-phrases"],"pronunciationHints":"ˈbɪtə","exampleGerman":"Könnten Sie mir helfen, bitte?","exampleEnglish":"Could you help me, please?","categoryColor":"#FFC107","difficulty":2,"audioFilePath":"audio/bitte.mp3"}
      ]
    }
    </script>
  </main>

  <footer class="site-footer" aria-label="Footer">
    <p>FrogQuak © 2025 • Learning with a frog, quaking through German words. This prototype includes accessibility presets and open licenses.</p>
  </footer>

  <!-- Non-intrusive gameplay script kept for core functionality; UI can be exercised via HTML/CSS first -->
  <script src="/main.js"></script>
</body>
</html>