<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Bernard's Bazaar</title>
<style>
body{font-family:sans-serif;background:#f0e1cf;padding:2rem}
#game{border:2px solid #8b0000;background:#fff8e1;padding:1rem}
section{margin-bottom:1rem}
button{margin:0.2rem}
</style>
</head>
<body>
<h1>Bernard's Bazaar</h1>
<div id="game">
<section id="market">
<h2>Market Exploration</h2>
<div id="items"></div>
<button onclick="exploreMarket()">Explore Stall</button>
</section>
<section id="puzzle">
<h2>Puzzle: Stakeholder Name</h2>
<p id="puzzleText"></p>
<input id="puzzleInput" placeholder="Type answer">
<button onclick="solvePuzzle()">Solve</button>
<p id="puzzleResult"></p>
</section>
<section id="dialogue">
<h2>Pitch Dialogue</h2>
<p id="dialogueText"></p>
<button onclick="chooseOption('yes')">Yes</button>
<button onclick="chooseOption('no')">No</button>
</section>
<section id="resources">
<h2>Resources</h2>
<p id="credits">Credits: 100</p>
<p id="prototype">Prototype: 0/5</p>
</section>
<section id="crew">
<h2>Crew Morale</h2>
<p id="morale">Morale: 50%</p>
</section>
<section id="investor">
<h2>Investor Negotiation</h2>
<button onclick="negotiate()">Negotiate</button>
<p id="negotiateResult"></p>
</section>
<section id="launch">
<h2>Product Launch</h2>
<button onclick="launch()">Launch</button>
<p id="launchResult"></p>
</section>
</div>
<script>
let credits=100, prototype=0, morale=50;
let locationItems=[{name:"Silk", cost:10},{name:"Spices", cost:15},{name:"Gems", cost:20}];
let encountered=[];
let puzzle={"question":"What stakeholder?","answer":"CEO","timer":3};
function exploreMarket(){
  if(locationItems.length){
    let item=locationItems.shift();
    if(credits>=item.cost){credits-=item.cost;encountered.push(item.name);}
  }update();
}
function solvePuzzle(){
  let inp=document.getElementById('puzzleInput').value.trim().toUpperCase();
  document.getElementById('puzzleResult').textContent=(inp==puzzle.answer.toUpperCase()?"Solved!": "Try again.");
  if(inp==puzzle.answer.toUpperCase()){prototype++;}
  update();
}
function chooseOption(opt){
  if(opt=='yes'){creditAdd(20);morale+=5;}
  else{morale-=10;}
  update();
}
function negotiate(){
  let success=Math.random()<0.5;
  document.getElementById('negotiateResult').textContent=success?"Investor Won!":"Investor Declined";
  if(success){credits+=50;}
  else{prototype=0;}
  update();
}
function launch(){
  let success=(prototype>=5 && morale>40);
  document.getElementById('launchResult').textContent=success?"Success!": "Failure. Try again.";
}
function creditAdd(val){credits+=val;}
function update(){
  document.getElementById('credits').textContent="Credits: "+credits;
  document.getElementById('prototype').textContent="Prototype: "+prototype+"/5";
  document.getElementById('morale').textContent="Morale: "+morale+"%";
  document.getElementById('items').textContent="Encounters: "+encountered.join(', ');
}
update();
</script>
</body>
</html>