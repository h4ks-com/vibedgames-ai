:root{
  --bg: #0b0f1a;
  --fg: #e9f0ff;
  --panel: rgba(14,19,40,0.88);
  --accent: #7aa2ff;
  --glow: rgba(120,180,255,0.6);
  --grain: rgba(255,255,255,0.04);
  --shadow: rgba(0,0,0,0.35);
  --surface: rgba(12,16,40,0.82);
  --surface-2: rgba(20,24,60,0.72);
  --muted: #a8baff;
  --good: #8ef5a0;
  --warn: #ffd580;
  --bad: #ff8a8a;
  --radius: 12px;
  --gap: 14px;
}

*{ box-sizing:border-box; }

/* base page sizing */
html, body, #app { height: 100%; }

/* typography and base visuals */
body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Roboto, Arial, "Segoe UI", sans-serif; color: var(--fg); background: #050617; overflow:hidden; position:relative; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

/* textured background */
body:before{ content:''; position:fixed; inset:0; background:
  radial-gradient(circle at 20% -10%, rgba(80,60,180,0.25), rgba(0,0,0,0) 40%),
  radial-gradient(circle at 80% 10%, rgba(20,180,255,0.25), rgba(0,0,0,0) 40%),
  repeating-radial-gradient(circle at 50% 50%, rgba(255,255,255,0.04) 0 6px, rgba(0,0,0,0) 6px 14px);
  background-color:#040617; z-index:0; filter: saturate(1.15) contrast(1.05); }

.eo-app{ position:relative; z-index:1; display:flex; flex-direction:column; height:100%; padding: 10px; }

/* header */
.eo-header{ display:flex; justify-content:space-between; align-items:center; padding:12px 16px; border-bottom:1px solid #283046; border-radius:12px; backdrop-filter: blur(6px); background: rgba(10,16,40,0.8); }
.eo-header .title{ font-weight:700; font-size:1.25rem; letter-spacing:.5px; color:#eaf2ff; text-shadow:0 1px 0 rgba(0,0,0,.3); }

.controls{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
.control-group{ color:#e6eeff; font-size:.92rem; display:flex; align-items:center; gap:6px; padding:4px 6px; border-radius:6px; background: rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.08); }

/* panels */
.panel{ background: var(--surface); border:1px solid rgba(80,110,180,0.4); border-radius:12px; padding:12px; box-shadow: 0 6px 20px rgba(0,0,0,.25); }

/* layout */
.eo-main{ display:grid; grid-template-columns: 260px 1fr 360px; gap: var(--gap); height: calc(100% - 74px); }
.eo-left{ overflow:auto; padding-right:6px; }
.eo-stage{ display:flex; align-items:stretch; justify-content:center; position:relative; min-height:420px; }
#stage{ width:100%; height:100%; background:#000; border-radius:12px; box-shadow: inset 0 0 60px rgba(0,0,0,.6); }
.eo-right{ overflow:auto; padding-right:6px; }

/* resource and alignment UI blocks */
.res-grid{ display:flex; flex-direction:column; gap:8px; }
.bar{ display:flex; align-items:center; gap:8px; font-size:.88rem; }
.bar meter{ width: 180px; height: 14px; vertical-align: middle; }

.align-grid{ display:flex; flex-direction:column; gap:6px; }
.align-row{ display:flex; align-items:center; gap:8px; }

.journal{ max-height: 240px; overflow:auto; font-family: ui-monospace, SFMono-Regular, Monaco, Consolas, monospace; font-size:.85rem; background:#0b1020; padding:8px; border-radius:6px; border:1px solid #222; }
.journal-entry{ padding:2px 0; border-bottom:1px dashed #333; }

.epoch-badge{ font-family:monospace; font-size:.95rem; padding:6px 12px; border-radius:6px; background:#1a2a54; display:inline-block; margin-right:8px; color:#eaf1ff; }

.mini-panel{ display:flex; flex-direction:column; gap:6px; padding:6px; }
.mini-prompt{ font-size:.95rem; color:#e6f0ff; }
#miniSlider{ width:100%; }
.mini-feedback{ font-size:.9rem; color:#cbd6ff; }

.ai-panel{ font-family: ui-monospace, SFMono-Regular, Monaco, Consolas, monospace; font-size:.92rem; background:#0f1220; padding:8px; border-radius:6px; border:1px solid #2a1f4a; min-height:60px; color:#e9e6ff; }

.eo-footer{ display:flex; justify-content:space-between; align-items:center; padding:8px 12px; border-top:1px solid #223046; background: rgba(8,12,28,0.8); border-radius:12px; margin-top:6px; }

@media (max-width: 1100px){
  .eo-main{ grid-template-columns: 1fr; height:auto; }
  .eo-left{ order:1; }
  .eo-stage{ order:2; height:320px; }
  .eo-right{ order:3; }
}

/* accessibility and focus */
:focus{ outline: none; }
button, input, select { font: inherit; color: inherit; }
button, [role="button"]{ cursor: pointer; }
button:focus-visible, input:focus-visible, select:focus-visible{ outline: 2px solid var(--accent); outline-offset: 2px; border-radius:6px; }

/* high contrast shortcuts */
body.hc{ filter: contrast(1.15) brightness(1.05); }
body.hc{ --fg: #f0f0f0; --panel: rgba(20,20,20,0.95); --accent: #ffd166; }

.stage-overlay{ position:absolute; inset:0; pointer-events:none; background-image: radial-gradient(circle at center, rgba(255,255,255,0.04) 0, rgba(255,255,255,0.0) 40px); }

/* small utility to keep docs section readable if present */
#eo-docs{ display:none; }
