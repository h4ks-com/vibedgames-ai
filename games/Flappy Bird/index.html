<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Flappy Bird</title>
<style>
  body { margin: 0; overflow: hidden; }
  canvas { display: block; }
</style>
</head>
<body>
<script>
const canvas = document.createElement('canvas');
document.body.appendChild(canvas);
const ctx = canvas.getContext('2d');
let width = window.innerWidth;
let height = window.innerHeight;
canvas.width = width;
canvas.height = height;

window.addEventListener('resize', () => {
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;
});

// Game variables
let bird = { x: 50, y: height/2, gravity: 0.6, lift: -15, velocity: 0 };
let pipes = [];
let score = 0;
let gameOver = false;

// Pipe settings
const pipeWidth = 50;
const pipeGap = 150;

// Control the bird
document.addEventListener('keydown', () => { bird.velocity = bird.lift; });

function createPipe() {
  const gapY = Math.random() * (height - pipeGap);
  pipes.push({ x: width, y: gapY });
}

function updatePipes() {
  if (pipes.length === 0 || pipes[pipes.length - 1].x < width - 200) {
    createPipe();
  }
  for (let i = 0; i < pipes.length; i++) {
    pipes[i].x -= 2;
    if (pipes[i].x + pipeWidth < 0) {
      pipes.splice(i, 1);
      score++;
    }
  }
}

function checkCollision() {
  for (let pipe of pipes) {
    if (
      bird.x + 20 > pipe.x && bird.x - 20 < pipe.x + pipeWidth &&
      (bird.y - 20 < pipe.y || bird.y + 20 > pipe.y + pipeGap)
    ) {
      gameOver = true;
    }
  }
  if (bird.y > height || bird.y < 0) {
    gameOver = true;
  }
}

function draw() {
  ctx.fillStyle = '#70c5ce';
  ctx.fillRect(0, 0, width, height);
  ctx.fillStyle = '#ffeb3b';
  ctx.beginPath();
  ctx.arc(bird.x, bird.y, 20, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = '#4caf50';
  for (let pipe of pipes) {
    ctx.fillRect(pipe.x, 0, pipeWidth, pipe.y);
    ctx.fillRect(pipe.x, pipe.y + pipeGap, pipeWidth, height - pipe.y - pipeGap);
  }

  ctx.fillStyle = '#000';
  ctx.font = '20px Arial';
  ctx.fillText('Score: ' + score, 10, 30);
}

function gameLoop() {
  if (gameOver) {
    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
    ctx.fillRect(0, 0, width, height);
    ctx.fillStyle = '#fff';
    ctx.font = '40px Arial';
    ctx.fillText('Game Over', width / 2 - 100, height / 2);
    return;
  }
  ctx.clearRect(0, 0, width, height);
  bird.velocity += bird.gravity;
  bird.y += bird.velocity;
  updatePipes();
  checkCollision();
  draw();
  requestAnimationFrame(gameLoop);
}

setInterval(() => {
  if (Math.random() < 0.02) {
    createPipe();
  }
}, 1500);

gameLoop();
</script>
</body>
</html>