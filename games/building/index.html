<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebVR A-Frame Scene</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://aframe.io/releases/1.2.0/aframe-extras.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        a-scene {
            display: block;
        }
    </style>
</head>
<body>
    <a-scene>
        <!-- Sky -->
        <a-sky color="skyblue"></a-sky>
        
        <!-- Ground Plane -->
        <a-plane 
            position="0 0 -5" 
            rotation="-90 0 0" 
            width="10" 
            height="10" 
            color="#7CFC00" 
            shadow></a-plane>

        <!-- Camera with movement controls -->
        <a-entity id="camera" camera look-controls position="0 1.6 0">
            <a-cursor></a-cursor>
        </a-entity>

        <!-- Light -->
        <a-light type="ambient" color="#FFFFFF"></a-light>
        <a-light type="directional" position="-1 1 1" intensity="0.5"></a-light>
    </a-scene>

    <script>
        // Movement speed
        const speed = 0.1;

        // Handle keyboard movements
        document.addEventListener('keydown', (event) => {
            const cameraEl = document.querySelector('#camera');
            const cameraPos = cameraEl.getAttribute('position');

            switch (event.key) {
                case 'w': // Move forward
                    cameraEl.setAttribute('position', {x: cameraPos.x, y: cameraPos.y, z: cameraPos.z - speed});
                    break;
                case 's': // Move backward
                    cameraEl.setAttribute('position', {x: cameraPos.x, y: cameraPos.y, z: cameraPos.z + speed});
                    break;
                case 'a': // Move left
                    cameraEl.setAttribute('position', {x: cameraPos.x - speed, y: cameraPos.y, z: cameraPos.z});
                    break;
                case 'd': // Move right
                    cameraEl.setAttribute('position', {x: cameraPos.x + speed, y: cameraPos.y, z: cameraPos.z});
                    break;
            }
        });

        // Allow click-to-move functionality with the cursor
        const cursorEl = document.querySelector('a-cursor');
        cursorEl.addEventListener('click', function () {
            const cameraEl = document.querySelector('#camera');
            const targetPos = cameraEl.getAttribute('position');

            const intersectedEl = document.querySelector('a-scene').components['raycaster'].getIntersection(cursorEl);

            if (intersectedEl) {
                const newPos = intersectedEl.point;
                cameraEl.setAttribute('position', {x: newPos.x, y: cameraPos.y, z: newPos.z});
            }
        });

    </script>
</body>
</html>
