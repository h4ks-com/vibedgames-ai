@charset utf-8;
/* Pulse Grid - improved visual/UI system aligned with project task list */
:root {
  /* Core palette and sizing tokens */
  --bg: #0a0b14;
  --bg-grad1: rgba(0,180,255,.18);
  --bg-grad2: rgba(180,0,255,.15);
  --panel: rgba(255,255,255,0.08);
  --panel-border: rgba(255,255,255,0.14);
  --fg: #e9feff;
  --muted: #a6b4c9;
  --tile-size: 112px;       /* default tile size; density can adjust via JS-settings */
  --tile-gap: 14px;
  --radius: 14px;
  --shadow: 0 8px 20px rgba(0,0,0,.4);
  --neon: 0 0 14px rgba(0,255,255,.8);
  --tile-glow: 0 0 14px rgba(0,255,255,.9);
  --focus: 3px solid #fff;
}

/* Theme variants (Pulse Grid lobby vibe: Neon, Warm, Cool) */
.theme-neon {
  --bg: #0a0b14;
}
.theme-warm {
  --panel: rgba(24, 14, 14, 0.85);
  --fg: #eafffb;
}
.theme-cool {
  --panel: rgba(6, 16, 28, 0.85);
  --fg: #e9f6ff;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto;
  color: var(--fg);
  /* Lobby ambience with subtle parallax glow */
  background: radial-gradient(circle at 15% -10%, rgba(0,180,255,.18), transparent 40%),
              radial-gradient(circle at 90% 0%, rgba(180,0,255,.15), transparent 40%),
              linear-gradient(#05060e, #02040a 60%, #04060e);
  background-attachment: fixed;
  overflow: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.scene {
  position: relative;
  width: 100%; height: 100vh;
  display: grid; grid-template-rows: auto 1fr auto;
  padding: 2rem; 
  box-sizing: border-box;
}
/* Stage / canvas area */
#stage {
  width: min(92vmin, 1100px);
  height: min(62vmin, 720px);
  border-radius: 22px;
  backdrop-filter: blur(2px);
  background: linear-gradient(135deg, rgba(5,8,20,.95), rgba(3,6,12,.95));
  box-shadow: 0 20px 40px rgba(0,0,0,.6), inset 0 0 40px rgba(0,255,220,.12);
  border: 1px solid rgba(110,240,255,.25);
  display: block;
}

/* Foreground UI overlay (brand/tutorial hints) */
.overlay {
  position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: flex-end;
  padding: 16px; pointer-events: none; text-align: center;
}
.overlay .brand {
  font-size: clamp(20px, 4vw, 40px);
  font-weight: 900; color: #eaffff; text-shadow: 0 0 14px rgba(0,255,230,.8);
  letter-spacing: .5px; mix-blend-mode: screen; pointer-events: auto;
}
.overlay .subtitle {
  margin-top: 6px; font-size: clamp(11px, 2vw, 14px); color: #c7f0ff; opacity: .9;
  text-shadow: 0 0 6px rgba(0,200,255,.6);
  pointer-events: auto;
}
@media (max-width: 700px){ #stage { height: 68vh; } }

/* Header / lobby bar */
header.hud {
  display: flex; align-items: center; justify-content: space-between; gap: 12px;
  padding: 12px 16px; border-radius: 14px; background: rgba(8,8,12,0.6);
  border: 1px solid rgba(255,255,255,.08); box-shadow: var(--shadow);
  backdrop-filter: blur(2px);
}
.brand { font-weight: 900; font-size: 1.25rem; }
.subtitle { color: var(--muted); font-size: .9rem; }
.controls { display: flex; gap: 8px; align-items: center; }
.btn { appearance: none; border: none; border-radius: 999px; padding: 10px 14px; font-weight: 700; cursor: pointer; color: #111; background: #9eff95; box-shadow: 0 3px 0 #6bd16f; transition: transform .15s ease; }
.btn.secondary { background: #5c5c9e; color: white; box-shadow: 0 3px 0 #3b3b6c; }
.btn:focus-visible { outline: 3px solid #fff; outline-offset: 2px; }
.btn:active { transform: translateY(1px) scale(0.99); }

main.game-area { display: grid; grid-template-columns: 1fr; align-items: center; justify-items: center; gap: 16px; padding: 12px; flex: 1; min-height: 0; }
.panel { background: var(--panel); border: 1px solid var(--panel-border); border-radius: 14px; padding: 16px; width: min(100%, 880px); box-shadow: var(--shadow); }
.scoreboard { display: flex; justify-content: space-between; align-items: center; gap: 12px; padding: 6px 0; color: var(--muted); }
.scoreboard .value { font-weight: 700; color: #fff; }
#tiles { display: grid; grid-template-columns: repeat(auto-fill, minmax(var(--tile-size), 1fr)); gap: var(--tile-gap); width: min(100%, 860px); justify-items: center; }
.tile { width: var(--tile-size); height: var(--tile-size); border-radius: calc(var(--tile-size) * 0.18); position: relative; cursor: pointer; outline: none; border: 0; transition: transform .15s ease, box-shadow .15s ease, filter .15s ease; display: inline-flex; align-items: center; justify-content: center; color: #111; box-shadow: inset 0 0 0 rgba(0,0,0,0.0), 0 10px 24px rgba(0,0,0,.25); transform: translateZ(0); }
.tile:focus { outline: 3px solid #fff; outline-offset: 2px; }
.tile-label { font-size: 12px; font-weight: 700; color: rgba(0,0,0,.6); }
.tile.flash { filter: brightness(1.15); transform: scale(1.03); box-shadow: 0 0 0.8rem currentColor; }
@keyframes correctPulse { 0% { transform: scale(1); box-shadow: 0 0 0 rgba(0,0,0,0); } 40% { transform: scale(1.08); box-shadow: 0 0 12px currentColor; } 100% { transform: scale(1); box-shadow: 0 0 0 rgba(0,0,0,0); } }
.tile.correct { animation: correctPulse 360ms ease-in-out; }

/* Tutorial / overlay */
.overlay { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; padding: 16px; pointer-events: none; text-align: center; }
.tutorial { position: absolute; top: 12px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,.75); padding: 12px 14px; border-radius: 12px; color: #fff; max-width: 90vw; border: 1px solid rgba(255,255,255,.15); z-index: 2; }
.hidden { display: none; }

/* Settings panel (floating) */
#settingsPanel { position: fixed; right: 12px; bottom: 12px; width: min(420px, 95%); max-width: 420px; background: rgba(0,0,0,.6); border: 1px solid rgba(255,255,255,.15); border-radius: 12px; padding: 12px; z-index: 3; }
.setting { display: flex; flex-direction: column; gap: 6px; margin: 8px 0; }
lable, label { font-weight: 600; }
select, input[type="range"] { width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #333; background: #111; color: #fff; }
input[type="checkbox"] { transform: scale(1.1); }

/* Accessibility helpers */
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }

/* Idle ambience and motion preference */
@media (prefers-reduced-motion: reduce) {
  .tile, .panel, .overlay { animation: none !important; transition: none !important; }
}

/* Density-related tweaks via CSS classes (JS toggles if needed) */
:root.density-low  { --tile-size: 96px; --tile-gap: 10px; }
:root.density-medium { --tile-size: 112px; --tile-gap: 14px; }
:root.density-high { --tile-size: 128px; --tile-gap: 18px; }

/* Responsive tweaks */
@media (max-width: 700px) {
  :root { --tile-size: 88px; }
  #stage { height: 68vh; }
}
