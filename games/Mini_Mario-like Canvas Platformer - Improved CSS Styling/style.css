/* Mini Mario-like Canvas Platformer: improved visuals, accessibility, and responsive UI
   - Rich, scalable visuals for the 2D canvas platformer
   - Parallax vibe, HUD enhancements, pause and touch overlays
   - High-contrast accessibility options and reduced-motion support
*/

:root{
  --bg0:#0b1020;
  --bg1:#1b2a60;
  --panel: rgba(0,0,0,.25);
  --text:#eaf7ff;
  --accent:#7bdfff;
  --coin:#f7d046;
  --platform:#7a5230;
  --player:#2e7bd6;
  --enemy:#e74c3c;
  --flag:#2ecc71;
  --shadow: rgba(0,0,0,.4);
}

/* Base layout */
html, body { height: 100%; margin: 0; }
body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color: var(--text);
  background: linear-gradient(#0b1020, #0b1020 60%, #0b1220);
  overflow: hidden;
}

/* Scene wrapper and parallax vibe */
.game-shell {
  position: relative;
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(circle at 20% 10%, rgba(120,200,255,.15), transparent 40%),
              radial-gradient(circle at 80% 20%, rgba(180,120,255,.25), transparent 50%),
              linear-gradient(#0b1020 0%, #0b1020 60%, #0b1220 100%);
  overflow: hidden;
}

/* Parallax decorative layer (behind the canvas) */
.parallax {
  position: absolute; left: 0; top: 0; width: 200%; height: 100%;
  left: -50%; z-index: 0; pointer-events: none;
  /* subtle layered gradients to simulate distant scenery */
  background-image:
    linear-gradient(to bottom, rgba(120,180,255,.25) 0 40%, rgba(120,180,255,0) 40%),
    linear-gradient(to bottom, rgba(50,70,130,.25) 0 60%, rgba(50,70,130,0) 60%);
  background-repeat: no-repeat;
  background-size: 100% 60%, 100% 100%;
  opacity: 0.6;
  filter: saturate(1.1);
}

/* Canvas visuals */
#game {
  width: min(100%, 960px);
  height: auto;
  border-radius: 14px;
  box-shadow: 0 20px 60px rgba(0,0,0,.6);
  background: #1a1a1a;
  image-rendering: pixelated;
  outline: 1px solid rgba(255,255,255,.08);
}

/* HUD */
.hud {
  position: absolute; top: 14px; left: 14px; display: flex; gap: 14px; padding: 8px 12px; border-radius: 12px;
  background: rgba(0,0,0,.25); backdrop-filter: blur(2px);
  font-weight: 700; letter-spacing: .4px; z-index: 2;
  box-shadow: 0 2px 8px rgba(0,0,0,.4);
}
.hud span {
  font-family: ui-monospace, SFMono-Regular, Monaco, Consolas, monospace;
  color: #eaffff; text-shadow: 0 1px 0 rgba(0,0,0,.4);
  padding: 6px 10px; border-radius: 8px; background: rgba(0,0,0,.25);
}
/* HUD items aligned nicely on small screens */
@media (max-width: 700px){
  .hud { padding: 6px 8px; gap: 8px; }
  .hud span { padding: 4px 8px; font-size: 12px; }
}

/* Keyboard accessibility toggle button */
#kbToggle {
  position: absolute; top: 14px; right: 14px; z-index: 2;
  background: rgba(0,0,0,.5); border:1px solid #444; color:#fff;
  padding: 6px 10px; border-radius: 6px; cursor: pointer; font-weight: 600; font-family: inherit;
  transition: transform .15s ease, background .2s ease;
}
#kbToggle:hover { transform: translateY(-1px); background: rgba(0,0,0,.65); }

/* On-screen touch controls (mobile) */
.controls-overlay {
  position: absolute; left: 12px; bottom: 12px; display: grid; grid-template-columns: 64px 64px; gap: 10px; z-index: 2;
  padding: 6px; background: rgba(0,0,0,.25); border-radius: 12px;
}
.touch-btn {
  width: 64px; height: 64px; border-radius: 12px; border: 2px solid #fff; background: rgba(0,0,0,.28);
  color: #fff; font-size: 22px; display: inline-flex; align-items: center; justify-content: center; user-select: none; touch-action: manipulation;
}
@media (max-width: 700px){
  .controls-overlay { grid-template-columns: 1fr 1fr; gap: 8px; left: 8px; bottom: 8px; }
  .touch-btn { width: 56px; height: 56px; font-size: 20px; }
}

/* Pause and in-game overlays */
.overlay { position: absolute; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,.5); z-index: 5; color: #fff; font-family: system-ui; }
.overlay.active { display: flex; flex-direction: column; gap: 12px; }
.overlay .panel { background: rgba(0,0,0,.6); padding: 16px; border-radius: 12px; border:1px solid rgba(255,255,255,.15); text-align:center; }
.overlay button { padding: 10px 14px; font-size: 14px; border-radius: 6px; border: none; cursor: pointer; margin: 4px; }

/* Simple parallax background layers (visual only) */
.parallax-layer { position: absolute; width: 200%; height: 60%; left: -20%; top: 10%; background: linear-gradient(to bottom, rgba(100,150,255,.35), rgba(100,150,255,0)); opacity:.6; transform: translateZ(-1px); }
.parallax-layer.mid { top: 0; opacity:.4; }
.parallax-layer.far { top: 0; opacity:.25; }

/* Accessibility: high-contrast mode */
body.high-contrast {
  background: #000; color: #fff;
}
body.high-contrast #game { outline: 4px solid #fff; }

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* Debug visuals toggle (optional) */
:focus { outline: 2px solid #fff; outline-offset: 2px; }
