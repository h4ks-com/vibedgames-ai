<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        background-color: #f0f0f0;
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }
      canvas {
        display: block;
        margin: auto;
        background-color: #fff;
        border: 1px solid #ccc;
      }
      .score {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 24px;
      }
    </style>
  </head>
  <body>
    <div class="score">Score: <span id="score">0</span></div>
    <canvas id="canvas"></canvas>
    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const scoreElement = document.getElementById("score");
      let score = 0;
      const poopArray = [];
      const toilet = {
        x: canvas.width / 2,
        y: canvas.height - 50,
        width: 100,
        height: 50,
        speed: 10,
      };
      function drawRect(x, y, width, height, color) {
        ctx.fillStyle = color;
        ctx.fillRect(x, y, width, height);
      }
      function drawPoop() {
        if (poopArray.length < 10) {
          const x = Math.floor(Math.random() * canvas.width);
          const y = 0;
          const size = 30;
          poopArray.push({ x, y, size });
        }
        poopArray.forEach((poop, index) => {
          poop.y += 5;
          drawRect(poop.x, poop.y, poop.size, poop.size, "#996633");
          if (poop.y > canvas.height) {
            poopArray.splice(index, 1);
          }
          if (
            poop.y + poop.size > toilet.y &&
            poop.y < toilet.y + toilet.height &&
            poop.x + poop.size > toilet.x &&
            poop.x < toilet.x + toilet.width
          ) {
            poopArray.splice(index, 1);
            score++;
            scoreElement.textContent = score;
          }
        });
      }
      function moveToilet(event) {
        if (event.keyCode === 37 && toilet.x > 0) {
          toilet.x -= toilet.speed;
        } else if (
          event.keyCode === 39 &&
          toilet.x + toilet.width < canvas.width
        ) {
          toilet.x += toilet.speed;
        }
        drawRect(
          toilet.x,
          toilet.y,
          toilet.width,
          toilet.height,
          "#336699"
        );
      }
      function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawPoop();
        requestAnimationFrame(gameLoop);
      }
      document.addEventListener("keydown", moveToilet);
      gameLoop();
    </script>
  </body>
</html>
