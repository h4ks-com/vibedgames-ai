<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web VR A-Frame World</title>
    <style>
        body { margin: 0; }
        #text-display { position: absolute; top: 10px; left: 10px; color: white; font-size: 24px; }
    </style>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>
<body>
    <div id="text-display"></div>
    <a-scene>
        <a-sky color="#{{skyColor}}"></a-sky>
        <a-plane rotation="-90 0 0" width="1000" height="1000" color="#{{floorColor}}"></a-plane>

        <script>
            const sceneEl = document.querySelector('a-scene');
            const textDisplay = document.getElementById('text-display');
            const buildings = [];

            // Generate random colors for sky and floor
            const skyColor = `#${((1 << 24) * Math.random() | 0).toString(16)}`;
            const floorColor = `#${((1 << 24) * Math.random() | 0).toString(16)}`;
            
            // Function to generate a random string
            function generateRandomString() {
                const possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
                let randomString = "";
                for (let i = 0; i < 10; i++) {
                    randomString += possible.charAt(Math.floor(Math.random() * possible.length));
                }
                return randomString;
            }

            // Function to create buildings
            function createBuildings() {
                for (let i = 0; i < 1000; i++) {
                    let buildingEl = document.createElement('a-box');
                    const width = Math.random() * 5 + 1;
                    const height = Math.random() * 5 + 10;
                    const depth = Math.random() * 5 + 1;
                    const colorR = Math.floor(Math.random() * 73) + 127; // R: 127-200
                    const colorG = Math.floor(Math.random() * 126) + 15; // G: 15-140
                    const colorB = Math.floor(Math.random() * 21) + 10; // B: 10-30
                    const color = `rgb(${colorR}, ${colorG}, ${colorB})`;

                    // Set building properties
                    buildingEl.setAttribute('position', `${(Math.random() * 500 - 250)} ${height / 2} ${(Math.random() * 500 - 250)}`);
                    buildingEl.setAttribute('width', width);
                    buildingEl.setAttribute('height', height);
                    buildingEl.setAttribute('depth', depth);
                    buildingEl.setAttribute('color', color);

                    // Create windows
                    const isYellowWindow = Math.random() < 0.5;
                    const windowColor = isYellowWindow ? 'yellow' : 'black';
                    for (let j = 0; j < 4; j++) {
                        let windowEl = document.createElement('a-plane');
                        windowEl.setAttribute('position', `${(Math.random() * width*2 - width)} ${height * Math.random()} ${depth / 2 + 0.01}`);
                        windowEl.setAttribute('width', 0.5);
                        windowEl.setAttribute('height', 0.5);
                        windowEl.setAttribute('color', windowColor);
                        buildingEl.appendChild(windowEl);
                    }

                    buildings.push(buildingEl);
                    sceneEl.appendChild(buildingEl);
                }
            }

            // Create spheres with text labels
            function createSpheres() {
                for (let i = 0; i < 10; i++) {
                    let sphereEl = document.createElement('a-sphere');
                    const x = Math.random() * 500 - 250;
                    const y = 2 + Math.random() * 10;
                    const z = Math.random() * 500 - 250;
                    sphereEl.setAttribute('position', `${x} ${y} ${z}`);
                    sphereEl.setAttribute('radius', '0.5');
                    sphereEl.setAttribute('color', '#FF0000');

                    // Create and append text to the sphere
                    let textEl = document.createElement('a-text');
                    textEl.setAttribute('value', '');
                    textEl.setAttribute('align', 'center');
                    textEl.setAttribute('position', `0 0.6 0`);
                    sphereEl.appendChild(textEl);

                    sceneEl.appendChild(sphereEl);

                    // Update text content every 10 seconds
                    setInterval(() => {
                        const randomString = generateRandomString();
                        textEl.setAttribute('value', randomString);
                        textEl.setAttribute('color', '#FFFFFF');
                    }, 10000);
                }
            }

            // Update display text every second
            setInterval(() => {
                textDisplay.innerHTML = generateRandomString();
            }, 1000);

            // Initialize everything
            document.addEventListener('DOMContentLoaded', () => {
                createBuildings();
                createSpheres();
            });
        </script>
    </a-scene>
</body>
</html>
